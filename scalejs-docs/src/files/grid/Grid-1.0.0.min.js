var requirejs,require,define;if(function(e){function t(e,t){return g.call(e,t)}function n(e,t){var n,r,i,o,s,a,u,l,c,d,f=t&&t.split("/"),p=v.map,h=p&&p["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),l=0;l<e.length;l+=1)if(d=e[l],"."===d)e.splice(l,1),l-=1;else if(".."===d){if(1===l&&(".."===e[2]||".."===e[0]))break;l>0&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||h)&&p){for(n=e.split("/"),l=n.length;l>0;l-=1){if(r=n.slice(0,l).join("/"),f)for(c=f.length;c>0;c-=1)if(i=p[f.slice(0,c).join("/")],i&&(i=i[r])){o=i,s=l;break}if(o)break;!a&&h&&h[r]&&(a=h[r],u=l)}!o&&a&&(o=a,s=u),o&&(n.splice(0,s,o),e=n.join("/"))}return e}function r(t,n){return function(){return c.apply(e,b.call(arguments,0).concat([t,n]))}}function i(e){return function(t){return n(t,e)}}function o(e){return function(t){p[e]=t}}function s(n){if(t(h,n)){var r=h[n];delete h[n],m[n]=!0,l.apply(e,r)}if(!t(p,n)&&!t(m,n))throw new Error("No "+n);return p[n]}function a(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function u(e){return function(){return v&&v.config&&v.config[e]||{}}}var l,c,d,f,p={},h={},v={},m={},g=Object.prototype.hasOwnProperty,b=[].slice;d=function(e,t){var r,o=a(e),u=o[0];return e=o[1],u&&(u=n(u,t),r=s(u)),u?e=r&&r.normalize?r.normalize(e,i(t)):n(e,t):(e=n(e,t),o=a(e),u=o[0],e=o[1],u&&(r=s(u))),{f:u?u+"!"+e:e,n:e,pr:u,p:r}},f={require:function(e){return r(e)},exports:function(e){var t=p[e];return"undefined"!=typeof t?t:p[e]={}},module:function(e){return{id:e,uri:"",exports:p[e],config:u(e)}}},l=function(n,i,a,u){var l,c,v,g,b,y,w=[];if(u=u||n,"function"==typeof a){for(i=!i.length&&a.length?["require","exports","module"]:i,b=0;b<i.length;b+=1)if(g=d(i[b],u),c=g.f,"require"===c)w[b]=f.require(n);else if("exports"===c)w[b]=f.exports(n),y=!0;else if("module"===c)l=w[b]=f.module(n);else if(t(p,c)||t(h,c)||t(m,c))w[b]=s(c);else{if(!g.p)throw new Error(n+" missing "+c);g.p.load(g.n,r(u,!0),o(c),{}),w[b]=p[c]}v=a.apply(p[n],w),n&&(l&&l.exports!==e&&l.exports!==p[n]?p[n]=l.exports:v===e&&y||(p[n]=v))}else n&&(p[n]=a)},requirejs=require=c=function(t,n,r,i,o){return"string"==typeof t?f[t]?f[t](n):s(d(t,n).f):(t.splice||(v=t,n.splice?(t=n,n=r,r=null):t=e),n=n||function(){},"function"==typeof r&&(r=i,i=o),i?l(e,t,n,r):setTimeout(function(){l(e,t,n,r)},4),c)},c.config=function(e){return v=e,v.deps&&c(v.deps,v.callback),c},requirejs._defined=p,define=function(e,n,r){n.splice||(r=n,n=[]),t(p,e)||t(h,e)||(h[e]=[e,n,r])},define.amd={jQuery:!0}}(),define("Scripts/almond",function(){}),requirejs.config({config:{"scalejs.mvvm":{root:"grid1"}}}),define("Properties/embedded-config",function(){}),define("jQuery",[],function(){return window.jQuery}),define("jquery-private",function(){}),define("scalejs",[],function(){var e;return{load:function(t,n,r,i){var o;return"extensions"===t?(i.scalejs&&i.scalejs.extensions?(e=i.scalejs.extensions,n(e,function(){r(Array.prototype.slice(arguments))})):n(["scalejs/extensions"],function(){r(Array.prototype.slice(arguments))},function(){r([])}),void 0):0===t.indexOf("application")?(o=t.substring("application".length+1).match(/([^,]+)/g)||[],o=o.map(function(e){return-1===e.indexOf("/")?"app/"+e+"/"+e+"Module":e}),o.push("scalejs/application"),n(["scalejs!extensions"],function(){n(o,function(){var e=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0,arguments.length-1);i.isBuild||e.registerModules.apply(null,t),r(e)})}),void 0):(n(["scalejs/"+t],function(e){r(e)}),void 0)},write:function(t,n,r){"scalejs"===t&&0===n.indexOf("application")&&r('define("scalejs/extensions", '+JSON.stringify(e)+", function () { return Array.prototype.slice(arguments); })")}}}),define("scalejs/base.type",[],function(){function e(e){if(void 0===e)return"undefined";if(null===e)return"null";var t,n={}.toString.call(e).match(/\s([a-z|A-Z]+)/)[1].toLowerCase();return"object"!==n?n:(t=e.constructor.toString().match(/^function\s*([$A-Z_][0-9A-Z_$]*)/i),null===t?"object":t[1])}function t(e){var n,r,i,o,s,a=arguments.length,u=a-1,l=e;if(0===a)return!1;if(1===a)return null!==e&&e!==n;if(a>2)for(r=0;u-1>r;r+=1){if(!t(l))return!1;l=l[arguments[r+1]]}return i=arguments[u],null===l?null===i||"null"===i:l===n?i===n||"undefined"===i:""===i?l===i:(o=typeof i,"string"===o?(s=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),s===i):"function"===o?l instanceof i:l===i)}return{is:t,typeOf:e}}),define("scalejs/base.object",["./base.type"],function(e){function t(e){var t,n,r,i=e;if(!u(i))return!1;for(t=1,n=arguments.length;n>t;t+=1)if(r=arguments[t],i=i[r],!u(i))return!1;return!0}function n(e,r){var i;for(i in r)r.hasOwnProperty(i)&&(e[i]=t(r,i)&&r[i].constructor===Object&&t(e,i)?n(e[i],r[i]):r[i]);return e}function r(){var e,t=arguments,r=t.length,i={};for(e=0;r>e;e+=1)n(i,t[e]);return i}function i(e){return r({},e)}function o(e,r,i){var o,s=t(i)?i.split("."):[],a=e;for(o=0;o<s.length;o+=1)t(a,s[o])||(a[s[o]]={}),a=a[s[o]];return n(a,r),a}function s(e,n,r){var i,o,s=n.split("."),a=!0;for(i=0;i<s.length;i+=1){if(o=s[i],!t(e,o)){a=!1;break}e=e[o]}return a?e:r}function a(e,n){return t(e)?e:n}var u=e.is;return{has:t,valueOrDefault:a,merge:r,extend:o,clone:i,get:s}}),define("scalejs/base.array",["./base.object"],function(e){function t(e,t){e.indexOf(t)<0&&e.push(t)}function n(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}function r(e){e.splice(0,e.length)}function i(e,t,n){return t=a(t,0),n=a(n,e.length),Array.prototype.slice.call(e,t,n)}function o(e,t,n){var r,i;for(r=0,i=e.length;i>r;r+=1)if(e.hasOwnProperty(r)&&t.call(n,e[r],r,e))return e[r];return null}function s(e,t,n){var r,o,s=[];for(r=e.length;r--;s[r]=e[r]);return o=i(s,t,n)}var a=e.valueOrDefault;return{addOne:t,removeOne:n,removeAll:r,copy:i,find:o,toArray:s}}),define("scalejs/base.log",[],function(){var e=["log","info","warn","error"],t={};return void 0!==window.console?("object"==typeof console.log?e.forEach(function(e){t[e]=this.bind(console[e],console)},Function.prototype.call):e.forEach(function(e){t[e]=console[e]?console[e].bind(console):console.log.bind(console)}),t.debug=t.info):(e.forEach(function(e){t[e]=function(){}}),e.debug=function(){}),t.formatException=function(e){var t=e.stack?String(e.stack):"",n=e.message||"";return"Error: "+n+"\nStack: "+t},t}),define("scalejs/base",["./base.array","./base.log","./base.object","./base.type"],function(e,t,n,r){return{type:r,object:n,array:e,log:t}}),define("scalejs/core",["./base"],function(e){function t(e){try{if(a(e,"function")){var t=e(d);return t&&(u(d,t),l(f,t)),void 0}if(a(e,"buildCore","function"))return e.buildCore(d),l(f,e),void 0;if(s(e,"core"))return u(d,e.core),l(f,e),void 0;u(d,e),l(f,e)}catch(n){c("Fatal error during application initialization. ",'Failed to build core with extension "',e,"See following exception for more details.",n)}}function n(e){if(!s(e))throw new Error("Sandbox name is required to build a sandbox.");var t={type:d.type,object:d.object,array:d.array,log:d.log};return f.forEach(function(e){try{if(a(e,"buildSandbox","function"))return e.buildSandbox(t),void 0;if(s(e,"sandbox"))return u(t,e.sandbox),void 0;u(t,e)}catch(n){throw c("Fatal error during application initialization. ",'Failed to build sandbox with extension "',e,"See following exception for more details.",n),n}}),t}function r(e){p.push(e)}function i(){h||(h=!0,p.forEach(function(e){e("started")}))}function o(){h&&(h=!1,p.forEach(function(e){e("stopped")}))}var s=e.object.has,a=e.type.is,u=e.object.extend,l=e.array.addOne,c=e.log.error,d={},f=[],p=[],h=!1;return u(d,{type:e.type,object:e.object,array:e.array,log:e.log,buildSandbox:n,notifyApplicationStarted:i,notifyApplicationStopped:o,onApplicationEvent:r,isApplicationRunning:function(){return h},registerExtension:t})}),define("scalejs/application",["scalejs!core"],function(e){function t(){if(e.isApplicationRunning())throw new Error("Can't register module since the application is already running.","Dynamic module loading is not supported.");Array.prototype.push.apply(d,u(arguments).filter(function(e){return e}))}function n(e){var t,n;if("function"==typeof e)try{t=e()}catch(r){n=e.getId?e.getId():e.name,l('Failed to create an instance of module "'+n+'".',"Application will continue running without the module. See following exception stack for more details.",r.stack)}else t=e;return a(f,t),t}function r(){d.forEach(n)}function i(){c("Application started."),e.notifyApplicationStarted()}function o(){r(),i()}function s(){c("Application exited."),e.notifyApplicationStopped()}var a=e.array.addOne,u=e.array.toArray,l=e.log.error,c=e.log.debug,d=[],f=[];return{registerModules:t,run:o,exit:s}}),function(e){function t(){this.fake=!0,this.boundary="--------FormData"+Math.random(),this._fields=[]}e.FormData||(t.prototype.append=function(e,t){this._fields.push([e,t])},t.prototype.toString=function(){var e=this.boundary,t="";return this._fields.forEach(function(n){if(t+="--"+e+"\r\n",n[1].name){var r=n[1];t+='Content-Disposition: form-data; name="'+n[0]+'"; filename="'+r.name+'"\r\n',t+="Content-Type: "+r.type+"\r\n\r\n",t+=r.getAsBinary()+"\r\n"}else t+='Content-Disposition: form-data; name="'+n[0]+'";\r\n\r\n',t+=n[1]+"\r\n"}),t+="--"+e+"--"},e.FormData=t)}(window),define("formdata",function(){}),define("scalejs.ajax-jquery/ajax",["jQuery","scalejs!core","formdata"],function(e,t){function n(n,r){var i=t.reactive.Observable,o=t.object.merge,s=t.log;return i.create(function(t){function i(e){t.onNext(e)}function a(e,r,i){s.error('Error: "'+i+": "+r+" in response to "+n+'"'),t.onError({error:i,status:r})}function u(){t.onCompleted()}var l=o({type:"GET",success:i,error:a,complete:u},r);return e.ajax(n,l),function(){}})}function r(e,r,i){return i=t.object.merge(i,{type:"GET",data:r}),n(e,i)}function i(e,r,i){var o=new FormData,s=Object.keys(r);return s.forEach(function(e){o.append(e,r[e])}),i=o.fake?t.object.merge(i,{type:"POST",data:o,contentType:"multipart/form-data; boundary="+o.boundary,processData:!1}):t.object.merge(i,{type:"POST",data:o,contentType:!1,processData:!1}),n(e,i)}function o(e,r,i){var o=JSON.stringify(r);return i=t.object.merge(i,{type:"POST",data:o,contentType:"application/json",processData:!1}),n(e,i)}function s(r,i,o){var s=e.param(i);return o=t.object.merge(o,{type:"GET",dataType:"jsonp"}),console.error("url: "+r+"?"+s),n(r+"?"+s,void 0,o)}return{postJson:o,postMultipart:i,jsonpGet:s,get:r}}),define("scalejs.ajax-jquery",["scalejs!core","./scalejs.ajax-jquery/ajax"],function(e,t){e.registerExtension({ajax:t})}),define("scalejs.functional/functional",[],function(){function e(){var e=Array.prototype.slice.call(arguments,0).reverse();return function(){var t=e.reduce(function(e,t){return[t.apply(void 0,e)]},Array.prototype.slice.call(arguments));return t[0]}}function t(){var e=Array.prototype.slice.call(arguments,0);return function(){var t=e.reduce(function(e,t){return[t.apply(void 0,e)]},Array.prototype.slice.call(arguments,0));return t[0]}}function n(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments,0)))}}function r(e,t){return function(){return e.apply(void 0,Array.prototype.slice.call(arguments,0,t))}}function i(){var e=Array.prototype.slice.call(arguments,0),t=e.reduce(function(e,t,n){return t===s?e.concat([n]):e},[]);return 0===t.length?e[0].apply(void 0,e.slice(1)):function(){var n;for(n=0;n<Math.min(t.length,arguments.length);n+=1)e[t[n]]=arguments[n];return i.apply(void 0,e)}}var o,s={};return o=function(e,t){if(1===arguments.length)return o(e,e.length);var n=Array.prototype.slice.call(arguments,2);return n.length>=t?e.apply(this,n):function(){var r=n.concat(Array.prototype.slice.call(arguments,0));return r.unshift(e,t),o.apply(this,r)}},{_:s,compose:e,sequence:t,bind:n,aritize:r,curry:o,partial:i}}),define("scalejs.functional/builder",[],function(){function e(e){var t,n,r,i;return r=function(e){if(!e||"$"!==e.kind)return e;if("function"==typeof e.expr)return e.expr.call(this);if("string"==typeof e.expr)return this[e.expr];throw new Error("Parameter in $(...) must be either a function or a string referencing a binding.")},i=function(e,i,o){function s(e){return"$return"===e||"$RETURN"===e||"$yield"===e||"$YIELD"===e}if("function"!=typeof n[e]&&"$then"!==e&&"$else"!==e)throw new Error("This control construct may only be used if the computation expression builder defines a `"+e+"` method.");var a,u=r(i);if(o.length>0&&"function"!=typeof n.combine)throw new Error("This control construct may only be used if the computation expression builder defines a `combine` method.");if(s(e)){if(0===o.length)return n[e](u);if("function"!=typeof n.delay)throw new Error("This control construct may only be used if the computation expression builder defines a `delay` method.");return n.combine(n[e](u),n.delay(function(){return t(o)}))}if("$for"===e)return n.combine(n.$for(i.items,function(e){var n=Array.prototype.slice.call(i.cexpr);return this[i.name]=e,t(n)}),t(o));if("$while"===e){if("function"!=typeof n.delay)throw new Error("This control construct may only be used if the computation expression builder defines a `delay` method.");return u=n.$while(i.condition.bind(this),n.delay(function(){var e=Array.prototype.slice.call(i.cexpr);return t(e)})),o.length>0?n.combine(u,t(o)):u}return"$then"===e||"$else"===e?(a=Array.prototype.slice.call(i.cexpr),n.combine(t(a),o)):n.combine(n[e](u),t(o))},e.missing||(e.missing=function(e){if(e.kind)throw new Error('Unknown operation "'+e.kind+'". Either define `missing` method on the builder or fix the spelling of the operation.');throw new Error("Expression "+JSON.stringify(e)+" cannot be processed. Either define `missing` method on the builder or convert expression to a function.")}),t=function(e){var o;if(e=Array.prototype.slice.call(e),0===e.length){if(n.zero)return n.zero();throw new Error("Computation expression builder must define `zero` method.")}if(o=e.shift(),"let"===o.kind)return this[o.name]=r(o.expr),t.call(this,e);if("do"===o.kind)return o.expr.call(this),t.call(this,e);if("letBind"===o.kind)return n.bind(o.expr.bind(this),function(n){return this[o.name]=n,t.call(this,e)}.bind(this));if("doBind"===o.kind||"$"===o.kind){if(e.length>0)return n.bind(o.expr.bind(this),function(){return t.call(this,e)}.bind(this));if("function"!=typeof n.$return)throw new Error("This control construct may only be used if the computation expression builder defines a `$return` method.");return n.bind(o.expr.bind(this),function(e){return n.$return(e)})}return"$return"===o.kind||"$RETURN"===o.kind||"$yield"===o.kind||"$YIELD"===o.kind?i(o.kind,o.expr,e):"$for"===o.kind||"$while"===o.kind?i(o.kind,o,e):"$if"===o.kind?o.condition.call(this)?i("$then",o.thenExpr,e):o.elseExpr?i("$else",o.elseExpr,e):i(t([]),e):"function"==typeof o&&n.call?(n.call(this),t.call(this,e)):"function"==typeof o?(o.call(this),t.call(this,e)):i("missing",o,e)},function(){function r(){var e={mixins:Array.prototype.slice.call(arguments,0)},t=o.bind(e);return t.mixin=function(){return Array.prototype.push.apply(e.mixins,arguments),t},t}var i=Array.prototype.slice.call(arguments),o=function(){var r,o,s,a=Array.prototype.slice.call(arguments,0);return n={},Object.keys(e).forEach(function(t){n[t]=e[t]}),this.mixins&&this.mixins.forEach(function(e){e.beforeBuild&&e.beforeBuild(a)}),s=function(){return t.call(this,a)},n.run||n.delay?(n.delay&&(o=s,s=function(){return n.delay(o)}),r=s(),n.run&&(r=n.run.apply(n,[r].concat(i)))):r=s(),this.mixins&&this.mixins.forEach(function(e){e.afterBuild&&(r=e.afterBuild(r))}),r};return o.mixin=r,o}}return e.$let=function(e,t){return{kind:"let",name:e,expr:t}},e.$LET=function(e,t){return{kind:"letBind",name:e,expr:t}},e.$do=function(e){return{kind:"do",expr:e}},e.$DO=function(e){return{kind:"doBind",expr:e}},e.$return=function(e){return{kind:"$return",expr:e}},e.$RETURN=function(e){return{kind:"$RETURN",expr:e}},e.$yield=function(e){return{kind:"$yield",expr:e}},e.$YIELD=function(e){return{kind:"$YIELD",expr:e}},e.$for=function(e,t){var n=Array.prototype.slice.call(arguments,2);return{kind:"$for",name:e,items:t,cexpr:n}},e.$while=function(e){if(arguments.length<2)throw new Error('Incomplete `while`. Expected "$while(<condition>, <expr>)".');var t=Array.prototype.slice.call(arguments,1);return{kind:"$while",condition:e,cexpr:t}},e.$if=function(e,t,n){if(arguments.length<2)throw new Error('Incomplete conditional. Expected "$if(<expr>, $then(expr))" or "$if(<expr>, $then(<expr>), $else(<expr>)"');if("function"!=typeof e)throw new Error("First argument must be a function that defines the condition of $if.");if("$then"!==t.kind)throw new Error('Unexpected "'+t.kind+'" in the place of "$then"');if(n&&"$else"!==n.kind)throw new Error('Unexpected "'+n.kind+'" in the place of "$else"');return{kind:"$if",condition:e,thenExpr:t,elseExpr:n}},e.$then=function(){var e=Array.prototype.slice.call(arguments,0);if(0===e.length)throw new Error("$then should contain at least one expression.");return{kind:"$then",cexpr:e}},e.$else=function(){var e=Array.prototype.slice.call(arguments,0);if(0===e.length)throw new Error("$else should contain at least one expression.");return{kind:"$else",cexpr:e}},e.$=function(e){return{kind:"$",expr:e}},e}),define("scalejs.functional/continuationBuilder",["./builder"],function(e){var t,n;return t=e({bind:function(e,t){return function(n,r){e(function(e){var i=t(e);return i(n,r)},r)}},$return:function(e){return function(t){t&&("function"==typeof e&&(e=e()),t(e))}},delay:function(e){return e},run:function(e){return function(t,n){var r=e.call(this);r.call(this,t,n)}}}),n=t().mixin({beforeBuild:function(t){t.forEach(function(n,r){"function"==typeof n&&(t[r]=e.$DO(n))})}})}),define("scalejs.functional",["scalejs!core","./scalejs.functional/functional","./scalejs.functional/builder","./scalejs.functional/continuationBuilder"],function(e,t,n,r){var i=e.object.merge;e.registerExtension({functional:i(t,{builder:n,builders:{continuation:r}})})}),function(){var e=!0;!function(t){var n=this||(0,eval)("this"),r=n.document,i=n.navigator,o=n.jQuery,s=n.JSON;!function(e){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var t=module.exports||exports;e(t)}else"function"==typeof define&&define.amd?define("knockout",["exports"],e):e(n.ko={})}(function(a){function u(e,t){var n=null===e||typeof e in p;return n?e===t:!1}function l(e){var t=this;return e&&f.utils.objectForEach(e,function(e,n){var r=f.extenders[e];"function"==typeof r&&(t=r(t,n)||t)}),t}function c(e){f.bindingHandlers[e]={init:function(t,n,r,i,o){var s=function(){var t={};return t[e]=n(),t};return f.bindingHandlers.event.init.call(this,t,s,r,i,o)}}}function d(e,t,n,r){f.bindingHandlers[e]={init:function(e){return f.utils.domData.set(e,C,{}),{controlsDescendantBindings:!0}},update:function(e,i,o,s,a){var u=f.utils.domData.get(e,C),l=f.utils.unwrapObservable(i()),c=!n!=!l,d=!u.savedNodes,p=d||t||c!==u.didDisplayOnLastUpdate;p&&(d&&(u.savedNodes=f.utils.cloneNodes(f.virtualElements.childNodes(e),!0)),c?(d||f.virtualElements.setDomNodeChildren(e,f.utils.cloneNodes(u.savedNodes)),f.applyBindingsToDescendants(r?r(a,l):a,e)):f.virtualElements.emptyNode(e),u.didDisplayOnLastUpdate=c)}},f.expressionRewriting.bindingRewriteValidators[e]=!1,f.virtualElements.allowedBindings[e]=!0}var f="undefined"!=typeof a?a:{};f.exportSymbol=function(e,t){for(var n=e.split("."),r=f,i=0;i<n.length-1;i++)r=r[n[i]];r[n[n.length-1]]=t},f.exportProperty=function(e,t,n){e[t]=n},f.version="3.0.0",f.exportSymbol("version",f.version),f.utils=function(){function e(e,t){if("input"!==f.utils.tagNameLower(e)||!e.type)return!1;if("click"!=t.toLowerCase())return!1;var n=e.type;return"checkbox"==n||"radio"==n}var a=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])},u={},l={},c=i&&/Firefox\/2/i.test(i.userAgent)?"KeyboardEvent":"UIEvents";u[c]=["keyup","keydown","keypress"],u.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],a(u,function(e,t){if(t.length)for(var n=0,r=t.length;r>n;n++)l[t[n]]=e});var d={propertychange:!0},p=r&&function(){for(var e=3,n=r.createElement("div"),i=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",i[0];);return e>4?e:t}(),h=6===p,v=7===p;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n])},arrayIndexOf:function(e,t){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(e,t);for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},arrayFirst:function(e,t,n){for(var r=0,i=e.length;i>r;r++)if(t.call(n,e[r]))return e[r];return null},arrayRemoveItem:function(e,t){var n=f.utils.arrayIndexOf(e,t);n>=0&&e.splice(n,1)},arrayGetDistinctValues:function(e){e=e||[];for(var t=[],n=0,r=e.length;r>n;n++)f.utils.arrayIndexOf(t,e[n])<0&&t.push(e[n]);return t},arrayMap:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;i>r;r++)n.push(t(e[r]));return n},arrayFilter:function(e,t){e=e||[];for(var n=[],r=0,i=e.length;i>r;r++)t(e[r])&&n.push(e[r]);return n},arrayPushAll:function(e,t){if(t instanceof Array)e.push.apply(e,t);else for(var n=0,r=t.length;r>n;n++)e.push(t[n]);return e},addOrRemoveItem:function(e,t,n){var r=f.utils.arrayIndexOf(f.utils.peekObservable(e),t);0>r?n&&e.push(t):n||e.splice(r,1)},extend:function(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},objectForEach:a,objectMap:function(e,t){if(!e)return e;var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},emptyDomNode:function(e){for(;e.firstChild;)f.removeNode(e.firstChild)},moveCleanedNodesToContainerElement:function(e){for(var t=f.utils.makeArray(e),n=r.createElement("div"),i=0,o=t.length;o>i;i++)n.appendChild(f.cleanNode(t[i]));return n},cloneNodes:function(e,t){for(var n=0,r=e.length,i=[];r>n;n++){var o=e[n].cloneNode(!0);i.push(t?f.cleanNode(o):o)}return i},setDomNodeChildren:function(e,t){if(f.utils.emptyDomNode(e),t)for(var n=0,r=t.length;r>n;n++)e.appendChild(t[n])},replaceDomNodes:function(e,t){var n=e.nodeType?[e]:e;if(n.length>0){for(var r=n[0],i=r.parentNode,o=0,s=t.length;s>o;o++)i.insertBefore(t[o],r);for(var o=0,s=n.length;s>o;o++)f.removeNode(n[o])}},fixUpContinuousNodeArray:function(e,t){if(e.length){for(t=8===t.nodeType&&t.parentNode||t;e.length&&e[0].parentNode!==t;)e.splice(0,1);if(e.length>1){var n=e[0],r=e[e.length-1];for(e.length=0;n!==r;)if(e.push(n),n=n.nextSibling,!n)return;e.push(r)}}return e},setOptionNodeSelectionState:function(e,t){7>p?e.setAttribute("selected",t):e.selected=t},stringTrim:function(e){return null===e||e===t?"":e.trim?e.trim():e.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(e,t){for(var n=[],r=(e||"").split(t),i=0,o=r.length;o>i;i++){var s=f.utils.stringTrim(r[i]);""!==s&&n.push(s)}return n},stringStartsWith:function(e,t){return e=e||"",t.length>e.length?!1:e.substring(0,t.length)===t},domNodeIsContainedBy:function(e,t){if(e===t)return!0;if(11===e.nodeType)return!1;if(t.contains)return t.contains(3===e.nodeType?e.parentNode:e);if(t.compareDocumentPosition)return 16==(16&t.compareDocumentPosition(e));for(;e&&e!=t;)e=e.parentNode;return!!e},domNodeIsAttachedToDocument:function(e){return f.utils.domNodeIsContainedBy(e,e.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(e){return!!f.utils.arrayFirst(e,f.utils.domNodeIsAttachedToDocument)},tagNameLower:function(e){return e&&e.tagName&&e.tagName.toLowerCase()},registerEventHandler:function(t,n,r){var i=p&&d[n];if(i||"undefined"==typeof o)if(i||"function"!=typeof t.addEventListener){if("undefined"==typeof t.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var s=function(e){r.call(t,e)},a="on"+n;t.attachEvent(a,s),f.utils.domNodeDisposal.addDisposeCallback(t,function(){t.detachEvent(a,s)})}else t.addEventListener(n,r,!1);else{if(e(t,n)){var u=r;r=function(e,t){var n=this.checked;t&&(this.checked=t.checkedStateBeforeEvent!==!0),u.call(this,e),this.checked=n}}o(t).bind(n,r)}},triggerEvent:function(t,i){if(!t||!t.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");if("undefined"!=typeof o){var s=[];e(t,i)&&s.push({checkedStateBeforeEvent:t.checked}),o(t).trigger(i,s)}else if("function"==typeof r.createEvent){if("function"!=typeof t.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var a=l[i]||"HTMLEvents",u=r.createEvent(a);u.initEvent(i,!0,!0,n,0,0,0,0,0,!1,!1,!1,!1,0,t),t.dispatchEvent(u)}else{if("undefined"==typeof t.fireEvent)throw new Error("Browser doesn't support triggering events");e(t,i)&&(t.checked=t.checked!==!0),t.fireEvent("on"+i)}},unwrapObservable:function(e){return f.isObservable(e)?e():e},peekObservable:function(e){return f.isObservable(e)?e.peek():e},toggleDomNodeCssClass:function(e,t,n){if(t){var r=/\S+/g,i=e.className.match(r)||[];f.utils.arrayForEach(t.match(r),function(e){f.utils.addOrRemoveItem(i,e,n)}),e.className=i.join(" ")}},setTextContent:function(e,n){var i=f.utils.unwrapObservable(n);(null===i||i===t)&&(i="");var o=f.virtualElements.firstChild(e);!o||3!=o.nodeType||f.virtualElements.nextSibling(o)?f.virtualElements.setDomNodeChildren(e,[r.createTextNode(i)]):o.data=i,f.utils.forceRefresh(e)},setElementName:function(e,t){if(e.name=t,7>=p)try{e.mergeAttributes(r.createElement("<input name='"+e.name+"'/>"),!1)}catch(n){}},forceRefresh:function(e){if(p>=9){var t=1==e.nodeType?e:e.parentNode;t.style&&(t.style.zoom=t.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(e){if(p){var t=e.style.width;e.style.width=0,e.style.width=t}},range:function(e,t){e=f.utils.unwrapObservable(e),t=f.utils.unwrapObservable(t);for(var n=[],r=e;t>=r;r++)n.push(r);return n},makeArray:function(e){for(var t=[],n=0,r=e.length;r>n;n++)t.push(e[n]);return t},isIe6:h,isIe7:v,ieVersion:p,getFormFields:function(e,t){for(var n=f.utils.makeArray(e.getElementsByTagName("input")).concat(f.utils.makeArray(e.getElementsByTagName("textarea"))),r="string"==typeof t?function(e){return e.name===t}:function(e){return t.test(e.name)},i=[],o=n.length-1;o>=0;o--)r(n[o])&&i.push(n[o]);return i},parseJson:function(e){return"string"==typeof e&&(e=f.utils.stringTrim(e))?s&&s.parse?s.parse(e):new Function("return "+e)():null},stringifyJson:function(e,t,n){if(!s||!s.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return s.stringify(f.utils.unwrapObservable(e),t,n)},postJson:function(e,t,n){n=n||{};var i=n.params||{},o=n.includeFields||this.fieldsIncludedWithJsonPost,s=e;if("object"==typeof e&&"form"===f.utils.tagNameLower(e)){var u=e;s=u.action;for(var l=o.length-1;l>=0;l--)for(var c=f.utils.getFormFields(u,o[l]),d=c.length-1;d>=0;d--)i[c[d].name]=c[d].value}t=f.utils.unwrapObservable(t);var p=r.createElement("form");p.style.display="none",p.action=s,p.method="post";for(var h in t){var v=r.createElement("input");v.name=h,v.value=f.utils.stringifyJson(f.utils.unwrapObservable(t[h])),p.appendChild(v)}a(i,function(e,t){var n=r.createElement("input");n.name=e,n.value=t,p.appendChild(n)}),r.body.appendChild(p),n.submitter?n.submitter(p):p.submit(),setTimeout(function(){p.parentNode.removeChild(p)},0)}}}(),f.exportSymbol("utils",f.utils),f.exportSymbol("utils.arrayForEach",f.utils.arrayForEach),f.exportSymbol("utils.arrayFirst",f.utils.arrayFirst),f.exportSymbol("utils.arrayFilter",f.utils.arrayFilter),f.exportSymbol("utils.arrayGetDistinctValues",f.utils.arrayGetDistinctValues),f.exportSymbol("utils.arrayIndexOf",f.utils.arrayIndexOf),f.exportSymbol("utils.arrayMap",f.utils.arrayMap),f.exportSymbol("utils.arrayPushAll",f.utils.arrayPushAll),f.exportSymbol("utils.arrayRemoveItem",f.utils.arrayRemoveItem),f.exportSymbol("utils.extend",f.utils.extend),f.exportSymbol("utils.fieldsIncludedWithJsonPost",f.utils.fieldsIncludedWithJsonPost),f.exportSymbol("utils.getFormFields",f.utils.getFormFields),f.exportSymbol("utils.peekObservable",f.utils.peekObservable),f.exportSymbol("utils.postJson",f.utils.postJson),f.exportSymbol("utils.parseJson",f.utils.parseJson),f.exportSymbol("utils.registerEventHandler",f.utils.registerEventHandler),f.exportSymbol("utils.stringifyJson",f.utils.stringifyJson),f.exportSymbol("utils.range",f.utils.range),f.exportSymbol("utils.toggleDomNodeCssClass",f.utils.toggleDomNodeCssClass),f.exportSymbol("utils.triggerEvent",f.utils.triggerEvent),f.exportSymbol("utils.unwrapObservable",f.utils.unwrapObservable),f.exportSymbol("utils.objectForEach",f.utils.objectForEach),f.exportSymbol("utils.addOrRemoveItem",f.utils.addOrRemoveItem),f.exportSymbol("unwrap",f.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments),e=n.shift();return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}}),f.utils.domData=new function(){function e(e,o){var s=e[r],a=s&&"null"!==s&&i[s];if(!a){if(!o)return t;s=e[r]="ko"+n++,i[s]={}}return i[s]}var n=0,r="__ko__"+(new Date).getTime(),i={};return{get:function(n,r){var i=e(n,!1);return i===t?t:i[r]},set:function(n,r,i){if(i!==t||e(n,!1)!==t){var o=e(n,!0);o[r]=i}},clear:function(e){var t=e[r];return t?(delete i[t],e[r]=null,!0):!1},nextKey:function(){return n++ +r}}},f.exportSymbol("utils.domData",f.utils.domData),f.exportSymbol("utils.domData.clear",f.utils.domData.clear),f.utils.domNodeDisposal=new function(){function e(e,n){var r=f.utils.domData.get(e,s);return r===t&&n&&(r=[],f.utils.domData.set(e,s,r)),r}function n(e){f.utils.domData.set(e,s,t)}function r(t){var n=e(t,!1);if(n){n=n.slice(0);for(var r=0;r<n.length;r++)n[r](t)}f.utils.domData.clear(t),"function"==typeof o&&"function"==typeof o.cleanData&&o.cleanData([t]),u[t.nodeType]&&i(t)}function i(e){for(var t,n=e.firstChild;t=n;)n=t.nextSibling,8===t.nodeType&&r(t)}var s=f.utils.domData.nextKey(),a={1:!0,8:!0,9:!0},u={1:!0,9:!0};return{addDisposeCallback:function(t,n){if("function"!=typeof n)throw new Error("Callback must be a function");e(t,!0).push(n)},removeDisposeCallback:function(t,r){var i=e(t,!1);i&&(f.utils.arrayRemoveItem(i,r),0==i.length&&n(t))},cleanNode:function(e){if(a[e.nodeType]&&(r(e),u[e.nodeType])){var t=[];f.utils.arrayPushAll(t,e.getElementsByTagName("*"));for(var n=0,i=t.length;i>n;n++)r(t[n])}return e},removeNode:function(e){f.cleanNode(e),e.parentNode&&e.parentNode.removeChild(e)}}},f.cleanNode=f.utils.domNodeDisposal.cleanNode,f.removeNode=f.utils.domNodeDisposal.removeNode,f.exportSymbol("cleanNode",f.cleanNode),f.exportSymbol("removeNode",f.removeNode),f.exportSymbol("utils.domNodeDisposal",f.utils.domNodeDisposal),f.exportSymbol("utils.domNodeDisposal.addDisposeCallback",f.utils.domNodeDisposal.addDisposeCallback),f.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",f.utils.domNodeDisposal.removeDisposeCallback),function(){function e(e){var t=f.utils.stringTrim(e).toLowerCase(),i=r.createElement("div"),o=t.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!t.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!t.indexOf("<td")||!t.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],s="ignored<div>"+o[1]+e+o[2]+"</div>";for("function"==typeof n.innerShiv?i.appendChild(n.innerShiv(s)):i.innerHTML=s;o[0]--;)i=i.lastChild;return f.utils.makeArray(i.lastChild.childNodes)}function i(e){if(o.parseHTML)return o.parseHTML(e)||[];var t=o.clean([e]);if(t&&t[0]){for(var n=t[0];n.parentNode&&11!==n.parentNode.nodeType;)n=n.parentNode;n.parentNode&&n.parentNode.removeChild(n)}return t}f.utils.parseHtmlFragment=function(t){return"undefined"!=typeof o?i(t):e(t)},f.utils.setHtml=function(e,n){if(f.utils.emptyDomNode(e),n=f.utils.unwrapObservable(n),null!==n&&n!==t)if("string"!=typeof n&&(n=n.toString()),"undefined"!=typeof o)o(e).html(n);
else for(var r=f.utils.parseHtmlFragment(n),i=0;i<r.length;i++)e.appendChild(r[i])}}(),f.exportSymbol("utils.parseHtmlFragment",f.utils.parseHtmlFragment),f.exportSymbol("utils.setHtml",f.utils.setHtml),f.memoization=function(){function e(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function n(){return e()+e()}function r(e,t){if(e)if(8==e.nodeType){var n=f.memoization.parseMemoText(e.nodeValue);null!=n&&t.push({domNode:e,memoId:n})}else if(1==e.nodeType)for(var i=0,o=e.childNodes,s=o.length;s>i;i++)r(o[i],t)}var i={};return{memoize:function(e){if("function"!=typeof e)throw new Error("You can only pass a function to ko.memoization.memoize()");var t=n();return i[t]=e,"<!--[ko_memo:"+t+"]-->"},unmemoize:function(e,n){var r=i[e];if(r===t)throw new Error("Couldn't find any memo with ID "+e+". Perhaps it's already been unmemoized.");try{return r.apply(null,n||[]),!0}finally{delete i[e]}},unmemoizeDomNodeAndDescendants:function(e,t){var n=[];r(e,n);for(var i=0,o=n.length;o>i;i++){var s=n[i].domNode,a=[s];t&&f.utils.arrayPushAll(a,t),f.memoization.unmemoize(n[i].memoId,a),s.nodeValue="",s.parentNode&&s.parentNode.removeChild(s)}},parseMemoText:function(e){var t=e.match(/^\[ko_memo\:(.*?)\]$/);return t?t[1]:null}}}(),f.exportSymbol("memoization",f.memoization),f.exportSymbol("memoization.memoize",f.memoization.memoize),f.exportSymbol("memoization.unmemoize",f.memoization.unmemoize),f.exportSymbol("memoization.parseMemoText",f.memoization.parseMemoText),f.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",f.memoization.unmemoizeDomNodeAndDescendants),f.extenders={throttle:function(e,t){e.throttleEvaluation=t;var n=null;return f.dependentObservable({read:e,write:function(r){clearTimeout(n),n=setTimeout(function(){e(r)},t)}})},notify:function(e,t){e.equalityComparer="always"==t?null:u}};var p={undefined:1,"boolean":1,number:1,string:1};f.exportSymbol("extenders",f.extenders),f.subscription=function(e,t,n){this.target=e,this.callback=t,this.disposeCallback=n,f.exportProperty(this,"dispose",this.dispose)},f.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},f.subscribable=function(){this._subscriptions={},f.utils.extend(this,f.subscribable.fn),f.exportProperty(this,"subscribe",this.subscribe),f.exportProperty(this,"extend",this.extend),f.exportProperty(this,"getSubscriptionsCount",this.getSubscriptionsCount)};var h="change";f.subscribable.fn={subscribe:function(e,t,n){n=n||h;var r=t?e.bind(t):e,i=new f.subscription(this,r,function(){f.utils.arrayRemoveItem(this._subscriptions[n],i)}.bind(this));return this._subscriptions[n]||(this._subscriptions[n]=[]),this._subscriptions[n].push(i),i},notifySubscribers:function(e,t){if(t=t||h,this.hasSubscriptionsForEvent(t))try{f.dependencyDetection.begin();for(var n,r=this._subscriptions[t].slice(0),i=0;n=r[i];++i)n&&n.isDisposed!==!0&&n.callback(e)}finally{f.dependencyDetection.end()}},hasSubscriptionsForEvent:function(e){return this._subscriptions[e]&&this._subscriptions[e].length},getSubscriptionsCount:function(){var e=0;return f.utils.objectForEach(this._subscriptions,function(t,n){e+=n.length}),e},extend:l},f.isSubscribable=function(e){return null!=e&&"function"==typeof e.subscribe&&"function"==typeof e.notifySubscribers},f.exportSymbol("subscribable",f.subscribable),f.exportSymbol("isSubscribable",f.isSubscribable),f.dependencyDetection=function(){var e=[];return{begin:function(t){e.push(t&&{callback:t,distinctDependencies:[]})},end:function(){e.pop()},registerDependency:function(t){if(!f.isSubscribable(t))throw new Error("Only subscribable things can act as dependencies");if(e.length>0){var n=e[e.length-1];if(!n||f.utils.arrayIndexOf(n.distinctDependencies,t)>=0)return;n.distinctDependencies.push(t),n.callback(t)}},ignore:function(t,n,r){try{return e.push(null),t.apply(n,r||[])}finally{e.pop()}}}}(),f.observable=function(t){function n(){return arguments.length>0?(n.equalityComparer&&n.equalityComparer(r,arguments[0])||(n.valueWillMutate(),r=arguments[0],e&&(n._latestValue=r),n.valueHasMutated()),this):(f.dependencyDetection.registerDependency(n),r)}var r=t;return e&&(n._latestValue=r),f.subscribable.call(n),n.peek=function(){return r},n.valueHasMutated=function(){n.notifySubscribers(r)},n.valueWillMutate=function(){n.notifySubscribers(r,"beforeChange")},f.utils.extend(n,f.observable.fn),f.exportProperty(n,"peek",n.peek),f.exportProperty(n,"valueHasMutated",n.valueHasMutated),f.exportProperty(n,"valueWillMutate",n.valueWillMutate),n},f.observable.fn={equalityComparer:u};var v=f.observable.protoProperty="__ko_proto__";f.observable.fn[v]=f.observable,f.hasPrototype=function(e,n){return null===e||e===t||e[v]===t?!1:e[v]===n?!0:f.hasPrototype(e[v],n)},f.isObservable=function(e){return f.hasPrototype(e,f.observable)},f.isWriteableObservable=function(e){return"function"==typeof e&&e[v]===f.observable?!0:"function"==typeof e&&e[v]===f.dependentObservable&&e.hasWriteFunction?!0:!1},f.exportSymbol("observable",f.observable),f.exportSymbol("isObservable",f.isObservable),f.exportSymbol("isWriteableObservable",f.isWriteableObservable),f.observableArray=function(e){if(e=e||[],"object"!=typeof e||!("length"in e))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var t=f.observable(e);return f.utils.extend(t,f.observableArray.fn),t.extend({trackArrayChanges:!0})},f.observableArray.fn={remove:function(e){for(var t=this.peek(),n=[],r="function"!=typeof e||f.isObservable(e)?function(t){return t===e}:e,i=0;i<t.length;i++){var o=t[i];r(o)&&(0===n.length&&this.valueWillMutate(),n.push(o),t.splice(i,1),i--)}return n.length&&this.valueHasMutated(),n},removeAll:function(e){if(e===t){var n=this.peek(),r=n.slice(0);return this.valueWillMutate(),n.splice(0,n.length),this.valueHasMutated(),r}return e?this.remove(function(t){return f.utils.arrayIndexOf(e,t)>=0}):[]},destroy:function(e){var t=this.peek(),n="function"!=typeof e||f.isObservable(e)?function(t){return t===e}:e;this.valueWillMutate();for(var r=t.length-1;r>=0;r--){var i=t[r];n(i)&&(t[r]._destroy=!0)}this.valueHasMutated()},destroyAll:function(e){return e===t?this.destroy(function(){return!0}):e?this.destroy(function(t){return f.utils.arrayIndexOf(e,t)>=0}):[]},indexOf:function(e){var t=this();return f.utils.arrayIndexOf(t,e)},replace:function(e,t){var n=this.indexOf(e);n>=0&&(this.valueWillMutate(),this.peek()[n]=t,this.valueHasMutated())}},f.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(e){f.observableArray.fn[e]=function(){var t=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(t,e,arguments);var n=t[e].apply(t,arguments);return this.valueHasMutated(),n}}),f.utils.arrayForEach(["slice"],function(e){f.observableArray.fn[e]=function(){var t=this();return t[e].apply(t,arguments)}}),f.exportSymbol("observableArray",f.observableArray);var m="arrayChange";f.extenders.trackArrayChanges=function(e){function t(){if(!r){r=!0;var t=e.notifySubscribers;e.notifySubscribers=function(e,n){return n&&n!==h||++o,t.apply(this,arguments)};var s=[].concat(e.peek()||[]);i=null,e.subscribe(function(t){if(t=[].concat(t||[]),e.hasSubscriptionsForEvent(m)){var r=n(s,t);r.length&&e.notifySubscribers(r,m)}s=t,i=null,o=0})}}function n(e,t){return(!i||o>1)&&(i=f.utils.compareArrays(e,t,{sparse:!0})),i}if(!e.cacheDiffForKnownOperation){var r=!1,i=null,o=0,s=e.subscribe;e.subscribe=e.subscribe=function(e,n,r){return r===m&&t(),s.apply(this,arguments)},e.cacheDiffForKnownOperation=function(e,t,n){function s(e,t,n){a.push({status:e,value:t,index:n})}if(r&&!o){var a=[],u=e.length,l=n.length,c=0;switch(t){case"push":c=u;case"unshift":for(var d=0;l>d;d++)s("added",n[d],c+d);break;case"pop":c=u-1;case"shift":u&&s("deleted",e[c],c);break;case"splice":for(var f=Math.min(Math.max(0,n[0]<0?u+n[0]:n[0]),u),p=1===l?u:Math.min(f+(n[1]||0),u),h=f+l-2,v=Math.max(p,h),d=f,m=2;v>d;++d,++m)p>d&&s("deleted",e[d],d),h>d&&s("added",n[m],d);break;default:return}i=a}}}},f.dependentObservable=function(n,r,i){function o(e){E.push(e.subscribe(a))}function s(){f.utils.arrayForEach(E,function(e){e.dispose()}),E=[]}function a(){var e=l.throttleEvaluation;e&&e>=0?(clearTimeout(S),S=setTimeout(u,e)):u()}function u(){if(!v){if(x&&x()){if(!m)return C(),h=!0,void 0}else m=!1;v=!0;try{var n=f.utils.arrayMap(E,function(e){return e.target});f.dependencyDetection.begin(function(e){var r;(r=f.utils.arrayIndexOf(n,e))>=0?n[r]=t:o(e)});for(var i=r?g.call(r):g(),s=n.length-1;s>=0;s--)n[s]&&E.splice(s,1)[0].dispose();h=!0,l.equalityComparer&&l.equalityComparer(p,i)||(l.notifySubscribers(p,"beforeChange"),p=i,e&&(l._latestValue=p),l.notifySubscribers(p))}finally{f.dependencyDetection.end(),v=!1}E.length||C()}}function l(){if(arguments.length>0){if("function"!=typeof b)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return b.apply(r,arguments),this}return h||u(),f.dependencyDetection.registerDependency(l),p}function c(){return h||u(),p}function d(){return!h||E.length>0}var p,h=!1,v=!1,m=!1,g=n;if(g&&"object"==typeof g?(i=g,g=i.read):(i=i||{},g||(g=i.read)),"function"!=typeof g)throw new Error("Pass a function that returns the value of the ko.computed");var b=i.write,y=i.disposeWhenNodeIsRemoved||i.disposeWhenNodeIsRemoved||null,w=i.disposeWhen||i.disposeWhen,x=w,C=s,E=[],S=null;return r||(r=i.owner),l.peek=c,l.getDependenciesCount=function(){return E.length},l.hasWriteFunction="function"==typeof i.write,l.dispose=function(){C()},l.isActive=d,f.subscribable.call(l),f.utils.extend(l,f.dependentObservable.fn),f.exportProperty(l,"peek",l.peek),f.exportProperty(l,"dispose",l.dispose),f.exportProperty(l,"isActive",l.isActive),f.exportProperty(l,"getDependenciesCount",l.getDependenciesCount),y&&(m=!0,y.nodeType&&(x=function(){return!f.utils.domNodeIsAttachedToDocument(y)||w&&w()})),i.deferEvaluation!==!0&&u(),y&&d()&&(C=function(){f.utils.domNodeDisposal.removeDisposeCallback(y,C),s()},f.utils.domNodeDisposal.addDisposeCallback(y,C)),l},f.isComputed=function(e){return f.hasPrototype(e,f.dependentObservable)};var g=f.observable.protoProperty;f.dependentObservable[g]=f.observable,f.dependentObservable.fn={equalityComparer:u},f.dependentObservable.fn[g]=f.dependentObservable,f.exportSymbol("dependentObservable",f.dependentObservable),f.exportSymbol("computed",f.dependentObservable),f.exportSymbol("isComputed",f.isComputed),function(){function e(i,o,s){s=s||new r,i=o(i);var a=!("object"!=typeof i||null===i||i===t||i instanceof Date||i instanceof String||i instanceof Number||i instanceof Boolean);if(!a)return i;var u=i instanceof Array?[]:{};return s.save(i,u),n(i,function(n){var r=o(i[n]);switch(typeof r){case"boolean":case"number":case"string":case"function":u[n]=r;break;case"object":case"undefined":var a=s.get(r);u[n]=a!==t?a:e(r,o,s)}}),u}function n(e,t){if(e instanceof Array){for(var n=0;n<e.length;n++)t(n);"function"==typeof e.toJSON&&t("toJSON")}else for(var r in e)t(r)}function r(){this.keys=[],this.values=[]}var i=10;f.toJS=function(t){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return e(t,function(e){for(var t=0;f.isObservable(e)&&i>t;t++)e=e();return e})},f.toJSON=function(e,t,n){var r=f.toJS(e);return f.utils.stringifyJson(r,t,n)},r.prototype={constructor:r,save:function(e,t){var n=f.utils.arrayIndexOf(this.keys,e);n>=0?this.values[n]=t:(this.keys.push(e),this.values.push(t))},get:function(e){var n=f.utils.arrayIndexOf(this.keys,e);return n>=0?this.values[n]:t}}}(),f.exportSymbol("toJS",f.toJS),f.exportSymbol("toJSON",f.toJSON),function(){var e="__ko__hasDomDataOptionValue__";f.selectExtensions={readValue:function(n){switch(f.utils.tagNameLower(n)){case"option":return n[e]===!0?f.utils.domData.get(n,f.bindingHandlers.options.optionValueDomDataKey):f.utils.ieVersion<=7?n.getAttributeNode("value")&&n.getAttributeNode("value").specified?n.value:n.text:n.value;case"select":return n.selectedIndex>=0?f.selectExtensions.readValue(n.options[n.selectedIndex]):t;default:return n.value}},writeValue:function(n,r){switch(f.utils.tagNameLower(n)){case"option":switch(typeof r){case"string":f.utils.domData.set(n,f.bindingHandlers.options.optionValueDomDataKey,t),e in n&&delete n[e],n.value=r;break;default:f.utils.domData.set(n,f.bindingHandlers.options.optionValueDomDataKey,r),n[e]=!0,n.value="number"==typeof r?r:""}break;case"select":""===r&&(r=t),(null===r||r===t)&&(n.selectedIndex=-1);for(var i=n.options.length-1;i>=0;i--)if(f.selectExtensions.readValue(n.options[i])==r){n.selectedIndex=i;break}n.size>1||-1!==n.selectedIndex||(n.selectedIndex=0);break;default:(null===r||r===t)&&(r=""),n.value=r}}}}(),f.exportSymbol("selectExtensions",f.selectExtensions),f.exportSymbol("selectExtensions.readValue",f.selectExtensions.readValue),f.exportSymbol("selectExtensions.writeValue",f.selectExtensions.writeValue),f.expressionRewriting=function(){function e(e){if(f.utils.arrayIndexOf(r,e)>=0)return!1;var t=e.match(i);return null===t?!1:t[1]?"Object("+t[1]+")"+t[2]:e}function t(e){var t=f.utils.stringTrim(e);123===t.charCodeAt(0)&&(t=t.slice(1,-1));var n,r,i=[],o=t.match(d),s=0;if(o){o.push(",");for(var a,u=0;a=o[u];++u){var l=a.charCodeAt(0);if(44===l){if(0>=s){n&&i.push(r?{key:n,value:r.join("")}:{unknown:n}),n=r=s=0;continue}}else if(58===l){if(!r)continue}else if(47===l&&u&&a.length>1){var c=o[u-1].match(p);c&&!h[c[0]]&&(t=t.substr(t.indexOf(a)+1),o=t.match(d),o.push(","),u=-1,a="/")}else if(40===l||123===l||91===l)++s;else if(41===l||125===l||93===l)--s;else if(!n&&!r){n=34===l||39===l?a.slice(1,-1):a;continue}r?r.push(a):r=[a]}}return i}function n(n,r){function i(t,n){function r(e){return e&&e.preprocess?n=e.preprocess(n,t,i):!0}var u;r(f.getBindingHandler(t))&&(v[t]&&(u=e(n))&&s.push("'"+t+"':function(_z){"+u+"=_z}"),a&&(n="function(){return "+n+" }"),o.push("'"+t+"':"+n))}r=r||{};var o=[],s=[],a=r.valueAccessors,u="string"==typeof n?t(n):n;return f.utils.arrayForEach(u,function(e){i(e.key||e.unknown,e.value)}),s.length&&i("_ko_property_writers","{"+s.join(",")+"}"),o.join(",")}var r=["true","false","null","undefined"],i=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,o='"(?:[^"\\\\]|\\\\.)*"',s="'(?:[^'\\\\]|\\\\.)*'",a="/(?:[^/\\\\]|\\\\.)*/w*",u=",\"'{}()/:[\\]",l="[^\\s:,/][^"+u+"]*[^\\s"+u+"]",c="[^\\s]",d=RegExp(o+"|"+s+"|"+a+"|"+l+"|"+c,"g"),p=/[\])"'A-Za-z0-9_$]+$/,h={"in":1,"return":1,"typeof":1},v={};return{bindingRewriteValidators:[],twoWayBindings:v,parseObjectLiteral:t,preProcessBindings:n,keyValueArrayContainsKey:function(e,t){for(var n=0;n<e.length;n++)if(e[n].key==t)return!0;return!1},writeValueToProperty:function(e,t,n,r,i){if(e&&f.isObservable(e))!f.isWriteableObservable(e)||i&&e.peek()===r||e(r);else{var o=t.get("_ko_property_writers");o&&o[n]&&o[n](r)}}}}(),f.exportSymbol("expressionRewriting",f.expressionRewriting),f.exportSymbol("expressionRewriting.bindingRewriteValidators",f.expressionRewriting.bindingRewriteValidators),f.exportSymbol("expressionRewriting.parseObjectLiteral",f.expressionRewriting.parseObjectLiteral),f.exportSymbol("expressionRewriting.preProcessBindings",f.expressionRewriting.preProcessBindings),f.exportSymbol("expressionRewriting._twoWayBindings",f.expressionRewriting.twoWayBindings),f.exportSymbol("jsonExpressionRewriting",f.expressionRewriting),f.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",f.expressionRewriting.preProcessBindings),function(){function e(e){return 8==e.nodeType&&a.test(s?e.text:e.nodeValue)}function t(e){return 8==e.nodeType&&u.test(s?e.text:e.nodeValue)}function n(n,r){for(var i=n,o=1,s=[];i=i.nextSibling;){if(t(i)&&(o--,0===o))return s;s.push(i),e(i)&&o++}if(!r)throw new Error("Cannot find closing comment tag to match: "+n.nodeValue);return null}function i(e,t){var r=n(e,t);return r?r.length>0?r[r.length-1].nextSibling:e.nextSibling:null}function o(n){var r=n.firstChild,o=null;if(r)do if(o)o.push(r);else if(e(r)){var s=i(r,!0);s?r=s:o=[r]}else t(r)&&(o=[r]);while(r=r.nextSibling);return o}var s=r&&"<!--test-->"===r.createComment("test").text,a=s?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,u=s?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,l={ul:!0,ol:!0};f.virtualElements={allowedBindings:{},childNodes:function(t){return e(t)?n(t):t.childNodes},emptyNode:function(t){if(e(t))for(var n=f.virtualElements.childNodes(t),r=0,i=n.length;i>r;r++)f.removeNode(n[r]);else f.utils.emptyDomNode(t)},setDomNodeChildren:function(t,n){if(e(t)){f.virtualElements.emptyNode(t);for(var r=t.nextSibling,i=0,o=n.length;o>i;i++)r.parentNode.insertBefore(n[i],r)}else f.utils.setDomNodeChildren(t,n)},prepend:function(t,n){e(t)?t.parentNode.insertBefore(n,t.nextSibling):t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)},insertAfter:function(t,n,r){r?e(t)?t.parentNode.insertBefore(n,r.nextSibling):r.nextSibling?t.insertBefore(n,r.nextSibling):t.appendChild(n):f.virtualElements.prepend(t,n)},firstChild:function(n){return e(n)?!n.nextSibling||t(n.nextSibling)?null:n.nextSibling:n.firstChild},nextSibling:function(n){return e(n)&&(n=i(n)),n.nextSibling&&t(n.nextSibling)?null:n.nextSibling},hasBindingValue:e,virtualNodeBindingValue:function(e){var t=(s?e.text:e.nodeValue).match(a);return t?t[1]:null},normaliseVirtualElementDomStructure:function(e){if(l[f.utils.tagNameLower(e)]){var t=e.firstChild;if(t)do if(1===t.nodeType){var n=o(t);if(n)for(var r=t.nextSibling,i=0;i<n.length;i++)r?e.insertBefore(n[i],r):e.appendChild(n[i])}while(t=t.nextSibling)}}}}(),f.exportSymbol("virtualElements",f.virtualElements),f.exportSymbol("virtualElements.allowedBindings",f.virtualElements.allowedBindings),f.exportSymbol("virtualElements.emptyNode",f.virtualElements.emptyNode),f.exportSymbol("virtualElements.insertAfter",f.virtualElements.insertAfter),f.exportSymbol("virtualElements.prepend",f.virtualElements.prepend),f.exportSymbol("virtualElements.setDomNodeChildren",f.virtualElements.setDomNodeChildren),function(){function e(e,n,r){var i=e+(r&&r.valueAccessors||"");return n[i]||(n[i]=t(e,r))}function t(e,t){var n=f.expressionRewriting.preProcessBindings(e,t),r="with($context){with($data||{}){return{"+n+"}}}";return new Function("$context","$element",r)}var n="data-bind";f.bindingProvider=function(){this.bindingCache={}},f.utils.extend(f.bindingProvider.prototype,{nodeHasBindings:function(e){switch(e.nodeType){case 1:return null!=e.getAttribute(n);case 8:return f.virtualElements.hasBindingValue(e);default:return!1}},getBindings:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e):null},getBindingAccessors:function(e,t){var n=this.getBindingsString(e,t);return n?this.parseBindingsString(n,t,e,{valueAccessors:!0}):null},getBindingsString:function(e){switch(e.nodeType){case 1:return e.getAttribute(n);case 8:return f.virtualElements.virtualNodeBindingValue(e);default:return null}},parseBindingsString:function(t,n,r,i){try{var o=e(t,this.bindingCache,i);return o(n,r)}catch(s){throw s.message="Unable to parse bindings.\nBindings value: "+t+"\nMessage: "+s.message,s}}}),f.bindingProvider.instance=new f.bindingProvider}(),f.exportSymbol("bindingProvider",f.bindingProvider),function(){function e(e){return function(){return e}}function r(e){return e()}function i(e){return f.utils.objectMap(f.dependencyDetection.ignore(e),function(t,n){return function(){return e()[n]}})}function o(t,n,r){return"function"==typeof t?i(t.bind(null,n,r)):f.utils.objectMap(t,e)}function s(e,t){return i(this.getBindings.bind(this,e,t))}function a(e){var t=f.virtualElements.allowedBindings[e];if(!t)throw new Error("The binding '"+e+"' cannot be used with virtual elements")}function u(e,t,n){var r,i=f.virtualElements.firstChild(t),o=f.bindingProvider.instance,s=o.preprocessNode;if(s){for(;r=i;)i=f.virtualElements.nextSibling(r),s.call(o,r);i=f.virtualElements.firstChild(t)}for(;r=i;)i=f.virtualElements.nextSibling(r),l(e,r,n)}function l(e,t,n){var r=!0,i=1===t.nodeType;i&&f.virtualElements.normaliseVirtualElementDomStructure(t);var o=i&&n||f.bindingProvider.instance.nodeHasBindings(t);o&&(r=d(t,null,e,n).shouldBindDescendants),r&&!h[f.utils.tagNameLower(t)]&&u(e,t,!i)}function c(e){var t=[],n={},r=[];return f.utils.objectForEach(e,function i(o){if(!n[o]){var s=f.getBindingHandler(o);s&&(s.after&&(r.push(o),f.utils.arrayForEach(s.after,function(t){if(e[t]){if(-1!==f.utils.arrayIndexOf(r,t))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+r.join(", "));i(t)}}),r.pop()),t.push({key:o,handler:s})),n[o]=!0}}),t}function d(e,n,i,o){function u(){return f.utils.objectMap(m?m():d,r)}var l=f.utils.domData.get(e,v);if(!n){if(l)throw Error("You cannot apply bindings multiple times to the same element.");f.utils.domData.set(e,v,!0)}!l&&o&&f.storedBindingContextForNode(e,i);var d;if(n&&"function"!=typeof n)d=n;else{var p=f.bindingProvider.instance,h=p.getBindingAccessors||s;if(n||i._subscribable){var m=f.dependentObservable(function(){return d=n?n(i,e):h.call(p,e,i),d&&i._subscribable&&i._subscribable(),d},null,{disposeWhenNodeIsRemoved:e});d&&m.isActive()||(m=null)}else d=f.dependencyDetection.ignore(h,p,[e,i])}var g;if(d){var b=m?function(e){return function(){return r(m()[e])}}:function(e){return d[e]};u.get=function(e){return d[e]&&r(b(e))},u.has=function(e){return e in d};var y=c(d);f.utils.arrayForEach(y,function(n){var r=n.handler.init,o=n.handler.update,s=n.key;8===e.nodeType&&a(s);try{"function"==typeof r&&f.dependencyDetection.ignore(function(){var n=r(e,b(s),u,i.$data,i);if(n&&n.controlsDescendantBindings){if(g!==t)throw new Error("Multiple bindings ("+g+" and "+s+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");g=s}}),"function"==typeof o&&f.dependentObservable(function(){o(e,b(s),u,i.$data,i)},null,{disposeWhenNodeIsRemoved:e})}catch(l){throw l.message='Unable to process binding "'+s+": "+d[s]+'"\nMessage: '+l.message,l}})}return{shouldBindDescendants:g===t}}function p(e){return e&&e instanceof f.bindingContext?e:new f.bindingContext(e)}f.bindingHandlers={};var h={script:!0};f.getBindingHandler=function(e){return f.bindingHandlers[e]},f.bindingContext=function(e,n,r,i){function o(){var t=l?e():e;return n?(n._subscribable&&n._subscribable(),f.utils.extend(u,n),c&&(u._subscribable=c)):(u.$parents=[],u.$root=t,u.ko=f),u.$rawData=e,u.$data=t,r&&(u[r]=t),i&&i(u,n,t),u.$data}function s(){return a&&!f.utils.anyDomNodeIsAttachedToDocument(a)}var a,u=this,l="function"==typeof e,c=f.dependentObservable(o,null,{disposeWhen:s,disposeWhenNodeIsRemoved:!0});c.isActive()&&(u._subscribable=c,c.equalityComparer=null,a=[],c._addNode=function(e){a.push(e),f.utils.domNodeDisposal.addDisposeCallback(e,function(e){f.utils.arrayRemoveItem(a,e),a.length||(c.dispose(),u._subscribable=c=t)})})},f.bindingContext.prototype.createChildContext=function(e,t,n){return new f.bindingContext(e,this,t,function(e,t){e.$parentContext=t,e.$parent=t.$data,e.$parents=(t.$parents||[]).slice(0),e.$parents.unshift(e.$parent),n&&n(e)})},f.bindingContext.prototype.extend=function(e){return new f.bindingContext(this.$rawData,this,null,function(t){f.utils.extend(t,"function"==typeof e?e():e)})};var v=f.utils.domData.nextKey(),m=f.utils.domData.nextKey();f.storedBindingContextForNode=function(e,t){return 2!=arguments.length?f.utils.domData.get(e,m):(f.utils.domData.set(e,m,t),t._subscribable&&t._subscribable._addNode(e),void 0)},f.applyBindingAccessorsToNode=function(e,t,n){return 1===e.nodeType&&f.virtualElements.normaliseVirtualElementDomStructure(e),d(e,t,p(n),!0)},f.applyBindingsToNode=function(e,t,n){var r=p(n);return f.applyBindingAccessorsToNode(e,o(t,r,e),r)},f.applyBindingsToDescendants=function(e,t){(1===t.nodeType||8===t.nodeType)&&u(p(e),t,!0)},f.applyBindings=function(e,t){if(t&&1!==t.nodeType&&8!==t.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");t=t||n.document.body,l(p(e),t,!0)},f.contextFor=function(e){switch(e.nodeType){case 1:case 8:var n=f.storedBindingContextForNode(e);if(n)return n;if(e.parentNode)return f.contextFor(e.parentNode)}return t},f.dataFor=function(e){var n=f.contextFor(e);return n?n.$data:t},f.exportSymbol("bindingHandlers",f.bindingHandlers),f.exportSymbol("applyBindings",f.applyBindings),f.exportSymbol("applyBindingsToDescendants",f.applyBindingsToDescendants),f.exportSymbol("applyBindingAccessorsToNode",f.applyBindingAccessorsToNode),f.exportSymbol("applyBindingsToNode",f.applyBindingsToNode),f.exportSymbol("contextFor",f.contextFor),f.exportSymbol("dataFor",f.dataFor)}();var b={"class":"className","for":"htmlFor"};f.bindingHandlers.attr={update:function(e,n){var r=f.utils.unwrapObservable(n())||{};f.utils.objectForEach(r,function(n,r){r=f.utils.unwrapObservable(r);var i=r===!1||null===r||r===t;i&&e.removeAttribute(n),f.utils.ieVersion<=8&&n in b?(n=b[n],i?e.removeAttribute(n):e[n]=r):i||e.setAttribute(n,r.toString()),"name"===n&&f.utils.setElementName(e,i?"":r.toString())})}},function(){f.bindingHandlers.checked={after:["value","attr"],init:function(e,n,r){function i(){return r.has("checkedValue")?f.utils.unwrapObservable(r.get("checkedValue")):e.value}function o(){var t=e.checked,o=d?i():t;if(p&&(!u||t)){var s=f.dependencyDetection.ignore(n);l?c!==o?(t&&(f.utils.addOrRemoveItem(s,o,!0),f.utils.addOrRemoveItem(s,c,!1)),c=o):f.utils.addOrRemoveItem(s,o,t):f.expressionRewriting.writeValueToProperty(s,r,"checked",o,!0)}}function s(){var t=f.utils.unwrapObservable(n());e.checked=l?f.utils.arrayIndexOf(t,i())>=0:a?t:i()===t}var a="checkbox"==e.type,u="radio"==e.type;if(a||u){var l=a&&f.utils.unwrapObservable(n())instanceof Array,c=l?i():t,d=u||l,p=!1;u&&!e.name&&f.bindingHandlers.uniqueName.init(e,function(){return!0}),f.dependentObservable(o,null,{disposeWhenNodeIsRemoved:e}),f.utils.registerEventHandler(e,"click",o),f.dependentObservable(s,null,{disposeWhenNodeIsRemoved:e}),p=!0}}},f.expressionRewriting.twoWayBindings.checked=!0,f.bindingHandlers.checkedValue={update:function(e,t){e.value=f.utils.unwrapObservable(t())}}}();var y="__ko__cssValue";f.bindingHandlers.css={update:function(e,t){var n=f.utils.unwrapObservable(t());"object"==typeof n?f.utils.objectForEach(n,function(t,n){n=f.utils.unwrapObservable(n),f.utils.toggleDomNodeCssClass(e,t,n)}):(n=String(n||""),f.utils.toggleDomNodeCssClass(e,e[y],!1),e[y]=n,f.utils.toggleDomNodeCssClass(e,n,!0))}},f.bindingHandlers.enable={update:function(e,t){var n=f.utils.unwrapObservable(t());n&&e.disabled?e.removeAttribute("disabled"):n||e.disabled||(e.disabled=!0)}},f.bindingHandlers.disable={update:function(e,t){f.bindingHandlers.enable.update(e,function(){return!f.utils.unwrapObservable(t())})}},f.bindingHandlers.event={init:function(e,t,n,r,i){var o=t()||{};f.utils.objectForEach(o,function(o){"string"==typeof o&&f.utils.registerEventHandler(e,o,function(e){var s,a=t()[o];if(a){try{var u=f.utils.makeArray(arguments);r=i.$data,u.unshift(r),s=a.apply(r,u)}finally{s!==!0&&(e.preventDefault?e.preventDefault():e.returnValue=!1)}var l=n.get(o+"Bubble")!==!1;l||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation())}})})}},f.bindingHandlers.foreach={makeTemplateValueAccessor:function(e){return function(){var t=e(),n=f.utils.peekObservable(t);return n&&"number"!=typeof n.length?(f.utils.unwrapObservable(t),{foreach:n.data,as:n.as,includeDestroyed:n.includeDestroyed,afterAdd:n.afterAdd,beforeRemove:n.beforeRemove,afterRender:n.afterRender,beforeMove:n.beforeMove,afterMove:n.afterMove,templateEngine:f.nativeTemplateEngine.instance}):{foreach:t,templateEngine:f.nativeTemplateEngine.instance}}},init:function(e,t){return f.bindingHandlers.template.init(e,f.bindingHandlers.foreach.makeTemplateValueAccessor(t))},update:function(e,t,n,r,i){return f.bindingHandlers.template.update(e,f.bindingHandlers.foreach.makeTemplateValueAccessor(t),n,r,i)}},f.expressionRewriting.bindingRewriteValidators.foreach=!1,f.virtualElements.allowedBindings.foreach=!0;var w="__ko_hasfocusUpdating",x="__ko_hasfocusLastValue";f.bindingHandlers.hasfocus={init:function(e,t,n){var r=function(r){e[w]=!0;var i=e.ownerDocument;if("activeElement"in i){var o;try{o=i.activeElement}catch(s){o=i.body}r=o===e}var a=t();f.expressionRewriting.writeValueToProperty(a,n,"hasfocus",r,!0),e[x]=r,e[w]=!1},i=r.bind(null,!0),o=r.bind(null,!1);f.utils.registerEventHandler(e,"focus",i),f.utils.registerEventHandler(e,"focusin",i),f.utils.registerEventHandler(e,"blur",o),f.utils.registerEventHandler(e,"focusout",o)},update:function(e,t){var n=!!f.utils.unwrapObservable(t());e[w]||e[x]===n||(n?e.focus():e.blur(),f.dependencyDetection.ignore(f.utils.triggerEvent,null,[e,n?"focusin":"focusout"]))}},f.expressionRewriting.twoWayBindings.hasfocus=!0,f.bindingHandlers.hasFocus=f.bindingHandlers.hasfocus,f.expressionRewriting.twoWayBindings.hasFocus=!0,f.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.utils.setHtml(e,t())}};var C=f.utils.domData.nextKey();d("if"),d("ifnot",!1,!0),d("with",!0,!1,function(e,t){return e.createChildContext(t)}),f.bindingHandlers.options={init:function(e){if("select"!==f.utils.tagNameLower(e))throw new Error("options binding applies only to SELECT elements");for(;e.length>0;)e.remove(0);return{controlsDescendantBindings:!0}},update:function(e,n,i){function o(){return f.utils.arrayFilter(e.options,function(e){return e.selected})}function s(e,t,n){var r=typeof t;return"function"==r?t(e):"string"==r?e[t]:n}function a(e,n,o){o.length&&(c=o[0].selected?[f.selectExtensions.readValue(o[0])]:[],b=!0);var a=r.createElement("option");if(e===m)f.utils.setTextContent(a,i.get("optionsCaption")),f.selectExtensions.writeValue(a,t);else{var u=s(e,i.get("optionsValue"),e);f.selectExtensions.writeValue(a,f.utils.unwrapObservable(u));var l=s(e,i.get("optionsText"),u);f.utils.setTextContent(a,l)}return[a]}function u(t,n){if(c.length){var r=f.utils.arrayIndexOf(c,f.selectExtensions.readValue(n[0]))>=0;f.utils.setOptionNodeSelectionState(n[0],r),b&&!r&&f.dependencyDetection.ignore(f.utils.triggerEvent,null,[e,"change"])}}var l,c,d=0==e.length,p=!d&&e.multiple?e.scrollTop:null,h=f.utils.unwrapObservable(n()),v=i.get("optionsIncludeDestroyed"),m={};if(c=e.multiple?f.utils.arrayMap(o(),f.selectExtensions.readValue):e.selectedIndex>=0?[f.selectExtensions.readValue(e.options[e.selectedIndex])]:[],h){"undefined"==typeof h.length&&(h=[h]);var g=f.utils.arrayFilter(h,function(e){return v||e===t||null===e||!f.utils.unwrapObservable(e._destroy)});i.has("optionsCaption")&&(l=f.utils.unwrapObservable(i.get("optionsCaption")),null!==l&&l!==t&&g.unshift(m))}else h=[];var b=!1,y=u;i.has("optionsAfterRender")&&(y=function(e,n){u(e,n),f.dependencyDetection.ignore(i.get("optionsAfterRender"),null,[n[0],e!==m?e:t])}),f.utils.setDomNodeChildrenFromArrayMapping(e,g,a,null,y);var w;w=e.multiple?c.length&&o().length<c.length:c.length&&e.selectedIndex>=0?f.selectExtensions.readValue(e.options[e.selectedIndex])!==c[0]:c.length||e.selectedIndex>=0,w&&f.dependencyDetection.ignore(f.utils.triggerEvent,null,[e,"change"]),f.utils.ensureSelectElementIsRenderedCorrectly(e),p&&Math.abs(p-e.scrollTop)>20&&(e.scrollTop=p)}},f.bindingHandlers.options.optionValueDomDataKey=f.utils.domData.nextKey(),f.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(e,t,n){f.utils.registerEventHandler(e,"change",function(){var r=t(),i=[];f.utils.arrayForEach(e.getElementsByTagName("option"),function(e){e.selected&&i.push(f.selectExtensions.readValue(e))}),f.expressionRewriting.writeValueToProperty(r,n,"selectedOptions",i)})},update:function(e,t){if("select"!=f.utils.tagNameLower(e))throw new Error("values binding applies only to SELECT elements");var n=f.utils.unwrapObservable(t());n&&"number"==typeof n.length&&f.utils.arrayForEach(e.getElementsByTagName("option"),function(e){var t=f.utils.arrayIndexOf(n,f.selectExtensions.readValue(e))>=0;
f.utils.setOptionNodeSelectionState(e,t)})}},f.expressionRewriting.twoWayBindings.selectedOptions=!0,f.bindingHandlers.style={update:function(e,t){var n=f.utils.unwrapObservable(t()||{});f.utils.objectForEach(n,function(t,n){n=f.utils.unwrapObservable(n),e.style[t]=n||""})}},f.bindingHandlers.submit={init:function(e,t,n,r,i){if("function"!=typeof t())throw new Error("The value for a submit binding must be a function");f.utils.registerEventHandler(e,"submit",function(n){var r,o=t();try{r=o.call(i.$data,e)}finally{r!==!0&&(n.preventDefault?n.preventDefault():n.returnValue=!1)}})}},f.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t){f.utils.setTextContent(e,t())}},f.virtualElements.allowedBindings.text=!0,f.bindingHandlers.uniqueName={init:function(e,t){if(t()){var n="ko_unique_"+ ++f.bindingHandlers.uniqueName.currentIndex;f.utils.setElementName(e,n)}}},f.bindingHandlers.uniqueName.currentIndex=0,f.bindingHandlers.value={after:["options","foreach"],init:function(e,t,n){var r=["change"],i=n.get("valueUpdate"),o=!1;i&&("string"==typeof i&&(i=[i]),f.utils.arrayPushAll(r,i),r=f.utils.arrayGetDistinctValues(r));var s=function(){o=!1;var r=t(),i=f.selectExtensions.readValue(e);f.expressionRewriting.writeValueToProperty(r,n,"value",i)},a=f.utils.ieVersion&&"input"==e.tagName.toLowerCase()&&"text"==e.type&&"off"!=e.autocomplete&&(!e.form||"off"!=e.form.autocomplete);a&&-1==f.utils.arrayIndexOf(r,"propertychange")&&(f.utils.registerEventHandler(e,"propertychange",function(){o=!0}),f.utils.registerEventHandler(e,"blur",function(){o&&s()})),f.utils.arrayForEach(r,function(t){var n=s;f.utils.stringStartsWith(t,"after")&&(n=function(){setTimeout(s,0)},t=t.substring("after".length)),f.utils.registerEventHandler(e,t,n)})},update:function(e,t){var n="select"===f.utils.tagNameLower(e),r=f.utils.unwrapObservable(t()),i=f.selectExtensions.readValue(e),o=r!==i;if(o){var s=function(){f.selectExtensions.writeValue(e,r)};s(),n&&(r!==f.selectExtensions.readValue(e)?f.dependencyDetection.ignore(f.utils.triggerEvent,null,[e,"change"]):setTimeout(s,0))}}},f.expressionRewriting.twoWayBindings.value=!0,f.bindingHandlers.visible={update:function(e,t){var n=f.utils.unwrapObservable(t()),r=!("none"==e.style.display);n&&!r?e.style.display="":!n&&r&&(e.style.display="none")}},c("click"),f.templateEngine=function(){},f.templateEngine.prototype.renderTemplateSource=function(){throw new Error("Override renderTemplateSource")},f.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(){throw new Error("Override createJavaScriptEvaluatorBlock")},f.templateEngine.prototype.makeTemplateSource=function(e,t){if("string"==typeof e){t=t||r;var n=t.getElementById(e);if(!n)throw new Error("Cannot find template with ID "+e);return new f.templateSources.domElement(n)}if(1==e.nodeType||8==e.nodeType)return new f.templateSources.anonymousTemplate(e);throw new Error("Unknown template type: "+e)},f.templateEngine.prototype.renderTemplate=function(e,t,n,r){var i=this.makeTemplateSource(e,r);return this.renderTemplateSource(i,t,n)},f.templateEngine.prototype.isTemplateRewritten=function(e,t){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(e,t).data("isRewritten")},f.templateEngine.prototype.rewriteTemplate=function(e,t,n){var r=this.makeTemplateSource(e,n),i=t(r.text());r.text(i),r.data("isRewritten",!0)},f.exportSymbol("templateEngine",f.templateEngine),f.templateRewriting=function(){function e(e){for(var t=f.expressionRewriting.bindingRewriteValidators,n=0;n<e.length;n++){var r=e[n].key;if(t.hasOwnProperty(r)){var i=t[r];if("function"==typeof i){var o=i(e[n].value);if(o)throw new Error(o)}else if(!i)throw new Error("This template engine does not support the '"+r+"' binding within its templates")}}}function t(t,n,r,i){var o=f.expressionRewriting.parseObjectLiteral(t);e(o);var s=f.expressionRewriting.preProcessBindings(o,{valueAccessors:!0}),a="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+s+" } })()},'"+r.toLowerCase()+"')";return i.createJavaScriptEvaluatorBlock(a)+n}var n=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,r=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(e,t,n){t.isTemplateRewritten(e,n)||t.rewriteTemplate(e,function(e){return f.templateRewriting.memoizeBindingAttributeSyntax(e,t)},n)},memoizeBindingAttributeSyntax:function(e,i){return e.replace(n,function(){return t(arguments[4],arguments[1],arguments[2],i)}).replace(r,function(){return t(arguments[1],"<!-- ko -->","#comment",i)})},applyMemoizedBindingsToNextSibling:function(e,t){return f.memoization.memoize(function(n,r){var i=n.nextSibling;i&&i.nodeName.toLowerCase()===t&&f.applyBindingAccessorsToNode(i,e,r)})}}}(),f.exportSymbol("__tr_ambtns",f.templateRewriting.applyMemoizedBindingsToNextSibling),function(){f.templateSources={},f.templateSources.domElement=function(e){this.domElement=e},f.templateSources.domElement.prototype.text=function(){var e=f.utils.tagNameLower(this.domElement),t="script"===e?"text":"textarea"===e?"value":"innerHTML";if(0==arguments.length)return this.domElement[t];var n=arguments[0];"innerHTML"===t?f.utils.setHtml(this.domElement,n):this.domElement[t]=n};var e=f.utils.domData.nextKey()+"_";f.templateSources.domElement.prototype.data=function(t){return 1===arguments.length?f.utils.domData.get(this.domElement,e+t):(f.utils.domData.set(this.domElement,e+t,arguments[1]),void 0)};var n=f.utils.domData.nextKey();f.templateSources.anonymousTemplate=function(e){this.domElement=e},f.templateSources.anonymousTemplate.prototype=new f.templateSources.domElement,f.templateSources.anonymousTemplate.prototype.constructor=f.templateSources.anonymousTemplate,f.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var e=f.utils.domData.get(this.domElement,n)||{};return e.textData===t&&e.containerData&&(e.textData=e.containerData.innerHTML),e.textData}var r=arguments[0];f.utils.domData.set(this.domElement,n,{textData:r})},f.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){var e=f.utils.domData.get(this.domElement,n)||{};return e.containerData}var t=arguments[0];f.utils.domData.set(this.domElement,n,{containerData:t})},f.exportSymbol("templateSources",f.templateSources),f.exportSymbol("templateSources.domElement",f.templateSources.domElement),f.exportSymbol("templateSources.anonymousTemplate",f.templateSources.anonymousTemplate)}(),function(){function e(e,t,n){for(var r,i=e,o=f.virtualElements.nextSibling(t);i&&(r=i)!==o;)i=f.virtualElements.nextSibling(r),n(r,i)}function n(t,n){if(t.length){var r=t[0],i=t[t.length-1],o=r.parentNode,s=f.bindingProvider.instance,a=s.preprocessNode;if(a){if(e(r,i,function(e,t){var n=e.previousSibling,o=a.call(s,e);o&&(e===r&&(r=o[0]||t),e===i&&(i=o[o.length-1]||n))}),t.length=0,!r)return;r===i?t.push(r):(t.push(r,i),f.utils.fixUpContinuousNodeArray(t,o))}e(r,i,function(e){(1===e.nodeType||8===e.nodeType)&&f.applyBindings(n,e)}),e(r,i,function(e){(1===e.nodeType||8===e.nodeType)&&f.memoization.unmemoizeDomNodeAndDescendants(e,[n])}),f.utils.fixUpContinuousNodeArray(t,o)}}function r(e){return e.nodeType?e:e.length>0?e[0]:null}function i(e,t,i,o,a){a=a||{};var u=e&&r(e),l=u&&u.ownerDocument,c=a.templateEngine||s;f.templateRewriting.ensureTemplateIsRewritten(i,c,l);var d=c.renderTemplate(i,o,a,l);if("number"!=typeof d.length||d.length>0&&"number"!=typeof d[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var p=!1;switch(t){case"replaceChildren":f.virtualElements.setDomNodeChildren(e,d),p=!0;break;case"replaceNode":f.utils.replaceDomNodes(e,d),p=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+t)}return p&&(n(d,o),a.afterRender&&f.dependencyDetection.ignore(a.afterRender,null,[d,o.$data])),d}function o(e,n){var r=f.utils.domData.get(e,a);r&&"function"==typeof r.dispose&&r.dispose(),f.utils.domData.set(e,a,n&&n.isActive()?n:t)}var s;f.setTemplateEngine=function(e){if(e!=t&&!(e instanceof f.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");s=e},f.renderTemplate=function(e,n,o,a,u){if(o=o||{},(o.templateEngine||s)==t)throw new Error("Set a template engine before calling renderTemplate");if(u=u||"replaceChildren",a){var l=r(a),c=function(){return!l||!f.utils.domNodeIsAttachedToDocument(l)},d=l&&"replaceNode"==u?l.parentNode:l;return f.dependentObservable(function(){var t=n&&n instanceof f.bindingContext?n:new f.bindingContext(f.utils.unwrapObservable(n)),s="function"==typeof e?e(t.$data,t):e,c=i(a,u,s,t,o);"replaceNode"==u&&(a=c,l=r(a))},null,{disposeWhen:c,disposeWhenNodeIsRemoved:d})}return f.memoization.memoize(function(t){f.renderTemplate(e,n,o,t,"replaceNode")})},f.renderTemplateForEach=function(e,r,o,s,a){var u,l=function(t,n){u=a.createChildContext(t,o.as,function(e){e.$index=n});var r="function"==typeof e?e(t,u):e;return i(null,"ignoreTargetNode",r,u,o)},c=function(e,t){n(t,u),o.afterRender&&o.afterRender(t,e)};return f.dependentObservable(function(){var e=f.utils.unwrapObservable(r)||[];"undefined"==typeof e.length&&(e=[e]);var n=f.utils.arrayFilter(e,function(e){return o.includeDestroyed||e===t||null===e||!f.utils.unwrapObservable(e._destroy)});f.dependencyDetection.ignore(f.utils.setDomNodeChildrenFromArrayMapping,null,[s,n,l,o,c])},null,{disposeWhenNodeIsRemoved:s})};var a=f.utils.domData.nextKey();f.bindingHandlers.template={init:function(e,t){var n=f.utils.unwrapObservable(t());if("string"==typeof n||n.name)f.virtualElements.emptyNode(e);else{var r=f.virtualElements.childNodes(e),i=f.utils.moveCleanedNodesToContainerElement(r);new f.templateSources.anonymousTemplate(e).nodes(i)}return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){var s,a=f.utils.unwrapObservable(t()),u={},l=!0,c=null;if("string"!=typeof a&&(u=a,a=f.utils.unwrapObservable(u.name),"if"in u&&(l=f.utils.unwrapObservable(u["if"])),l&&"ifnot"in u&&(l=!f.utils.unwrapObservable(u.ifnot)),s=f.utils.unwrapObservable(u.data)),"foreach"in u){var d=l&&u.foreach||[];c=f.renderTemplateForEach(a||e,d,u,e,i)}else if(l){var p="data"in u?i.createChildContext(s,u.as):i;c=f.renderTemplate(a||e,p,u,e)}else f.virtualElements.emptyNode(e);o(e,c)}},f.expressionRewriting.bindingRewriteValidators.template=function(e){var t=f.expressionRewriting.parseObjectLiteral(e);return 1==t.length&&t[0].unknown?null:f.expressionRewriting.keyValueArrayContainsKey(t,"name")?null:"This template engine does not support anonymous templates nested within its templates"},f.virtualElements.allowedBindings.template=!0}(),f.exportSymbol("setTemplateEngine",f.setTemplateEngine),f.exportSymbol("renderTemplate",f.renderTemplate),f.utils.compareArrays=function(){function e(e,i,o){return o="boolean"==typeof o?{dontLimitMoves:o}:o||{},e=e||[],i=i||[],e.length<=i.length?t(e,i,n,r,o):t(i,e,r,n,o)}function t(e,t,n,r,i){var o,s,a,u,l,c,d=Math.min,f=Math.max,p=[],h=e.length,v=t.length,m=v-h||1,g=h+v+1;for(o=0;h>=o;o++)for(u=a,p.push(a=[]),l=d(v,o+m),c=f(0,o-1),s=c;l>=s;s++)if(s)if(o)if(e[o-1]===t[s-1])a[s]=u[s-1];else{var b=u[s]||g,y=a[s-1]||g;a[s]=d(b,y)+1}else a[s]=s+1;else a[s]=o+1;var w,x=[],C=[],E=[];for(o=h,s=v;o||s;)w=p[o][s]-1,s&&w===p[o][s-1]?C.push(x[x.length]={status:n,value:t[--s],index:s}):o&&w===p[o-1][s]?E.push(x[x.length]={status:r,value:e[--o],index:o}):(--s,--o,i.sparse||x.push({status:"retained",value:t[s]}));if(C.length&&E.length){var S,k,R,N,A,T=10*h;for(S=k=0;(i.dontLimitMoves||T>S)&&(N=C[k]);k++){for(R=0;A=E[R];R++)if(N.value===A.value){N.moved=A.index,A.moved=N.index,E.splice(R,1),S=R=0;break}S+=R}}return x.reverse()}var n="added",r="deleted";return e}(),f.exportSymbol("utils.compareArrays",f.utils.compareArrays),function(){function e(e,n,r,i,o){var s=[],a=f.dependentObservable(function(){var t=n(r,o,f.utils.fixUpContinuousNodeArray(s,e))||[];s.length>0&&(f.utils.replaceDomNodes(s,t),i&&f.dependencyDetection.ignore(i,null,[r,t,o])),s.splice(0,s.length),f.utils.arrayPushAll(s,t)},null,{disposeWhenNodeIsRemoved:e,disposeWhen:function(){return!f.utils.anyDomNodeIsAttachedToDocument(s)}});return{mappedNodes:s,dependentObservable:a.isActive()?a:t}}var n=f.utils.domData.nextKey();f.utils.setDomNodeChildrenFromArrayMapping=function(r,i,o,s,a){function u(e,t){c=v[t],w!==t&&(S[e]=c),c.indexObservable(w++),f.utils.fixUpContinuousNodeArray(c.mappedNodes,r),b.push(c),C.push(c)}function l(e,t){if(e)for(var n=0,r=t.length;r>n;n++)t[n]&&f.utils.arrayForEach(t[n].mappedNodes,function(r){e(r,n,t[n].arrayEntry)})}i=i||[],s=s||{};for(var c,d,p,h=f.utils.domData.get(r,n)===t,v=f.utils.domData.get(r,n)||[],m=f.utils.arrayMap(v,function(e){return e.arrayEntry}),g=f.utils.compareArrays(m,i,s.dontLimitMoves),b=[],y=0,w=0,x=[],C=[],E=[],S=[],k=[],R=0;d=g[R];R++)switch(p=d.moved,d.status){case"deleted":p===t&&(c=v[y],c.dependentObservable&&c.dependentObservable.dispose(),x.push.apply(x,f.utils.fixUpContinuousNodeArray(c.mappedNodes,r)),s.beforeRemove&&(E[R]=c,C.push(c))),y++;break;case"retained":u(R,y++);break;case"added":p!==t?u(R,p):(c={arrayEntry:d.value,indexObservable:f.observable(w++)},b.push(c),C.push(c),h||(k[R]=c))}l(s.beforeMove,S),f.utils.arrayForEach(x,s.beforeRemove?f.cleanNode:f.removeNode);for(var N,A,R=0,T=f.virtualElements.firstChild(r);c=C[R];R++){c.mappedNodes||f.utils.extend(c,e(r,o,c.arrayEntry,a,c.indexObservable));for(var D=0;A=c.mappedNodes[D];T=A.nextSibling,N=A,D++)A!==T&&f.virtualElements.insertAfter(r,A,N);!c.initialized&&a&&(a(c.arrayEntry,c.mappedNodes,c.indexObservable),c.initialized=!0)}l(s.beforeRemove,E),l(s.afterMove,S),l(s.afterAdd,k),f.utils.domData.set(r,n,b)}}(),f.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",f.utils.setDomNodeChildrenFromArrayMapping),f.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},f.nativeTemplateEngine.prototype=new f.templateEngine,f.nativeTemplateEngine.prototype.constructor=f.nativeTemplateEngine,f.nativeTemplateEngine.prototype.renderTemplateSource=function(e){var t=!(f.utils.ieVersion<9),n=t?e.nodes:null,r=n?e.nodes():null;if(r)return f.utils.makeArray(r.cloneNode(!0).childNodes);var i=e.text();return f.utils.parseHtmlFragment(i)},f.nativeTemplateEngine.instance=new f.nativeTemplateEngine,f.setTemplateEngine(f.nativeTemplateEngine.instance),f.exportSymbol("nativeTemplateEngine",f.nativeTemplateEngine),function(){f.jqueryTmplTemplateEngine=function(){function e(){if(2>n)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function t(e,t,n){return o.tmpl(e,t,n)}var n=this.jQueryTmplVersion=function(){if("undefined"==typeof o||!o.tmpl)return 0;try{if(o.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(e){}return 1}();this.renderTemplateSource=function(n,i,s){s=s||{},e();var a=n.data("precompiled");if(!a){var u=n.text()||"";u="{{ko_with $item.koBindingContext}}"+u+"{{/ko_with}}",a=o.template(null,u),n.data("precompiled",a)}var l=[i.$data],c=o.extend({koBindingContext:i},s.templateOptions),d=t(a,l,c);return d.appendTo(r.createElement("div")),o.fragments={},d},this.createJavaScriptEvaluatorBlock=function(e){return"{{ko_code ((function() { return "+e+" })()) }}"},this.addTemplate=function(e,t){r.write("<script type='text/html' id='"+e+"'>"+t+"</script>")},n>0&&(o.tmpl.tag.ko_code={open:"__.push($1 || '');"},o.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},f.jqueryTmplTemplateEngine.prototype=new f.templateEngine,f.jqueryTmplTemplateEngine.prototype.constructor=f.jqueryTmplTemplateEngine;var e=new f.jqueryTmplTemplateEngine;e.jQueryTmplVersion>0&&f.setTemplateEngine(e),f.exportSymbol("jqueryTmplTemplateEngine",f.jqueryTmplTemplateEngine)}()})}()}(),function(e){function t(){var e=!1,t=!1;this.stopPropagation=function(){e=!0},this.isPropagationStopped=function(){return e},this.stopImmediatePropagation=function(){t=!0},this.isImmediatePropagationStopped=function(){return t}}function n(){var e=[];this.subscribe=function(t){e.push(t)},this.unsubscribe=function(t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},this.notify=function(n,r,i){r=r||new t,i=i||this;for(var o,s=0;s<e.length&&!r.isPropagationStopped()&&!r.isImmediatePropagationStopped();s++)o=e[s].call(i,r,n);return o}}function r(){var e=[];this.subscribe=function(t,n){return e.push({event:t,handler:n}),t.subscribe(n),this},this.unsubscribe=function(t,n){for(var r=e.length;r--;)if(e[r].event===t&&e[r].handler===n)return e.splice(r,1),t.unsubscribe(n),void 0;return this},this.unsubscribeAll=function(){for(var t=e.length;t--;)e[t].event.unsubscribe(e[t].handler);return e=[],this}}function i(e,t,n,r){void 0===n&&void 0===r&&(n=e,r=t),this.fromRow=Math.min(e,n),this.fromCell=Math.min(t,r),this.toRow=Math.max(e,n),this.toCell=Math.max(t,r),this.isSingleRow=function(){return this.fromRow==this.toRow},this.isSingleCell=function(){return this.fromRow==this.toRow&&this.fromCell==this.toCell},this.contains=function(e,t){return e>=this.fromRow&&e<=this.toRow&&t>=this.fromCell&&t<=this.toCell},this.toString=function(){return this.isSingleCell()?"("+this.fromRow+":"+this.fromCell+")":"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}function o(){this.__nonDataRow=!0}function s(){this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=null}function a(){this.__groupTotals=!0,this.group=null}function u(){var e=null;this.isActive=function(t){return t?e===t:null!==e},this.activate=function(t){if(t!==e){if(null!==e)throw"SlickGrid.EditorLock.activate: an editController is still active, can't activate another editController";if(!t.commitCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .commitCurrentEdit()";if(!t.cancelCurrentEdit)throw"SlickGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()";e=t}},this.deactivate=function(t){if(e!==t)throw"SlickGrid.EditorLock.deactivate: specified editController is not the currently active one";e=null},this.commitCurrentEdit=function(){return e?e.commitCurrentEdit():!0},this.cancelCurrentEdit=function(){return e?e.cancelCurrentEdit():!0}}e.extend(!0,window,{Slick:{Event:n,EventData:t,EventHandler:r,Range:i,NonDataRow:o,Group:s,GroupTotals:a,EditorLock:u,GlobalEditorLock:new u}}),s.prototype=new o,s.prototype.equals=function(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title},a.prototype=new o}(jQuery),define("slick.core",["jQuery"],function(e){return function(){var t;return t||e.Slick}}(this)),function(e){function t(t){function n(){bt=!0}function r(){bt=!1,tt()}function i(e){wt=e}function o(e){st=e}function s(e){e=e||0;for(var t,n=e,r=ft.length;r>n;n++){if(t=ft[n][dt],void 0===t)throw"Each data element must implement a unique 'id' property";ht[t]=n}}function a(){for(var e,t=0,n=ft.length;n>t;t++)if(e=ft[t][dt],void 0===e||ht[e]!==t)throw"Each data element must implement a unique 'id' property"}function u(){return ft}function l(e,t){void 0!==t&&(dt=t),ft=Ct=e,ht={},s(),a(),tt()}function c(e){void 0!=e.pageSize&&(Tt=e.pageSize,Dt=Tt?Math.min(Dt,Math.max(0,Math.ceil(Ot/Tt)-1)):0),void 0!=e.pageNum&&(Dt=Math.min(e.pageNum,Math.max(0,Math.ceil(Ot/Tt)-1))),It.notify(d(),null,lt),tt()}function d(){var e=Tt?Math.max(1,Math.ceil(Ot/Tt)):1;return{pageSize:Tt,pageNum:Dt,totalRows:Ot,totalPages:e}}function f(e,t){yt=t,ot=e,it=null,t===!1&&ft.reverse(),ft.sort(e),t===!1&&ft.reverse(),ht={},s(),tt()}function p(e,t){yt=t,it=e,ot=null;var n=Object.prototype.toString;Object.prototype.toString="function"==typeof e?e:function(){return this[e]},t===!1&&ft.reverse(),ft.sort(),Object.prototype.toString=n,t===!1&&ft.reverse(),ht={},s(),tt()}function h(){ot?f(ot,yt):it&&p(it,yt)}function v(e){mt=e,t.inlineFilters&&(at=G(),ut=K()),tt()}function m(){return kt}function g(n){t.groupItemMetadataProvider||(t.groupItemMetadataProvider=new Slick.Data.GroupItemMetadataProvider),Rt=[],Nt=[],n=n||[],kt=n instanceof Array?n:[n];for(var r=0;r<kt.length;r++){var i=kt[r]=e.extend(!0,{},St,kt[r]);i.getterIsAFn="function"==typeof i.getter,i.compiledAccumulators=[];for(var o=i.aggregators.length;o--;)i.compiledAccumulators[o]=J(i.aggregators[o]);Nt[r]={}}tt()}function b(e,t,n){return null==e?(g([]),void 0):(g({getter:e,formatter:t,comparer:n}),void 0)}function y(e,t){if(!kt.length)throw new Error("At least one grouping must be specified before calling setAggregators().");kt[0].aggregators=e,kt[0].aggregateCollapsed=t,g(kt)}function w(e){return ft[e]}function x(e){return ht[e]}function C(){if(!vt){vt={};for(var e=0,t=pt.length;t>e;e++)vt[pt[e][dt]]=e}}function E(e){return C(),vt[e]}function S(e){return ft[ht[e]]}function k(e){var t=[];C();for(var n=0;n<e.length;n++){var r=vt[e[n]];null!=r&&(t[t.length]=r)}return t}function R(e){for(var t=[],n=0;n<e.length;n++)e[n]<pt.length&&(t[t.length]=pt[e[n]][dt]);return t}function N(e,t){if(void 0===ht[e]||e!==t[dt])throw"Invalid or non-matching id";ft[ht[e]]=t,gt||(gt={}),gt[e]=!0,tt()}function A(e,t){ft.splice(e,0,t),s(e),tt()}function T(e){ft.push(e),s(ft.length-1),tt()}function D(e){var t=ht[e];if(void 0===t)throw"Invalid id";delete ht[e],ft.splice(t,1),s(t),tt()}function O(){return pt.length}function _(e){return pt[e]}function j(e){var n=pt[e];return void 0===n?null:n.__group?t.groupItemMetadataProvider.getGroupRowMetadata(n):n.__groupTotals?t.groupItemMetadataProvider.getTotalsRowMetadata(n):null}function I(e,t){if(null==e)for(var n=0;n<kt.length;n++)Nt[n]={},kt[n].collapsed=t;else Nt[e]={},kt[e].collapsed=t;tt()}function $(e){I(e,!0)}function P(e){I(e,!1)}function L(e,t,n){Nt[e][t]=kt[e].collapsed^n,tt()}function B(){var e=Array.prototype.slice.call(arguments),t=e[0];1==e.length&&-1!=t.indexOf(At)?L(t.split(At).length-1,t,!0):L(e.length-1,e.join(At),!0)}function M(){var e=Array.prototype.slice.call(arguments),t=e[0];1==e.length&&-1!=t.indexOf(At)?L(t.split(At).length-1,t,!1):L(e.length-1,e.join(At),!1)}function F(){return Rt}function W(e,t){for(var n,r,i,o=[],s={},a=t?t.level+1:0,u=kt[a],l=0,c=u.predefinedValues.length;c>l;l++)r=u.predefinedValues[l],n=s[r],n||(n=new Slick.Group,n.value=r,n.level=a,n.groupingKey=(t?t.groupingKey+At:"")+r,o[o.length]=n,s[r]=n);for(var l=0,c=e.length;c>l;l++)i=e[l],r=u.getterIsAFn?u.getter(i):i[u.getter],n=s[r],n||(n=new Slick.Group,n.value=r,n.level=a,n.groupingKey=(t?t.groupingKey+At:"")+r,o[o.length]=n,s[r]=n),n.rows[n.count++]=i;if(a<kt.length-1)for(var l=0;l<o.length;l++)n=o[l],n.groups=W(n.rows,n);return o.sort(kt[a].comparer),o}function H(e){for(var t,n=kt[e.level],r=e.level==kt.length,i=new Slick.GroupTotals,o=n.aggregators.length;o--;)t=n.aggregators[o],t.init(),n.compiledAccumulators[o].call(t,!r&&n.aggregateChildGroups?e.groups:e.rows),t.storeResult(i);i.group=e,e.totals=i}function V(e,t){t=t||0;for(var n,r=kt[t],i=e.length;i--;)n=e[i],(!n.collapsed||r.aggregateCollapsed)&&(n.groups&&V(n.groups,t+1),r.aggregators.length&&(r.aggregateEmpty||n.rows.length||n.groups&&n.groups.length)&&H(n))}function z(e,t){t=t||0;for(var n,r=kt[t],i=r.collapsed,o=Nt[t],s=e.length;s--;)n=e[s],n.collapsed=i^o[n.groupingKey],n.title=r.formatter?r.formatter(n):n.value,n.groups&&(z(n.groups,t+1),n.rows=[])}function q(e,t){t=t||0;for(var n,r,i=kt[t],o=[],s=0,a=0,u=e.length;u>a;a++){if(r=e[a],o[s++]=r,!r.collapsed){n=r.groups?q(r.groups,t+1):r.rows;for(var l=0,c=n.length;c>l;l++)o[s++]=n[l]}r.totals&&i.displayTotalsRow&&(!r.collapsed||i.aggregateCollapsed)&&(o[s++]=r.totals)}return o}function U(e){var t=/^function[^(]*\(([^)]*)\)\s*{([\s\S]*)}$/,n=e.toString().match(t);return{params:n[1].split(","),body:n[2]}}function J(e){var t=U(e.accumulate),n=new Function("_items","for (var "+t.params[0]+", _i=0, _il=_items.length; _i<_il; _i++) {"+t.params[0]+" = _items[_i]; "+t.body+"}");return n.displayName=n.name="compiledAccumulatorLoop",n}function G(){var e=U(mt),t=e.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,t),n=n.replace(/\$item\$/gi,e.params[0]),n=n.replace(/\$args\$/gi,e.params[1]);var r=new Function("_items,_args",n);return r.displayName=r.name="compiledFilter",r}function K(){var e=U(mt),t=e.body.replace(/return false\s*([;}]|$)/gi,"{ continue _coreloop; }$1").replace(/return true\s*([;}]|$)/gi,"{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1").replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2"),n=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");n=n.replace(/\$filter\$/gi,t),n=n.replace(/\$item\$/gi,e.params[0]),n=n.replace(/\$args\$/gi,e.params[1]);var r=new Function("_items,_args,_cache",n);return r.displayName=r.name="compiledFilterWithCaching",r}function X(e,t){for(var n=[],r=0,i=0,o=e.length;o>i;i++)mt(e[i],t)&&(n[r++]=e[i]);return n}function Q(e,t,n){for(var r,i=[],o=0,s=0,a=e.length;a>s;s++)r=e[s],n[s]?i[o++]=r:mt(r,t)&&(i[o++]=r,n[s]=!0);return i}function Y(e){if(mt){var n=t.inlineFilters?at:X,r=t.inlineFilters?ut:Q;wt.isFilterNarrowing?Ct=n(Ct,st):wt.isFilterExpanding?Ct=r(e,st,Et):wt.isFilterUnchanged||(Ct=n(e,st))}else Ct=Tt?e:e.concat();var i;return Tt?(Ct.length<Dt*Tt&&(Dt=Math.floor(Ct.length/Tt)),i=Ct.slice(Tt*Dt,Tt*Dt+Tt)):i=Ct,{totalRows:Ct.length,rows:i}}function Z(e,t){var n,r,i,o=[],s=0,a=t.length;wt&&wt.ignoreDiffsBefore&&(s=Math.max(0,Math.min(t.length,wt.ignoreDiffsBefore))),wt&&wt.ignoreDiffsAfter&&(a=Math.min(t.length,Math.max(0,wt.ignoreDiffsAfter)));for(var u=s,l=e.length;a>u;u++)u>=l?o[o.length]=u:(n=t[u],r=e[u],(kt.length&&(i=n.__nonDataRow||r.__nonDataRow)&&n.__group!==r.__group||n.__group&&!n.equals(r)||i&&(n.__groupTotals||r.__groupTotals)||n[dt]!=r[dt]||gt&&gt[n[dt]])&&(o[o.length]=u));return o}function et(e){vt=null,(wt.isFilterNarrowing!=xt.isFilterNarrowing||wt.isFilterExpanding!=xt.isFilterExpanding)&&(Et=[]);var t=Y(e);Ot=t.totalRows;var n=t.rows;Rt=[],kt.length&&(Rt=W(n),Rt.length&&(V(Rt),z(Rt),n=q(Rt)));var r=Z(pt,n);return pt=n,r}function tt(){if(!bt){var e=pt.length,t=Ot,n=et(ft,mt);Tt&&Dt*Tt>Ot&&(Dt=Math.max(0,Math.ceil(Ot/Tt)-1),n=et(ft,mt)),gt=null,xt=wt,wt={},t!=Ot&&It.notify(d(),null,lt),e!=pt.length&&_t.notify({previous:e,current:pt.length},null,lt),n.length>0&&jt.notify({rows:n},null,lt)}}function nt(e,t){function n(){if(o.length>0){r=!0;var n=i.mapIdsToRows(o);t||(o=i.mapRowsToIds(n)),e.setSelectedRows(n),r=!1}}var r,i=this,o=i.mapRowsToIds(e.getSelectedRows());e.onSelectedRowsChanged.subscribe(function(){r||(o=i.mapRowsToIds(e.getSelectedRows()))}),this.onRowsChanged.subscribe(n),this.onRowCountChanged.subscribe(n)}function rt(e,t){function n(e){i={};for(var t in e){var n=pt[t][dt];i[n]=e[t]}}function r(){if(i){o=!0,C();var n={};for(var r in i){var s=vt[r];void 0!=s&&(n[s]=i[r])}e.setCellCssStyles(t,n),o=!1}}var i,o;n(e.getCellCssStyles(t)),e.onCellCssStylesChanged.subscribe(function(e,r){o||t==r.key&&r.hash&&n(r.hash)}),this.onRowsChanged.subscribe(r),this.onRowCountChanged.subscribe(r)}var it,ot,st,at,ut,lt=this,ct={groupItemMetadataProvider:null,inlineFilters:!1},dt="id",ft=[],pt=[],ht={},vt=null,mt=null,gt=null,bt=!1,yt=!0,wt={},xt={},Ct=[],Et=[],St={getter:null,formatter:null,comparer:function(e,t){return e.value-t.value},predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0},kt=[],Rt=[],Nt=[],At=":|:",Tt=0,Dt=0,Ot=0,_t=new Slick.Event,jt=new Slick.Event,It=new Slick.Event;t=e.extend(!0,{},ct,t),e.extend(this,{beginUpdate:n,endUpdate:r,setPagingOptions:c,getPagingInfo:d,getItems:u,setItems:l,setFilter:v,sort:f,fastSort:p,reSort:h,setGrouping:g,getGrouping:m,groupBy:b,setAggregators:y,collapseAllGroups:$,expandAllGroups:P,collapseGroup:B,expandGroup:M,getGroups:F,getIdxById:x,getRowById:E,getItemById:S,getItemByIdx:w,mapRowsToIds:R,mapIdsToRows:k,setRefreshHints:i,setFilterArgs:o,refresh:tt,updateItem:N,insertItem:A,addItem:T,deleteItem:D,syncGridSelection:nt,syncGridCellCssStyles:rt,getLength:O,getItem:_,getItemMetadata:j,onRowCountChanged:_t,onRowsChanged:jt,onPagingInfoChanged:It})}function n(e){this.field_=e,this.init=function(){this.count_=0,this.nonNullCount_=0,this.sum_=0},this.accumulate=function(e){var t=e[this.field_];this.count_++,null!=t&&""!==t&&0/0!==t&&(this.nonNullCount_++,this.sum_+=parseFloat(t))},this.storeResult=function(e){e.avg||(e.avg={}),0!=this.nonNullCount_&&(e.avg[this.field_]=this.sum_/this.nonNullCount_)}}function r(e){this.field_=e,this.init=function(){this.min_=null},this.accumulate=function(e){var t=e[this.field_];null!=t&&""!==t&&0/0!==t&&(null==this.min_||t<this.min_)&&(this.min_=t)},this.storeResult=function(e){e.min||(e.min={}),e.min[this.field_]=this.min_}}function i(e){this.field_=e,this.init=function(){this.max_=null},this.accumulate=function(e){var t=e[this.field_];null!=t&&""!==t&&0/0!==t&&(null==this.max_||t>this.max_)&&(this.max_=t)},this.storeResult=function(e){e.max||(e.max={}),e.max[this.field_]=this.max_}}function o(e){this.field_=e,this.init=function(){this.sum_=null},this.accumulate=function(e){var t=e[this.field_];null!=t&&""!==t&&0/0!==t&&(this.sum_+=parseFloat(t))},this.storeResult=function(e){e.sum||(e.sum={}),e.sum[this.field_]=this.sum_}}e.extend(!0,window,{Slick:{Data:{DataView:t,Aggregators:{Avg:n,Min:r,Max:i,Sum:o}}}})}(jQuery),define("slick.dataview",["slick.core"],function(){}),function(e){function t(t){function n(n){g=e.extend(!0,{},x,t),v=n,w.subscribe(v.onActiveCellChanged,i(f)),w.subscribe(v.onKeyDown,i(p)),w.subscribe(v.onClick,i(h))}function r(){w.unsubscribeAll()}function i(e){return function(){m||(m=!0,e.apply(this,arguments),m=!1)}}function o(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n].fromRow;r<=e[n].toRow;r++)t.push(r);return t}function s(e){for(var t=[],n=v.getColumns().length-1,r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],n));return t}function a(e,t){var n,r=[];for(n=e;t>=n;n++)r.push(n);for(n=t;e>n;n++)r.push(n);return r}function u(){return o(b)}function l(e){c(s(e))}function c(e){b=e,y.onSelectedRangesChanged.notify(b)}function d(){return b}function f(e,t){g.selectActiveRow&&null!=t.row&&c([new Slick.Range(t.row,0,t.row,v.getColumns().length-1)])}function p(e){var t=v.getActiveCell();if(t&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(38==e.which||40==e.which)){var n=u();n.sort(function(e,t){return e-t}),n.length||(n=[t.row]);var r,i=n[0],o=n[n.length-1];r=40==e.which?t.row<o||i==o?++o:++i:t.row<o?--o:--i,r>=0&&r<v.getDataLength()&&(v.scrollRowIntoView(r),b=s(a(i,o)),c(b)),e.preventDefault(),e.stopPropagation()}}function h(t){var n=v.getCellFromEvent(t);if(!n||!v.canCellBeActive(n.row,n.cell))return!1;var r=o(b),i=e.inArray(n.row,r);if(!(t.ctrlKey||t.shiftKey||t.metaKey))return!1;if(v.getOptions().multiSelect)if(-1===i&&(t.ctrlKey||t.metaKey))r.push(n.row),v.setActiveCell(n.row,n.cell);else if(-1!==i&&(t.ctrlKey||t.metaKey))r=e.grep(r,function(e){return e!==n.row}),v.setActiveCell(n.row,n.cell);else if(r.length&&t.shiftKey){var a=r.pop(),u=Math.min(n.row,a),l=Math.max(n.row,a);r=[];for(var d=u;l>=d;d++)d!==a&&r.push(d);r.push(a),v.setActiveCell(n.row,n.cell)}return b=s(r),c(b),t.stopImmediatePropagation(),!0}var v,m,g,b=[],y=this,w=new Slick.EventHandler,x={selectActiveRow:!0};e.extend(this,{getSelectedRows:u,setSelectedRows:l,getSelectedRanges:d,setSelectedRanges:c,init:n,destroy:r,onSelectedRangesChanged:new Slick.Event})
}e.extend(!0,window,{Slick:{RowSelectionModel:t}})}(jQuery),define("slick.rowselectionmodel",["slick.core"],function(){}),function(e){e.fn.drag=function(t,n,r){var i="string"==typeof t?t:"",o=e.isFunction(t)?t:e.isFunction(n)?n:null;return 0!==i.indexOf("drag")&&(i="drag"+i),r=(t==o?n:r)||{},o?this.bind(i,r,o):this.trigger(i)};var t=e.event,n=t.special,r=n.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(t){var n=e.data(this,r.datakey),i=t.data||{};n.related+=1,e.each(r.defaults,function(e){void 0!==i[e]&&(n[e]=i[e])})},remove:function(){e.data(this,r.datakey).related-=1},setup:function(){if(!e.data(this,r.datakey)){var n=e.extend({related:0},r.defaults);e.data(this,r.datakey,n),t.add(this,"touchstart mousedown",r.init,n),this.attachEvent&&this.attachEvent("ondragstart",r.dontstart)}},teardown:function(){var n=e.data(this,r.datakey)||{};n.related||(e.removeData(this,r.datakey),t.remove(this,"touchstart mousedown",r.init),r.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",r.dontstart))},init:function(i){if(!r.touched){var o,s=i.data;if(!(0!=i.which&&s.which>0&&i.which!=s.which||e(i.target).is(s.not)||s.handle&&!e(i.target).closest(s.handle,i.currentTarget).length||(r.touched="touchstart"==i.type?this:null,s.propagates=1,s.mousedown=this,s.interactions=[r.interaction(this,s)],s.target=i.target,s.pageX=i.pageX,s.pageY=i.pageY,s.dragging=null,o=r.hijack(i,"draginit",s),!s.propagates)))return o=r.flatten(o),o&&o.length&&(s.interactions=[],e.each(o,function(){s.interactions.push(r.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&n.drop&&n.drop.handler(i,s),r.textselect(!1),r.touched?t.add(r.touched,"touchmove touchend",r.handler,s):t.add(document,"mousemove mouseup",r.handler,s),!r.touched||s.live?!1:void 0}},interaction:function(t,n){var i=e(t)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:t,callback:new r.callback,droppable:[],offset:i}},handler:function(i){var o=i.data;switch(i.type){case!o.dragging&&"touchmove":i.preventDefault();case!o.dragging&&"mousemove":if(Math.pow(i.pageX-o.pageX,2)+Math.pow(i.pageY-o.pageY,2)<Math.pow(o.distance,2))break;i.target=o.target,r.hijack(i,"dragstart",o),o.propagates&&(o.dragging=!0);case"touchmove":i.preventDefault();case"mousemove":if(o.dragging){if(r.hijack(i,"drag",o),o.propagates){o.drop!==!1&&n.drop&&n.drop.handler(i,o);break}i.type="mouseup"}case"touchend":case"mouseup":default:r.touched?t.remove(r.touched,"touchmove touchend",r.handler):t.remove(document,"mousemove mouseup",r.handler),o.dragging&&(o.drop!==!1&&n.drop&&n.drop.handler(i,o),r.hijack(i,"dragend",o)),r.textselect(!0),o.click===!1&&o.dragging&&e.data(o.mousedown,"suppress.click",(new Date).getTime()+5),o.dragging=r.touched=!1}},hijack:function(n,i,o,s,a){if(o){var u,l,c,d={event:n.originalEvent,type:n.type},f=i.indexOf("drop")?"drag":"drop",p=s||0,h=isNaN(s)?o.interactions.length:s;n.type=i,n.originalEvent=null,o.results=[];do if(l=o.interactions[p]){if("dragend"!==i&&l.cancelled)continue;c=r.properties(n,o,l),l.results=[],e(a||l[f]||o.droppable).each(function(s,a){return c.target=a,n.isPropagationStopped=function(){return!1},u=a?t.dispatch.call(a,n,c):null,u===!1?("drag"==f&&(l.cancelled=!0,o.propagates-=1),"drop"==i&&(l[f][s]=null)):"dropinit"==i&&l.droppable.push(r.element(u)||a),"dragstart"==i&&(l.proxy=e(r.element(u)||l.drag)[0]),l.results.push(u),delete n.result,"dropinit"!==i?u:void 0}),o.results[p]=r.flatten(l.results),"dropinit"==i&&(l.droppable=r.flatten(l.droppable)),"dragstart"!=i||l.cancelled||c.update()}while(++p<h);return n.type=d.type,n.originalEvent=d.event,r.flatten(o.results)}},properties:function(e,t,n){var i=n.callback;return i.drag=n.drag,i.proxy=n.proxy||n.drag,i.startX=t.pageX,i.startY=t.pageY,i.deltaX=e.pageX-t.pageX,i.deltaY=e.pageY-t.pageY,i.originalX=n.offset.left,i.originalY=n.offset.top,i.offsetX=i.originalX+i.deltaX,i.offsetY=i.originalY+i.deltaY,i.drop=r.flatten((n.drop||[]).slice()),i.available=r.flatten((n.droppable||[]).slice()),i},element:function(e){return e&&(e.jquery||1==e.nodeType)?e:void 0},flatten:function(t){return e.map(t,function(t){return t&&t.jquery?e.makeArray(t):t&&t.length?r.flatten(t):t})},textselect:function(t){e(document)[t?"unbind":"bind"]("selectstart",r.dontstart).css("MozUserSelect",t?"":"none"),document.unselectable=t?"off":"on"},dontstart:function(){return!1},callback:function(){}};r.callback.prototype={update:function(){n.drop&&this.available.length&&e.each(this.available,function(e){n.drop.locate(this,e)})}};var i=t.dispatch;t.dispatch=function(t){return e.data(this,"suppress."+t.type)-(new Date).getTime()>0?(e.removeData(this,"suppress."+t.type),void 0):i.apply(this,arguments)};var o=t.fixHooks.touchstart=t.fixHooks.touchmove=t.fixHooks.touchend=t.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(t,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&e.each(o.props,function(e,n){t[n]=r[n]})}return t}};n.draginit=n.dragstart=n.dragend=r}(jQuery),define("jquery.event.drag",["jQuery"],function(){}),"undefined"==typeof jQuery)throw"SlickGrid requires jquery module to be loaded";if(!jQuery.fn.drag)throw"SlickGrid requires jquery.event.drag module to be loaded";if("undefined"==typeof Slick)throw"slick.core.js not loaded";!function($){function SlickGrid(container,data,columns,options){function init(){if($container=$(container),$container.length<1)throw new Error("SlickGrid requires a valid container, "+container+" does not exist in the DOM.");maxSupportedCssHeight=maxSupportedCssHeight||getMaxSupportedCssHeight(),scrollbarDimensions=scrollbarDimensions||measureScrollbar(),options=$.extend({},defaults,options),validateAndEnforceOptions(),columnDefaults.width=options.defaultColumnWidth,columnsById={};for(var e=0;e<columns.length;e++){var t=columns[e]=$.extend({},columnDefaults,columns[e]);columnsById[t.id]=e,t.minWidth&&t.width<t.minWidth&&(t.width=t.minWidth),t.maxWidth&&t.width>t.maxWidth&&(t.width=t.maxWidth)}if(options.enableColumnReorder&&!$.fn.sortable)throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded");editController={commitCurrentEdit:commitCurrentEdit,cancelCurrentEdit:cancelCurrentEdit},$container.empty().css("overflow","hidden").css("outline",0).addClass(uid).addClass("ui-widget"),/relative|absolute|fixed/.test($container.css("position"))||$container.css("position","relative"),$focusSink=$("<div tabIndex='0' hideFocus style='position:fixed;width:0;height:0;top:0;left:0;outline:0;'></div>").appendTo($container),$headerScroller=$("<div class='slick-header ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headers=$("<div class='slick-header-columns' style='left:-1000px' />").appendTo($headerScroller),$headers.width(getHeadersWidth()),$headerRowScroller=$("<div class='slick-headerrow ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$headerRow=$("<div class='slick-headerrow-columns' />").appendTo($headerRowScroller),$headerRowSpacer=$("<div style='display:block;height:1px;position:absolute;top:0;left:0;'></div>").css("width",getCanvasWidth()+scrollbarDimensions.width+"px").appendTo($headerRowScroller),$topPanelScroller=$("<div class='slick-top-panel-scroller ui-state-default' style='overflow:hidden;position:relative;' />").appendTo($container),$topPanel=$("<div class='slick-top-panel' style='width:10000px' />").appendTo($topPanelScroller),options.showTopPanel||$topPanelScroller.hide(),options.showHeaderRow||$headerRowScroller.hide(),$viewport=$("<div class='slick-viewport' style='width:100%;overflow:auto;outline:0;position:relative;;'>").appendTo($container),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),$canvas=$("<div class='grid-canvas' />").appendTo($viewport),$focusSink2=$focusSink.clone().appendTo($container),options.explicitInitialization||finishInitialization()}function finishInitialization(){initialized||(initialized=!0,viewportW=parseFloat($.css($container[0],"width",!0)),measureCellPaddingAndBorder(),disableSelection($headers),options.enableTextSelectionOnCells||$viewport.bind("selectstart.ui",function(e){return $(e.target).is("input,textarea")}),updateColumnCaches(),createColumnHeaders(),setupColumnSort(),createCssRules(),resizeCanvas(),bindAncestorScrollEvents(),$container.bind("resize.slickgrid",resizeCanvas),$viewport.bind("click",handleClick).bind("scroll",handleScroll),$headerScroller.bind("contextmenu",handleHeaderContextMenu).bind("click",handleHeaderClick).delegate(".slick-header-column","mouseenter",handleHeaderMouseEnter).delegate(".slick-header-column","mouseleave",handleHeaderMouseLeave),$headerRowScroller.bind("scroll",handleHeaderRowScroll),$focusSink.add($focusSink2).bind("keydown",handleKeyDown),$canvas.bind("keydown",handleKeyDown).bind("click",handleClick).bind("dblclick",handleDblClick).bind("contextmenu",handleContextMenu).bind("draginit",handleDragInit).bind("dragstart",{distance:3},handleDragStart).bind("drag",handleDrag).bind("dragend",handleDragEnd).delegate(".slick-cell","mouseenter",handleMouseEnter).delegate(".slick-cell","mouseleave",handleMouseLeave))}function registerPlugin(e){plugins.unshift(e),e.init(self)}function unregisterPlugin(e){for(var t=plugins.length;t>=0;t--)if(plugins[t]===e){plugins[t].destroy&&plugins[t].destroy(),plugins.splice(t,1);break}}function setSelectionModel(e){selectionModel&&(selectionModel.onSelectedRangesChanged.unsubscribe(handleSelectedRangesChanged),selectionModel.destroy&&selectionModel.destroy()),selectionModel=e,selectionModel&&(selectionModel.init(self),selectionModel.onSelectedRangesChanged.subscribe(handleSelectedRangesChanged))}function getSelectionModel(){return selectionModel}function getCanvasNode(){return $canvas[0]}function measureScrollbar(){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body"),t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t}function getHeadersWidth(){for(var e=0,t=0,n=columns.length;n>t;t++){var r=columns[t].width;e+=r}return e+=scrollbarDimensions.width,Math.max(e,viewportW)+1e3}function getCanvasWidth(){for(var e=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW,t=0,n=columns.length;n--;)t+=columns[n].width;return options.fullWidthRows?Math.max(t,e):t}function updateCanvasWidth(e){var t=canvasWidth;canvasWidth=getCanvasWidth(),canvasWidth!=t&&($canvas.width(canvasWidth),$headerRow.width(canvasWidth),$headers.width(getHeadersWidth()),viewportHasHScroll=canvasWidth>viewportW-scrollbarDimensions.width),$headerRowSpacer.width(canvasWidth+(viewportHasVScroll?scrollbarDimensions.width:0)),(canvasWidth!=t||e)&&applyColumnWidths()}function disableSelection(e){e&&e.jquery&&e.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function getMaxSupportedCssHeight(){for(var e=1e6,t=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,n=$("<div style='display:none' />").appendTo(document.body);;){var r=2*e;if(n.css("height",r),r>t||n.height()!==r)break;e=r}return n.remove(),e}function bindAncestorScrollEvents(){for(var e=$canvas[0];(e=e.parentNode)!=document.body&&null!=e;)if(e==$viewport[0]||e.scrollWidth!=e.clientWidth||e.scrollHeight!=e.clientHeight){var t=$(e);$boundAncestors=$boundAncestors?$boundAncestors.add(t):t,t.bind("scroll."+uid,handleActiveCellPositionChange)}}function unbindAncestorScrollEvents(){$boundAncestors&&($boundAncestors.unbind("scroll."+uid),$boundAncestors=null)}function updateColumnHeader(e,t,n){if(initialized){var r=getColumnIndex(e);if(null!=r){var i=columns[r],o=$headers.children().eq(r);o&&(void 0!==t&&(columns[r].name=t),void 0!==n&&(columns[r].toolTip=n),trigger(self.onBeforeHeaderCellDestroy,{node:o[0],column:i}),o.attr("title",n||"").children().eq(0).html(t),trigger(self.onHeaderCellRendered,{node:o[0],column:i}))}}}function getHeaderRow(){return $headerRow[0]}function getHeaderRowColumn(e){var t=getColumnIndex(e),n=$headerRow.children().eq(t);return n&&n[0]}function createColumnHeaders(){function e(){$(this).addClass("ui-state-hover")}function t(){$(this).removeClass("ui-state-hover")}$headers.find(".slick-header-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderCellDestroy,{node:this,column:e})}),$headers.empty(),$headers.width(getHeadersWidth()),$headerRow.find(".slick-headerrow-column").each(function(){var e=$(this).data("column");e&&trigger(self.onBeforeHeaderRowCellDestroy,{node:this,column:e})}),$headerRow.empty();for(var n=0;n<columns.length;n++){var r=columns[n],i=$("<div class='ui-state-default slick-header-column' />").html("<span class='slick-column-name'>"+r.name+"</span>").width(r.width-headerColumnWidthDiff).attr("id",""+uid+r.id).attr("title",r.toolTip||"").data("column",r).addClass(r.headerCssClass||"").appendTo($headers);if((options.enableColumnReorder||r.sortable)&&i.on("mouseenter",e).on("mouseleave",t),r.sortable&&(i.addClass("slick-header-sortable"),i.append("<span class='slick-sort-indicator' />")),trigger(self.onHeaderCellRendered,{node:i[0],column:r}),options.showHeaderRow){var o=$("<div class='ui-state-default slick-headerrow-column l"+n+" r"+n+"'></div>").data("column",r).appendTo($headerRow);trigger(self.onHeaderRowCellRendered,{node:o[0],column:r})}}setSortColumns(sortColumns),setupColumnResize(),options.enableColumnReorder&&setupColumnReorder()}function setupColumnSort(){$headers.click(function(e){if(e.metaKey=e.metaKey||e.ctrlKey,!$(e.target).hasClass("slick-resizable-handle")){var t=$(e.target).closest(".slick-header-column");if(t.length){var n=t.data("column");if(n.sortable){if(!getEditorLock().commitCurrentEdit())return;for(var r=null,i=0;i<sortColumns.length;i++)if(sortColumns[i].columnId==n.id){r=sortColumns[i],r.sortAsc=!r.sortAsc;break}e.metaKey&&options.multiColumnSort?r&&sortColumns.splice(i,1):((e.shiftKey||e.metaKey)&&options.multiColumnSort||(sortColumns=[]),r?0==sortColumns.length&&sortColumns.push(r):(r={columnId:n.id,sortAsc:n.defaultSortAsc},sortColumns.push(r))),setSortColumns(sortColumns),options.multiColumnSort?trigger(self.onSort,{multiColumnSort:!0,sortCols:$.map(sortColumns,function(e){return{sortCol:columns[getColumnIndex(e.columnId)],sortAsc:e.sortAsc}})},e):trigger(self.onSort,{multiColumnSort:!1,sortCol:n,sortAsc:r.sortAsc},e)}}}})}function setupColumnReorder(){$headers.filter(":ui-sortable").sortable("destroy"),$headers.sortable({containment:"parent",distance:3,axis:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder ui-state-default slick-header-column",start:function(e,t){t.placeholder.width(t.helper.outerWidth()-headerColumnWidthDiff),$(t.helper).addClass("slick-header-column-active")},beforeStop:function(e,t){$(t.helper).removeClass("slick-header-column-active")},stop:function(e){if(!getEditorLock().commitCurrentEdit())return $(this).sortable("cancel"),void 0;for(var t=$headers.sortable("toArray"),n=[],r=0;r<t.length;r++)n.push(columns[getColumnIndex(t[r].replace(uid,""))]);setColumns(n),trigger(self.onColumnsReordered,{}),e.stopPropagation(),setupColumnResize()}})}function setupColumnResize(){var e,t,n,r,i,o,s,a,u;i=$headers.children(),i.find(".slick-resizable-handle").remove(),i.each(function(e){columns[e].resizable&&(void 0===a&&(a=e),u=e)}),void 0!==a&&i.each(function(l,c){a>l||options.forceFitColumns&&l>=u||(e=$(c),$("<div class='slick-resizable-handle' />").appendTo(c).bind("dragstart",function(e){if(!getEditorLock().commitCurrentEdit())return!1;r=e.pageX,$(this).parent().addClass("slick-header-column-active");var a=null,u=null;if(i.each(function(e,t){columns[e].previousWidth=$(t).outerWidth()}),options.forceFitColumns)for(a=0,u=0,t=l+1;t<i.length;t++)n=columns[t],n.resizable&&(null!==u&&(n.maxWidth?u+=n.maxWidth-n.previousWidth:u=null),a+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));var c=0,d=0;for(t=0;l>=t;t++)n=columns[t],n.resizable&&(null!==d&&(n.maxWidth?d+=n.maxWidth-n.previousWidth:d=null),c+=n.previousWidth-Math.max(n.minWidth||0,absoluteColumnMinWidth));null===a&&(a=1e5),null===c&&(c=1e5),null===u&&(u=1e5),null===d&&(d=1e5),s=r+Math.min(a,d),o=r-Math.min(c,u)}).bind("drag",function(e){var a,u,c=Math.min(s,Math.max(o,e.pageX))-r;if(0>c){for(u=c,t=l;t>=0;t--)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),u&&n.previousWidth+u<a?(u+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-c,t=l+1;t<i.length;t++)n=columns[t],n.resizable&&(u&&n.maxWidth&&n.maxWidth-n.previousWidth<u?(u-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+u,u=0))}else{for(u=c,t=l;t>=0;t--)n=columns[t],n.resizable&&(u&&n.maxWidth&&n.maxWidth-n.previousWidth<u?(u-=n.maxWidth-n.previousWidth,n.width=n.maxWidth):(n.width=n.previousWidth+u,u=0));if(options.forceFitColumns)for(u=-c,t=l+1;t<i.length;t++)n=columns[t],n.resizable&&(a=Math.max(n.minWidth||0,absoluteColumnMinWidth),u&&n.previousWidth+u<a?(u+=n.previousWidth-a,n.width=a):(n.width=n.previousWidth+u,u=0))}applyColumnHeaderWidths(),options.syncColumnCellResize&&applyColumnWidths()}).bind("dragend",function(){var e;for($(this).parent().removeClass("slick-header-column-active"),t=0;t<i.length;t++)n=columns[t],e=$(i[t]).outerWidth(),n.previousWidth!==e&&n.rerenderOnResize&&invalidateAllRows();updateCanvasWidth(!0),render(),trigger(self.onColumnsResized,{})}))})}function getVBoxDelta(e){var t=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],n=0;return $.each(t,function(t,r){n+=parseFloat(e.css(r))||0}),n}function measureCellPaddingAndBorder(){var e,t=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],n=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];e=$("<div class='ui-state-default slick-header-column' style='visibility:hidden'>-</div>").appendTo($headers),headerColumnWidthDiff=headerColumnHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){headerColumnWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){headerColumnHeightDiff+=parseFloat(e.css(n))||0})),e.remove();var r=$("<div class='slick-row' />").appendTo($canvas);e=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(r),cellWidthDiff=cellHeightDiff=0,"border-box"!=e.css("box-sizing")&&"border-box"!=e.css("-moz-box-sizing")&&"border-box"!=e.css("-webkit-box-sizing")&&($.each(t,function(t,n){cellWidthDiff+=parseFloat(e.css(n))||0}),$.each(n,function(t,n){cellHeightDiff+=parseFloat(e.css(n))||0})),r.remove(),absoluteColumnMinWidth=Math.max(headerColumnWidthDiff,cellWidthDiff)}function createCssRules(){$style=$("<style type='text/css' rel='stylesheet' />").appendTo($("head"));for(var e=options.rowHeight-cellHeightDiff,t=["."+uid+" .slick-header-column { left: 1000px; }","."+uid+" .slick-top-panel { height:"+options.topPanelHeight+"px; }","."+uid+" .slick-headerrow-columns { height:"+options.headerRowHeight+"px; }","."+uid+" .slick-cell { height:"+e+"px; }","."+uid+" .slick-row { height:"+options.rowHeight+"px; }"],n=0;n<columns.length;n++)t.push("."+uid+" .l"+n+" { }"),t.push("."+uid+" .r"+n+" { }");$style[0].styleSheet?$style[0].styleSheet.cssText=t.join(" "):$style[0].appendChild(document.createTextNode(t.join(" ")))}function getColumnCssRules(e){if(!stylesheet){for(var t=document.styleSheets,n=0;n<t.length;n++)if((t[n].ownerNode||t[n].owningElement)==$style[0]){stylesheet=t[n];break}if(!stylesheet)throw new Error("Cannot find stylesheet.");columnCssRulesL=[],columnCssRulesR=[];for(var r,i,o=stylesheet.cssRules||stylesheet.rules,n=0;n<o.length;n++){var s=o[n].selectorText;(r=/\.l\d+/.exec(s))?(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesL[i]=o[n]):(r=/\.r\d+/.exec(s))&&(i=parseInt(r[0].substr(2,r[0].length-2),10),columnCssRulesR[i]=o[n])}}return{left:columnCssRulesL[e],right:columnCssRulesR[e]}}function removeCssRules(){$style.remove(),stylesheet=null}function destroy(){getEditorLock().cancelCurrentEdit(),trigger(self.onBeforeDestroy,{});for(var e=plugins.length;e--;)unregisterPlugin(plugins[e]);options.enableColumnReorder&&$headers.filter(":ui-sortable").sortable("destroy"),unbindAncestorScrollEvents(),$container.unbind(".slickgrid"),removeCssRules(),$canvas.unbind("draginit dragstart dragend drag"),$container.empty().removeClass(uid)}function trigger(e,t,n){return n=n||new Slick.EventData,t=t||{},t.grid=self,e.notify(t,n,self)}function getEditorLock(){return options.editorLock}function getEditController(){return editController}function getColumnIndex(e){return columnsById[e]}function autosizeColumns(){var e,t,n,r=[],i=0,o=0,s=viewportHasVScroll?viewportW-scrollbarDimensions.width:viewportW;for(e=0;e<columns.length;e++)t=columns[e],r.push(t.width),o+=t.width,t.resizable&&(i+=t.width-Math.max(t.minWidth,absoluteColumnMinWidth));for(n=o;o>s&&i;){var a=(o-s)/i;for(e=0;e<columns.length&&o>s;e++){t=columns[e];var u=r[e];if(!(!t.resizable||u<=t.minWidth||absoluteColumnMinWidth>=u)){var l=Math.max(t.minWidth,absoluteColumnMinWidth),c=Math.floor(a*(u-l))||1;c=Math.min(c,u-l),o-=c,i-=c,r[e]-=c}}if(n==o)break;n=o}for(n=o;s>o;){var d=s/o;for(e=0;e<columns.length&&s>o;e++)if(t=columns[e],t.resizable&&!(t.maxWidth<=t.width)){var f=Math.min(Math.floor(d*t.width)-t.width,t.maxWidth-t.width||1e6)||1;o+=f,r[e]+=f}if(n==o)break;n=o}var p=!1;for(e=0;e<columns.length;e++)columns[e].rerenderOnResize&&columns[e].width!=r[e]&&(p=!0),columns[e].width=r[e];applyColumnHeaderWidths(),updateCanvasWidth(!0),p&&(invalidateAllRows(),render())}function applyColumnHeaderWidths(){if(initialized){for(var e,t=0,n=$headers.children(),r=n.length;r>t;t++)e=$(n[t]),e.width()!==columns[t].width-headerColumnWidthDiff&&e.width(columns[t].width-headerColumnWidthDiff);updateColumnCaches()}}function applyColumnWidths(){for(var e,t,n=0,r=0;r<columns.length;r++)e=columns[r].width,t=getColumnCssRules(r),t.left.style.left=n+"px",t.right.style.right=canvasWidth-n-e+"px",n+=columns[r].width}function setSortColumn(e,t){setSortColumns([{columnId:e,sortAsc:t}])}function setSortColumns(e){sortColumns=e;var t=$headers.children();t.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc"),$.each(sortColumns,function(e,n){null==n.sortAsc&&(n.sortAsc=!0);var r=getColumnIndex(n.columnId);null!=r&&t.eq(r).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(n.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")})}function getSortColumns(){return sortColumns}function handleSelectedRangesChanged(e,t){selectedRows=[];for(var n={},r=0;r<t.length;r++)for(var i=t[r].fromRow;i<=t[r].toRow;i++){n[i]||(selectedRows.push(i),n[i]={});for(var o=t[r].fromCell;o<=t[r].toCell;o++)canCellBeSelected(i,o)&&(n[i][columns[o].id]=options.selectedCellCssClass)}setCellCssStyles(options.selectedCellCssClass,n),trigger(self.onSelectedRowsChanged,{rows:getSelectedRows()},e)}function getColumns(){return columns}function updateColumnCaches(){columnPosLeft=[],columnPosRight=[];for(var e=0,t=0,n=columns.length;n>t;t++)columnPosLeft[t]=e,columnPosRight[t]=e+columns[t].width,e+=columns[t].width}function setColumns(e){columns=e,columnsById={};for(var t=0;t<columns.length;t++){var n=columns[t]=$.extend({},columnDefaults,columns[t]);columnsById[n.id]=t,n.minWidth&&n.width<n.minWidth&&(n.width=n.minWidth),n.maxWidth&&n.width>n.maxWidth&&(n.width=n.maxWidth)}updateColumnCaches(),initialized&&(invalidateAllRows(),createColumnHeaders(),removeCssRules(),createCssRules(),resizeCanvas(),applyColumnWidths(),handleScroll())}function getOptions(){return options}function setOptions(e){getEditorLock().commitCurrentEdit()&&(makeActiveCellNormal(),options.enableAddRow!==e.enableAddRow&&invalidateRow(getDataLength()),options=$.extend(options,e),validateAndEnforceOptions(),$viewport.css("overflow-y",options.autoHeight?"hidden":"auto"),render())}function validateAndEnforceOptions(){options.autoHeight&&(options.leaveSpaceForNewRows=!1)}function setData(e,t){data=e,invalidateAllRows(),updateRowCount(),t&&scrollTo(0)}function getData(){return data}function getDataLength(){return data.getLength?data.getLength():data.length}function getDataLengthIncludingAddNew(){return getDataLength()+(options.enableAddRow?1:0)}function getDataItem(e){return data.getItem?data.getItem(e):data[e]}function getTopPanel(){return $topPanel[0]}function setTopPanelVisibility(e){options.showTopPanel!=e&&(options.showTopPanel=e,e?$topPanelScroller.slideDown("fast",resizeCanvas):$topPanelScroller.slideUp("fast",resizeCanvas))}function setHeaderRowVisibility(e){options.showHeaderRow!=e&&(options.showHeaderRow=e,e?$headerRowScroller.slideDown("fast",resizeCanvas):$headerRowScroller.slideUp("fast",resizeCanvas))}function getContainerNode(){return $container.get(0)}function getRowTop(e){return options.rowHeight*e-offset}function getRowFromPosition(e){return Math.floor((e+offset)/options.rowHeight)}function scrollTo(e){e=Math.max(e,0),e=Math.min(e,th-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0));var t=offset;page=Math.min(n-1,Math.floor(e/ph)),offset=Math.round(page*cj);var r=e-offset;if(offset!=t){var i=getVisibleRange(r);cleanupRows(i),updateRowPositions()}prevScrollTop!=r&&(vScrollDir=r+offset>prevScrollTop+t?1:-1,$viewport[0].scrollTop=lastRenderedScrollTop=scrollTop=prevScrollTop=r,trigger(self.onViewportChanged,{}))}function defaultFormatter(e,t,n){return null==n?"":(n+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function getFormatter(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e),r=n&&n.columns&&(n.columns[t.id]||n.columns[getColumnIndex(t.id)]);return r&&r.formatter||n&&n.formatter||t.formatter||options.formatterFactory&&options.formatterFactory.getFormatter(t)||options.defaultFormatter}function getEditor(e,t){var n=columns[t],r=data.getItemMetadata&&data.getItemMetadata(e),i=r&&r.columns;return i&&i[n.id]&&void 0!==i[n.id].editor?i[n.id].editor:i&&i[t]&&void 0!==i[t].editor?i[t].editor:n.editor||options.editorFactory&&options.editorFactory.getEditor(n)}function getDataItemValueForColumn(e,t){return options.dataItemColumnValueExtractor?options.dataItemColumnValueExtractor(e,t):e[t.field]}function appendRowHtml(e,t,n,r){var i=getDataItem(t),o=r>t&&!i,s="slick-row"+(o?" loading":"")+(t===activeRow?" active":"")+(t%2==1?" odd":" even"),a=data.getItemMetadata&&data.getItemMetadata(t);a&&a.cssClasses&&(s+=" "+a.cssClasses),e.push("<div class='ui-widget-content "+s+"' style='top:"+getRowTop(t)+"px'>");for(var u,l,c=0,d=columns.length;d>c;c++){if(l=columns[c],u=1,a&&a.columns){var f=a.columns[l.id]||a.columns[c];u=f&&f.colspan||1,"*"===u&&(u=d-c)}if(columnPosRight[Math.min(d-1,c+u-1)]>n.leftPx){if(columnPosLeft[c]>n.rightPx)break;appendCellHtml(e,t,c,u,i)}u>1&&(c+=u-1)}e.push("</div>")}function appendCellHtml(e,t,n,r,i){var o=columns[n],s="slick-cell l"+n+" r"+Math.min(columns.length-1,n+r-1)+(o.cssClass?" "+o.cssClass:"");t===activeRow&&n===activeCell&&(s+=" active");for(var a in cellCssClasses)cellCssClasses[a][t]&&cellCssClasses[a][t][o.id]&&(s+=" "+cellCssClasses[a][t][o.id]);if(e.push("<div class='"+s+"'>"),i){var u=getDataItemValueForColumn(i,o);e.push(getFormatter(t,o)(t,n,u,o,i))}e.push("</div>"),rowsCache[t].cellRenderQueue.push(n),rowsCache[t].cellColSpans[n]=r}function cleanupRows(e){for(var t in rowsCache)(t=parseInt(t,10))!==activeRow&&(t<e.top||t>e.bottom)&&removeRowFromCache(t)}function invalidate(){updateRowCount(),invalidateAllRows(),render()}function invalidateAllRows(){currentEditor&&makeActiveCellNormal();for(var e in rowsCache)removeRowFromCache(e)}function removeRowFromCache(e){var t=rowsCache[e];t&&($canvas[0].removeChild(t.rowNode),delete rowsCache[e],delete postProcessedRows[e],renderedRows--,counter_rows_removed++)}function invalidateRows(e){var t,n;if(e&&e.length)for(vScrollDir=0,t=0,n=e.length;n>t;t++)currentEditor&&activeRow===e[t]&&makeActiveCellNormal(),rowsCache[e[t]]&&removeRowFromCache(e[t])}function invalidateRow(e){invalidateRows([e])}function updateCell(e,t){var n=getCellNode(e,t);if(n){var r=columns[t],i=getDataItem(e);currentEditor&&activeRow===e&&activeCell===t?currentEditor.loadValue(i):(n.innerHTML=i?getFormatter(e,r)(e,t,getDataItemValueForColumn(i,r),r,i):"",invalidatePostProcessingResults(e))}}function updateRow(e){var t=rowsCache[e];if(t){ensureCellNodesInRowsCache(e);var n=getDataItem(e);for(var r in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(r)){r=0|r;var i=columns[r],o=t.cellNodesByColumnIdx[r];e===activeRow&&r===activeCell&&currentEditor?currentEditor.loadValue(n):o.innerHTML=n?getFormatter(e,i)(e,r,getDataItemValueForColumn(n,i),i,n):""}invalidatePostProcessingResults(e)}}function getViewportHeight(){return parseFloat($.css($container[0],"height",!0))-parseFloat($.css($container[0],"paddingTop",!0))-parseFloat($.css($container[0],"paddingBottom",!0))-parseFloat($.css($headerScroller[0],"height"))-getVBoxDelta($headerScroller)-(options.showTopPanel?options.topPanelHeight+getVBoxDelta($topPanelScroller):0)-(options.showHeaderRow?options.headerRowHeight+getVBoxDelta($headerRowScroller):0)}function resizeCanvas(){initialized&&(viewportH=options.autoHeight?options.rowHeight*getDataLengthIncludingAddNew():getViewportHeight(),numVisibleRows=Math.ceil(viewportH/options.rowHeight),viewportW=parseFloat($.css($container[0],"width",!0)),options.autoHeight||$viewport.height(viewportH),options.forceFitColumns&&autosizeColumns(),updateRowCount(),handleScroll(),lastRenderedScrollLeft=-1,render())}function updateRowCount(){getDataLength();if(initialized){numberOfRows=getDataLengthIncludingAddNew()+(options.leaveSpaceForNewRows?numVisibleRows-1:0);var e=viewportHasVScroll;viewportHasVScroll=!options.autoHeight&&numberOfRows*options.rowHeight>viewportH;var t=getDataLengthIncludingAddNew()-1;for(var r in rowsCache)r>=t&&removeRowFromCache(r);activeCellNode&&activeRow>t&&resetActiveCell();var i=h;th=Math.max(options.rowHeight*numberOfRows,viewportH-scrollbarDimensions.height),maxSupportedCssHeight>th?(h=ph=th,n=1,cj=0):(h=maxSupportedCssHeight,ph=h/100,n=Math.floor(th/ph),cj=(th-h)/(n-1)),h!==i&&($canvas.css("height",h),scrollTop=$viewport[0].scrollTop);var o=th-viewportH>=scrollTop+offset;0==th||0==scrollTop?page=offset=0:o?scrollTo(scrollTop+offset):scrollTo(th-viewportH),h!=i&&options.autoHeight&&resizeCanvas(),options.forceFitColumns&&e!=viewportHasVScroll&&autosizeColumns(),updateCanvasWidth(!1)}}function getVisibleRange(e,t){return null==e&&(e=scrollTop),null==t&&(t=scrollLeft),{top:getRowFromPosition(e),bottom:getRowFromPosition(e+viewportH)+1,leftPx:t,rightPx:t+viewportW}}function getRenderedRange(e,t){var n=getVisibleRange(e,t),r=Math.round(viewportH/options.rowHeight),i=3;return-1==vScrollDir?(n.top-=r,n.bottom+=i):1==vScrollDir?(n.top-=i,n.bottom+=r):(n.top-=i,n.bottom+=i),n.top=Math.max(0,n.top),n.bottom=Math.min(getDataLengthIncludingAddNew()-1,n.bottom),n.leftPx-=viewportW,n.rightPx+=viewportW,n.leftPx=Math.max(0,n.leftPx),n.rightPx=Math.min(canvasWidth,n.rightPx),n}function ensureCellNodesInRowsCache(e){var t=rowsCache[e];if(t&&t.cellRenderQueue.length)for(var n=t.rowNode.lastChild;t.cellRenderQueue.length;){var r=t.cellRenderQueue.pop();t.cellNodesByColumnIdx[r]=n,n=n.previousSibling}}function cleanUpCells(e,t){var n=0,r=rowsCache[t],i=[];for(var o in r.cellNodesByColumnIdx)if(r.cellNodesByColumnIdx.hasOwnProperty(o)){o=0|o;var s=r.cellColSpans[o];(columnPosLeft[o]>e.rightPx||columnPosRight[Math.min(columns.length-1,o+s-1)]<e.leftPx)&&(t!=activeRow||o!=activeCell)&&i.push(o)}for(var a;null!=(a=i.pop());)r.rowNode.removeChild(r.cellNodesByColumnIdx[a]),delete r.cellColSpans[a],delete r.cellNodesByColumnIdx[a],postProcessedRows[t]&&delete postProcessedRows[t][a],n++
}function cleanUpAndRenderCells(e){for(var t,n,r,i=[],o=[],s=0,a=e.top,u=e.bottom;u>=a;a++)if(t=rowsCache[a]){ensureCellNodesInRowsCache(a),cleanUpCells(e,a),n=0;var l=data.getItemMetadata&&data.getItemMetadata(a);l=l&&l.columns;for(var c=getDataItem(a),d=0,f=columns.length;f>d&&!(columnPosLeft[d]>e.rightPx);d++)if(null==(r=t.cellColSpans[d])){if(r=1,l){var p=l[columns[d].id]||l[d];r=p&&p.colspan||1,"*"===r&&(r=f-d)}columnPosRight[Math.min(f-1,d+r-1)]>e.leftPx&&(appendCellHtml(i,a,d,r,c),n++),d+=r>1?r-1:0}else d+=r>1?r-1:0;n&&(s+=n,o.push(a))}if(i.length){var h=document.createElement("div");h.innerHTML=i.join("");for(var v,m;null!=(v=o.pop());){t=rowsCache[v];for(var g;null!=(g=t.cellRenderQueue.pop());)m=h.lastChild,t.rowNode.appendChild(m),t.cellNodesByColumnIdx[g]=m}}}function renderRows(e){for(var t=$canvas[0],n=[],r=[],i=!1,o=getDataLength(),s=e.top,a=e.bottom;a>=s;s++)rowsCache[s]||(renderedRows++,r.push(s),rowsCache[s]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},appendRowHtml(n,s,e,o),activeCellNode&&activeRow===s&&(i=!0),counter_rows_rendered++);if(r.length){var u=document.createElement("div");u.innerHTML=n.join("");for(var s=0,a=r.length;a>s;s++)rowsCache[r[s]].rowNode=t.appendChild(u.firstChild);i&&(activeCellNode=getCellNode(activeRow,activeCell))}}function startPostProcessing(){options.enableAsyncPostRender&&(clearTimeout(h_postrender),h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay))}function invalidatePostProcessingResults(e){delete postProcessedRows[e],postProcessFromRow=Math.min(postProcessFromRow,e),postProcessToRow=Math.max(postProcessToRow,e),startPostProcessing()}function updateRowPositions(){for(var e in rowsCache)rowsCache[e].rowNode.style.top=getRowTop(e)+"px"}function render(){if(initialized){var e=getVisibleRange(),t=getRenderedRange();cleanupRows(t),lastRenderedScrollLeft!=scrollLeft&&cleanUpAndRenderCells(t),renderRows(t),postProcessFromRow=e.top,postProcessToRow=Math.min(getDataLengthIncludingAddNew()-1,e.bottom),startPostProcessing(),lastRenderedScrollTop=scrollTop,lastRenderedScrollLeft=scrollLeft,h_render=null}}function handleHeaderRowScroll(){var e=$headerRowScroller[0].scrollLeft;e!=$viewport[0].scrollLeft&&($viewport[0].scrollLeft=e)}function handleScroll(){scrollTop=$viewport[0].scrollTop,scrollLeft=$viewport[0].scrollLeft;var e=Math.abs(scrollTop-prevScrollTop),t=Math.abs(scrollLeft-prevScrollLeft);if(t&&(prevScrollLeft=scrollLeft,$headerScroller[0].scrollLeft=scrollLeft,$topPanelScroller[0].scrollLeft=scrollLeft,$headerRowScroller[0].scrollLeft=scrollLeft),e)if(vScrollDir=scrollTop>prevScrollTop?1:-1,prevScrollTop=scrollTop,viewportH>e)scrollTo(scrollTop+offset);else{var r=offset;page=h==viewportH?0:Math.min(n-1,Math.floor(scrollTop*((th-viewportH)/(h-viewportH))*(1/ph))),offset=Math.round(page*cj),r!=offset&&invalidateAllRows()}(t||e)&&(h_render&&clearTimeout(h_render),(Math.abs(lastRenderedScrollTop-scrollTop)>20||Math.abs(lastRenderedScrollLeft-scrollLeft)>20)&&(options.forceSyncScrolling||Math.abs(lastRenderedScrollTop-scrollTop)<viewportH&&Math.abs(lastRenderedScrollLeft-scrollLeft)<viewportW?render():h_render=setTimeout(render,50),trigger(self.onViewportChanged,{}))),trigger(self.onScroll,{scrollLeft:scrollLeft,scrollTop:scrollTop})}function asyncPostProcessRows(){for(;postProcessToRow>=postProcessFromRow;){var e=vScrollDir>=0?postProcessFromRow++:postProcessToRow--,t=rowsCache[e];if(t&&!(e>=getDataLength())){postProcessedRows[e]||(postProcessedRows[e]={}),ensureCellNodesInRowsCache(e);for(var n in t.cellNodesByColumnIdx)if(t.cellNodesByColumnIdx.hasOwnProperty(n)){n=0|n;var r=columns[n];if(r.asyncPostRender&&!postProcessedRows[e][n]){var i=t.cellNodesByColumnIdx[n];i&&r.asyncPostRender(i,e,getDataItem(e),r),postProcessedRows[e][n]=!0}}return h_postrender=setTimeout(asyncPostProcessRows,options.asyncPostRenderDelay),void 0}}}function updateCellCssStylesOnRenderedRows(e,t){var n,r,i,o;for(var s in rowsCache){if(o=t&&t[s],i=e&&e[s],o)for(r in o)i&&o[r]==i[r]||(n=getCellNode(s,getColumnIndex(r)),n&&$(n).removeClass(o[r]));if(i)for(r in i)o&&o[r]==i[r]||(n=getCellNode(s,getColumnIndex(r)),n&&$(n).addClass(i[r]))}}function addCellCssStyles(e,t){if(cellCssClasses[e])throw"addCellCssStyles: cell CSS hash with key '"+e+"' already exists.";cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,null),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function removeCellCssStyles(e){cellCssClasses[e]&&(updateCellCssStylesOnRenderedRows(null,cellCssClasses[e]),delete cellCssClasses[e],trigger(self.onCellCssStylesChanged,{key:e,hash:null}))}function setCellCssStyles(e,t){var n=cellCssClasses[e];cellCssClasses[e]=t,updateCellCssStylesOnRenderedRows(t,n),trigger(self.onCellCssStylesChanged,{key:e,hash:t})}function getCellCssStyles(e){return cellCssClasses[e]}function flashCell(e,t,n){function r(e){e&&setTimeout(function(){i.queue(function(){i.toggleClass(options.cellFlashingCssClass).dequeue(),r(e-1)})},n)}if(n=n||100,rowsCache[e]){var i=$(getCellNode(e,t));r(4)}}function handleDragInit(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragInit,t,e);return e.isImmediatePropagationStopped()?r:!1}function handleDragStart(e,t){var n=getCellFromEvent(e);if(!n||!cellExists(n.row,n.cell))return!1;var r=trigger(self.onDragStart,t,e);return e.isImmediatePropagationStopped()?r:!1}function handleDrag(e,t){return trigger(self.onDrag,t,e)}function handleDragEnd(e,t){trigger(self.onDragEnd,t,e)}function handleKeyDown(e){trigger(self.onKeyDown,{row:activeRow,cell:activeCell},e);var t=e.isImmediatePropagationStopped();if(!t)if(e.shiftKey||e.altKey||e.ctrlKey)9!=e.which||!e.shiftKey||e.ctrlKey||e.altKey||(t=navigatePrev());else if(27==e.which){if(!getEditorLock().isActive())return;cancelEditAndSetFocus()}else 34==e.which?(navigatePageDown(),t=!0):33==e.which?(navigatePageUp(),t=!0):37==e.which?t=navigateLeft():39==e.which?t=navigateRight():38==e.which?t=navigateUp():40==e.which?t=navigateDown():9==e.which?t=navigateNext():13==e.which&&(options.editable&&(currentEditor?activeRow===getDataLength()?navigateDown():commitEditAndSetFocus():getEditorLock().commitCurrentEdit()&&makeActiveCellEditable()),t=!0);if(t){e.stopPropagation(),e.preventDefault();try{e.originalEvent.keyCode=0}catch(n){}}}function handleClick(e){currentEditor||(e.target!=document.activeElement||$(e.target).hasClass("slick-cell"))&&setFocus();var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||activeCell==t.cell&&activeRow==t.row||!canCellBeActive(t.row,t.cell)||(!getEditorLock().isActive()||getEditorLock().commitCurrentEdit())&&(scrollRowIntoView(t.row,!1),setActiveCellInternal(getCellNode(t.row,t.cell))))}function handleContextMenu(e){var t=$(e.target).closest(".slick-cell",$canvas);0!==t.length&&(activeCellNode!==t[0]||null===currentEditor)&&trigger(self.onContextMenu,{},e)}function handleDblClick(e){var t=getCellFromEvent(e);!t||null!==currentEditor&&activeRow==t.row&&activeCell==t.cell||(trigger(self.onDblClick,{row:t.row,cell:t.cell},e),e.isImmediatePropagationStopped()||options.editable&&gotoCell(t.row,t.cell,!0))}function handleHeaderMouseEnter(e){trigger(self.onHeaderMouseEnter,{column:$(this).data("column")},e)}function handleHeaderMouseLeave(e){trigger(self.onHeaderMouseLeave,{column:$(this).data("column")},e)}function handleHeaderContextMenu(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");trigger(self.onHeaderContextMenu,{column:n},e)}function handleHeaderClick(e){var t=$(e.target).closest(".slick-header-column",".slick-header-columns"),n=t&&t.data("column");n&&trigger(self.onHeaderClick,{column:n},e)}function handleMouseEnter(e){trigger(self.onMouseEnter,{},e)}function handleMouseLeave(e){trigger(self.onMouseLeave,{},e)}function cellExists(e,t){return!(0>e||e>=getDataLength()||0>t||t>=columns.length)}function getCellFromPoint(e,t){for(var n=getRowFromPosition(t),r=0,i=0,o=0;o<columns.length&&e>i;o++)i+=columns[o].width,r++;return 0>r&&(r=0),{row:n,cell:r-1}}function getCellFromNode(e){var t=/l\d+/.exec(e.className);if(!t)throw"getCellFromNode: cannot get cell - "+e.className;return parseInt(t[0].substr(1,t[0].length-1),10)}function getRowFromNode(e){for(var t in rowsCache)if(rowsCache[t].rowNode===e)return 0|t;return null}function getCellFromEvent(e){var t=$(e.target).closest(".slick-cell",$canvas);if(!t.length)return null;var n=getRowFromNode(t[0].parentNode),r=getCellFromNode(t[0]);return null==n||null==r?null:{row:n,cell:r}}function getCellNodeBox(e,t){if(!cellExists(e,t))return null;for(var n=getRowTop(e),r=n+options.rowHeight-1,i=0,o=0;t>o;o++)i+=columns[o].width;var s=i+columns[t].width;return{top:n,left:i,bottom:r,right:s}}function resetActiveCell(){setActiveCellInternal(null,!1)}function setFocus(){-1==tabbingDirection?$focusSink[0].focus():$focusSink2[0].focus()}function scrollCellIntoView(e,t,n){scrollRowIntoView(e,n);var r=getColspan(e,t),i=columnPosLeft[t],o=columnPosRight[t+(r>1?r-1:0)],s=scrollLeft+viewportW;scrollLeft>i?($viewport.scrollLeft(i),handleScroll(),render()):o>s&&($viewport.scrollLeft(Math.min(i,o-$viewport[0].clientWidth)),handleScroll(),render())}function setActiveCellInternal(e,t){null!==activeCellNode&&(makeActiveCellNormal(),$(activeCellNode).removeClass("active"),rowsCache[activeRow]&&$(rowsCache[activeRow].rowNode).removeClass("active"));var n=activeCellNode!==e;activeCellNode=e,null!=activeCellNode?(activeRow=getRowFromNode(activeCellNode.parentNode),activeCell=activePosX=getCellFromNode(activeCellNode),null==t&&(t=activeRow==getDataLength()||options.autoEdit),$(activeCellNode).addClass("active"),$(rowsCache[activeRow].rowNode).addClass("active"),options.editable&&t&&isCellPotentiallyEditable(activeRow,activeCell)&&(clearTimeout(h_editorLoader),options.asyncEditorLoading?h_editorLoader=setTimeout(function(){makeActiveCellEditable()},options.asyncEditorLoadDelay):makeActiveCellEditable())):activeRow=activeCell=null,n&&trigger(self.onActiveCellChanged,getActiveCell())}function clearTextSelection(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}else if(window.getSelection){var t=window.getSelection();t&&t.removeAllRanges&&t.removeAllRanges()}}function isCellPotentiallyEditable(e,t){return e<getDataLength()&&!getDataItem(e)?!1:columns[t].cannotTriggerInsert&&e>=getDataLength()?!1:getEditor(e,t)?!0:!1}function makeActiveCellNormal(){if(currentEditor){if(trigger(self.onBeforeCellEditorDestroy,{editor:currentEditor}),currentEditor.destroy(),currentEditor=null,activeCellNode){var e=getDataItem(activeRow);if($(activeCellNode).removeClass("editable invalid"),e){var t=columns[activeCell],n=getFormatter(activeRow,t);activeCellNode.innerHTML=n(activeRow,activeCell,getDataItemValueForColumn(e,t),t,e),invalidatePostProcessingResults(activeRow)}}navigator.userAgent.toLowerCase().match(/msie/)&&clearTextSelection(),getEditorLock().deactivate(editController)}}function makeActiveCellEditable(e){if(activeCellNode){if(!options.editable)throw"Grid : makeActiveCellEditable : should never get called when options.editable is false";if(clearTimeout(h_editorLoader),isCellPotentiallyEditable(activeRow,activeCell)){var t=columns[activeCell],n=getDataItem(activeRow);if(trigger(self.onBeforeEditCell,{row:activeRow,cell:activeCell,item:n,column:t})===!1)return setFocus(),void 0;getEditorLock().activate(editController),$(activeCellNode).addClass("editable"),e||(activeCellNode.innerHTML=""),currentEditor=new(e||getEditor(activeRow,activeCell))({grid:self,gridPosition:absBox($container[0]),position:absBox(activeCellNode),container:activeCellNode,column:t,item:n||{},commitChanges:commitEditAndSetFocus,cancelChanges:cancelEditAndSetFocus}),n&&currentEditor.loadValue(n),serializedEditorValue=currentEditor.serializeValue(),currentEditor.position&&handleActiveCellPositionChange()}}}function commitEditAndSetFocus(){getEditorLock().commitCurrentEdit()&&(setFocus(),options.autoEdit&&navigateDown())}function cancelEditAndSetFocus(){getEditorLock().cancelCurrentEdit()&&setFocus()}function absBox(e){var t={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:$(e).outerWidth(),height:$(e).outerHeight(),visible:!0};t.bottom=t.top+t.height,t.right=t.left+t.width;for(var n=e.offsetParent;(e=e.parentNode)!=document.body;)t.visible&&e.scrollHeight!=e.offsetHeight&&"visible"!=$(e).css("overflowY")&&(t.visible=t.bottom>e.scrollTop&&t.top<e.scrollTop+e.clientHeight),t.visible&&e.scrollWidth!=e.offsetWidth&&"visible"!=$(e).css("overflowX")&&(t.visible=t.right>e.scrollLeft&&t.left<e.scrollLeft+e.clientWidth),t.left-=e.scrollLeft,t.top-=e.scrollTop,e===n&&(t.left+=e.offsetLeft,t.top+=e.offsetTop,n=e.offsetParent),t.bottom=t.top+t.height,t.right=t.left+t.width;return t}function getActiveCellPosition(){return absBox(activeCellNode)}function getGridPosition(){return absBox($container[0])}function handleActiveCellPositionChange(){if(activeCellNode&&(trigger(self.onActiveCellPositionChanged,{}),currentEditor)){var e=getActiveCellPosition();currentEditor.show&&currentEditor.hide&&(e.visible?currentEditor.show():currentEditor.hide()),currentEditor.position&&currentEditor.position(e)}}function getCellEditor(){return currentEditor}function getActiveCell(){return activeCellNode?{row:activeRow,cell:activeCell}:null}function getActiveCellNode(){return activeCellNode}function scrollRowIntoView(e,t){var n=e*options.rowHeight,r=(e+1)*options.rowHeight-viewportH+(viewportHasHScroll?scrollbarDimensions.height:0);(e+1)*options.rowHeight>scrollTop+viewportH+offset?(scrollTo(t?n:r),render()):e*options.rowHeight<scrollTop+offset&&(scrollTo(t?r:n),render())}function scrollRowToTop(e){scrollTo(e*options.rowHeight),render()}function scrollPage(e){var t=e*numVisibleRows;if(scrollTo((getRowFromPosition(scrollTop)+t)*options.rowHeight),render(),options.enableCellNavigation&&null!=activeRow){var n=activeRow+t;n>=getDataLengthIncludingAddNew()&&(n=getDataLengthIncludingAddNew()-1),0>n&&(n=0);for(var r=0,i=null,o=activePosX;activePosX>=r;)canCellBeActive(n,r)&&(i=r),r+=getColspan(n,r);null!==i?(setActiveCellInternal(getCellNode(n,i)),activePosX=o):resetActiveCell()}}function navigatePageDown(){scrollPage(1)}function navigatePageUp(){scrollPage(-1)}function getColspan(e,t){var n=data.getItemMetadata&&data.getItemMetadata(e);if(!n||!n.columns)return 1;var r=n.columns[columns[t].id]||n.columns[t],i=r&&r.colspan;return i="*"===i?columns.length-t:i||1}function findFirstFocusableCell(e){for(var t=0;t<columns.length;){if(canCellBeActive(e,t))return t;t+=getColspan(e,t)}return null}function findLastFocusableCell(e){for(var t=0,n=null;t<columns.length;)canCellBeActive(e,t)&&(n=t),t+=getColspan(e,t);return n}function gotoRight(e,t){if(t>=columns.length)return null;do t+=getColspan(e,t);while(t<columns.length&&!canCellBeActive(e,t));return t<columns.length?{row:e,cell:t,posX:t}:null}function gotoLeft(e,t){if(0>=t)return null;var n=findFirstFocusableCell(e);if(null===n||n>=t)return null;for(var r,i={row:e,cell:n,posX:n};;){if(r=gotoRight(i.row,i.cell,i.posX),!r)return null;if(r.cell>=t)return i;i=r}}function gotoDown(e,t,n){for(var r;;){if(++e>=getDataLengthIncludingAddNew())return null;for(r=t=0;n>=t;)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoUp(e,t,n){for(var r;;){if(--e<0)return null;for(r=t=0;n>=t;)r=t,t+=getColspan(e,t);if(canCellBeActive(e,r))return{row:e,cell:r,posX:n}}}function gotoNext(e,t,n){if(null==e&&null==t&&(e=t=n=0,canCellBeActive(e,t)))return{row:e,cell:t,posX:t};var r=gotoRight(e,t,n);if(r)return r;for(var i=null;++e<getDataLengthIncludingAddNew();)if(i=findFirstFocusableCell(e),null!==i)return{row:e,cell:i,posX:i};return null}function gotoPrev(e,t,n){if(null==e&&null==t&&(e=getDataLengthIncludingAddNew()-1,t=n=columns.length-1,canCellBeActive(e,t)))return{row:e,cell:t,posX:t};for(var r,i;!r&&!(r=gotoLeft(e,t,n));){if(--e<0)return null;t=0,i=findLastFocusableCell(e),null!==i&&(r={row:e,cell:i,posX:i})}return r}function navigateRight(){return navigate("right")}function navigateLeft(){return navigate("left")}function navigateDown(){return navigate("down")}function navigateUp(){return navigate("up")}function navigateNext(){return navigate("next")}function navigatePrev(){return navigate("prev")}function navigate(e){if(!options.enableCellNavigation)return!1;if(!activeCellNode&&"prev"!=e&&"next"!=e)return!1;if(!getEditorLock().commitCurrentEdit())return!0;setFocus();var t={up:-1,down:1,left:-1,right:1,prev:-1,next:1};tabbingDirection=t[e];var n={up:gotoUp,down:gotoDown,left:gotoLeft,right:gotoRight,prev:gotoPrev,next:gotoNext},r=n[e],i=r(activeRow,activeCell,activePosX);if(i){var o=i.row==getDataLength();return scrollCellIntoView(i.row,i.cell,!o),setActiveCellInternal(getCellNode(i.row,i.cell)),activePosX=i.posX,!0}return setActiveCellInternal(getCellNode(activeRow,activeCell)),!1}function getCellNode(e,t){return rowsCache[e]?(ensureCellNodesInRowsCache(e),rowsCache[e].cellNodesByColumnIdx[t]):null}function setActiveCell(e,t){initialized&&(e>getDataLength()||0>e||t>=columns.length||0>t||options.enableCellNavigation&&(scrollCellIntoView(e,t,!1),setActiveCellInternal(getCellNode(e,t),!1)))}function canCellBeActive(e,t){if(!options.enableCellNavigation||e>=getDataLengthIncludingAddNew()||0>e||t>=columns.length||0>t)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.focusable)return n.focusable;var r=n&&n.columns;return r&&r[columns[t].id]&&"boolean"==typeof r[columns[t].id].focusable?r[columns[t].id].focusable:r&&r[t]&&"boolean"==typeof r[t].focusable?r[t].focusable:columns[t].focusable}function canCellBeSelected(e,t){if(e>=getDataLength()||0>e||t>=columns.length||0>t)return!1;var n=data.getItemMetadata&&data.getItemMetadata(e);if(n&&"boolean"==typeof n.selectable)return n.selectable;var r=n&&n.columns&&(n.columns[columns[t].id]||n.columns[t]);return r&&"boolean"==typeof r.selectable?r.selectable:columns[t].selectable}function gotoCell(e,t,n){if(initialized&&canCellBeActive(e,t)&&getEditorLock().commitCurrentEdit()){scrollCellIntoView(e,t,!1);var r=getCellNode(e,t);setActiveCellInternal(r,n||e===getDataLength()||options.autoEdit),currentEditor||setFocus()}}function commitCurrentEdit(){var e=getDataItem(activeRow),t=columns[activeCell];if(currentEditor){if(currentEditor.isValueChanged()){var n=currentEditor.validate();if(n.valid){if(activeRow<getDataLength()){var r={row:activeRow,cell:activeCell,editor:currentEditor,serializedValue:currentEditor.serializeValue(),prevSerializedValue:serializedEditorValue,execute:function(){this.editor.applyValue(e,this.serializedValue),updateRow(this.row)},undo:function(){this.editor.applyValue(e,this.prevSerializedValue),updateRow(this.row)}};options.editCommandHandler?(makeActiveCellNormal(),options.editCommandHandler(e,t,r)):(r.execute(),makeActiveCellNormal()),trigger(self.onCellChange,{row:activeRow,cell:activeCell,item:e})}else{var i={};currentEditor.applyValue(i,currentEditor.serializeValue()),makeActiveCellNormal(),trigger(self.onAddNewRow,{item:i,column:t})}return!getEditorLock().isActive()}return $(activeCellNode).removeClass("invalid"),$(activeCellNode).width(),$(activeCellNode).addClass("invalid"),trigger(self.onValidationError,{editor:currentEditor,cellNode:activeCellNode,validationResults:n,row:activeRow,cell:activeCell,column:t}),currentEditor.focus(),!1}makeActiveCellNormal()}return!0}function cancelCurrentEdit(){return makeActiveCellNormal(),!0}function rowsToRanges(e){for(var t=[],n=columns.length-1,r=0;r<e.length;r++)t.push(new Slick.Range(e[r],0,e[r],n));return t}function getSelectedRows(){if(!selectionModel)throw"Selection model is not set";return selectedRows}function setSelectedRows(e){if(!selectionModel)throw"Selection model is not set";selectionModel.setSelectedRanges(rowsToRanges(e))}var defaults={explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,enableCellNavigation:!0,enableColumnReorder:!0,asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,autoHeight:!1,editorLock:Slick.GlobalEditorLock,showHeaderRow:!1,headerRowHeight:25,showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,fullWidthRows:!1,multiColumnSort:!1,defaultFormatter:defaultFormatter,forceSyncScrolling:!1},columnDefaults={name:"",resizable:!0,sortable:!1,minWidth:30,rerenderOnResize:!1,headerCssClass:null,defaultSortAsc:!0,focusable:!0,selectable:!0},th,h,ph,n,cj,page=0,offset=0,vScrollDir=1,initialized=!1,$container,uid="slickgrid_"+Math.round(1e6*Math.random()),self=this,$focusSink,$focusSink2,$headerScroller,$headers,$headerRow,$headerRowScroller,$headerRowSpacer,$topPanelScroller,$topPanel,$viewport,$canvas,$style,$boundAncestors,stylesheet,columnCssRulesL,columnCssRulesR,viewportH,viewportW,canvasWidth,viewportHasHScroll,viewportHasVScroll,headerColumnWidthDiff=0,headerColumnHeightDiff=0,cellWidthDiff=0,cellHeightDiff=0,absoluteColumnMinWidth,numberOfRows=0,tabbingDirection=1,activePosX,activeRow,activeCell,activeCellNode=null,currentEditor=null,serializedEditorValue,editController,rowsCache={},renderedRows=0,numVisibleRows,prevScrollTop=0,scrollTop=0,lastRenderedScrollTop=0,lastRenderedScrollLeft=0,prevScrollLeft=0,scrollLeft=0,selectionModel,selectedRows=[],plugins=[],cellCssClasses={},columnsById={},sortColumns=[],columnPosLeft=[],columnPosRight=[],h_editorLoader=null,h_render=null,h_postrender=null,postProcessedRows={},postProcessToRow=null,postProcessFromRow=null,counter_rows_rendered=0,counter_rows_removed=0;this.debug=function(){var e="";e+="\ncounter_rows_rendered:  "+counter_rows_rendered,e+="\ncounter_rows_removed:  "+counter_rows_removed,e+="\nrenderedRows:  "+renderedRows,e+="\nnumVisibleRows:  "+numVisibleRows,e+="\nmaxSupportedCssHeight:  "+maxSupportedCssHeight,e+="\nn(umber of pages):  "+n,e+="\n(current) page:  "+page,e+="\npage height (ph):  "+ph,e+="\nvScrollDir:  "+vScrollDir,alert(e)},this.eval=function(expr){return eval(expr)},$.extend(this,{slickGridVersion:"2.1",onScroll:new Slick.Event,onSort:new Slick.Event,onHeaderMouseEnter:new Slick.Event,onHeaderMouseLeave:new Slick.Event,onHeaderContextMenu:new Slick.Event,onHeaderClick:new Slick.Event,onHeaderCellRendered:new Slick.Event,onBeforeHeaderCellDestroy:new Slick.Event,onHeaderRowCellRendered:new Slick.Event,onBeforeHeaderRowCellDestroy:new Slick.Event,onMouseEnter:new Slick.Event,onMouseLeave:new Slick.Event,onClick:new Slick.Event,onDblClick:new Slick.Event,onContextMenu:new Slick.Event,onKeyDown:new Slick.Event,onAddNewRow:new Slick.Event,onValidationError:new Slick.Event,onViewportChanged:new Slick.Event,onColumnsReordered:new Slick.Event,onColumnsResized:new Slick.Event,onCellChange:new Slick.Event,onBeforeEditCell:new Slick.Event,onBeforeCellEditorDestroy:new Slick.Event,onBeforeDestroy:new Slick.Event,onActiveCellChanged:new Slick.Event,onActiveCellPositionChanged:new Slick.Event,onDragInit:new Slick.Event,onDragStart:new Slick.Event,onDrag:new Slick.Event,onDragEnd:new Slick.Event,onSelectedRowsChanged:new Slick.Event,onCellCssStylesChanged:new Slick.Event,registerPlugin:registerPlugin,unregisterPlugin:unregisterPlugin,getColumns:getColumns,setColumns:setColumns,getColumnIndex:getColumnIndex,updateColumnHeader:updateColumnHeader,setSortColumn:setSortColumn,setSortColumns:setSortColumns,getSortColumns:getSortColumns,autosizeColumns:autosizeColumns,getOptions:getOptions,setOptions:setOptions,getData:getData,getDataLength:getDataLength,getDataItem:getDataItem,setData:setData,getSelectionModel:getSelectionModel,setSelectionModel:setSelectionModel,getSelectedRows:getSelectedRows,setSelectedRows:setSelectedRows,getContainerNode:getContainerNode,render:render,invalidate:invalidate,invalidateRow:invalidateRow,invalidateRows:invalidateRows,invalidateAllRows:invalidateAllRows,updateCell:updateCell,updateRow:updateRow,getViewport:getVisibleRange,getRenderedRange:getRenderedRange,resizeCanvas:resizeCanvas,updateRowCount:updateRowCount,scrollRowIntoView:scrollRowIntoView,scrollRowToTop:scrollRowToTop,scrollCellIntoView:scrollCellIntoView,getCanvasNode:getCanvasNode,focus:setFocus,getCellFromPoint:getCellFromPoint,getCellFromEvent:getCellFromEvent,getActiveCell:getActiveCell,setActiveCell:setActiveCell,getActiveCellNode:getActiveCellNode,getActiveCellPosition:getActiveCellPosition,resetActiveCell:resetActiveCell,editActiveCell:makeActiveCellEditable,getCellEditor:getCellEditor,getCellNode:getCellNode,getCellNodeBox:getCellNodeBox,canCellBeSelected:canCellBeSelected,canCellBeActive:canCellBeActive,navigatePrev:navigatePrev,navigateNext:navigateNext,navigateUp:navigateUp,navigateDown:navigateDown,navigateLeft:navigateLeft,navigateRight:navigateRight,navigatePageUp:navigatePageUp,navigatePageDown:navigatePageDown,gotoCell:gotoCell,getTopPanel:getTopPanel,setTopPanelVisibility:setTopPanelVisibility,setHeaderRowVisibility:setHeaderRowVisibility,getHeaderRow:getHeaderRow,getHeaderRowColumn:getHeaderRowColumn,getGridPosition:getGridPosition,flashCell:flashCell,addCellCssStyles:addCellCssStyles,setCellCssStyles:setCellCssStyles,removeCellCssStyles:removeCellCssStyles,getCellCssStyles:getCellCssStyles,init:finishInitialization,destroy:destroy,getEditorLock:getEditorLock,getEditController:getEditController}),init()}$.extend(!0,window,{Slick:{Grid:SlickGrid}});var scrollbarDimensions,maxSupportedCssHeight}(jQuery),define("slick.grid",["slick.core","slick.dataview","slick.rowselectionmodel","jquery.event.drag"],function(e){return function(){var t;return t||e.Slick}}(this)),define("text",["module"],function(e){var t,n,r,i,o,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,u=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l="undefined"!=typeof location&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),d=l&&location.hostname,f=l&&(location.port||void 0),p={},h=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(u);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(r){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,o=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==o&&(!s||o>1)?(t=e.substring(0,o),n=e.substring(o+1,e.length)):t=e,r=n||t,o=r.indexOf("!"),-1!==o&&(i="strip"===r.substring(o+1),r=r.substring(0,o),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var o,s,a,u=t.xdRegExp.exec(e);return u?(o=u[2],s=u[3],s=s.split(":"),a=s[1],s=s[0],!(o&&o!==n||s&&s.toLowerCase()!==r.toLowerCase()||(a||s)&&a!==i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,h.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i.isBuild&&!i.inlineText)return r(),void 0;h.isBuild=i.isBuild;var o=t.parseName(e),s=o.moduleName+(o.ext?"."+o.ext:""),a=n.toUrl(s),u=h.useXhr||t.useXhr;return 0===a.indexOf("empty:")?(r(),void 0):(!l||u(a,c,d,f)?t.get(a,function(n){t.finishLoad(e,o.strip,n,r)},function(e){r.error&&r.error(e)}):n([s],function(e){t.finishLoad(o.moduleName+"."+o.ext,o.strip,e,r)}),void 0)},write:function(e,n,r){if(p.hasOwnProperty(n)){var i=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+i+"';});\n")}},writeFile:function(e,n,r,i,o){var s=t.parseName(n),a=s.ext?"."+s.ext:"",u=s.moduleName+a,l=r.toUrl(s.moduleName+a)+".js";t.load(u,r,function(){var n=function(e){return i(l,e)};n.asModule=function(e,t){return i.asModule(e,l,t)},t.write(e,u,n,o)},o)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("")&&(i=i.substring(1)),t(i)}catch(o){r(o)}}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,n,r,i){var o,s=t.createXhr();if(s.open("GET",e,!0),i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(){var t,i;4===s.readyState&&(t=s.status,t>399&&600>t?(i=new Error(e+" HTTP status: "+t),i.xhr=s,r(i)):n(s.responseText),h.onXhrComplete&&h.onXhrComplete(s,e))},s.send(null)}:"rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",o=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),i)),u="";try{for(n=new java.lang.StringBuffer,r=a.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=a.readLine());)n.append(s),n.append(r);u=String(n.toString())}finally{a.close()}t(u)}:("xpconnect"===h.env||!h.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,s,a,u={};o&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(a,1,0,!1),s=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),s.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),u),s.close(),n.close(),t(u.value)}catch(l){throw new Error((a&&a.path||"")+": "+l)}}),t}),define("bPopup",["jQuery"],function(e){!function(e){e.fn.bPopup=function(t,n){function r(){switch(v.contentContainer=e(v.contentContainer||R),v.content){case"iframe":var t=e('<iframe class="b-iframe" '+v.iframeAttr+"></iframe>");t.appendTo(v.contentContainer),E=R.outerHeight(!0),S=R.outerWidth(!0),i(),t.attr("src",v.loadUrl),f(v.loadCallback);break;case"image":i(),e("<img />").load(function(){f(v.loadCallback),s(e(this))}).attr("src",v.loadUrl).hide().appendTo(v.contentContainer);break;default:i(),e('<div class="b-ajax-wrapper"></div>').load(v.loadUrl,v.loadData,function(){f(v.loadCallback),s(e(this))}).hide().appendTo(v.contentContainer)}}function i(){v.modal&&e('<div class="b-modal '+m+'"></div>').css({backgroundColor:v.modalColor,position:"fixed",top:0,right:0,bottom:0,left:0,opacity:0,zIndex:v.zIndex+I}).appendTo(v.appendTo).fadeTo(v.speed,v.opacity),p(),R.data("bPopup",v).data("id",m).css({left:"slideIn"==v.transition||"slideBack"==v.transition?"slideBack"==v.transition?N.scrollLeft()+O:-1*(C+S):c(!(!v.follow[0]&&y||w)),position:v.positionStyle||"absolute",top:"slideDown"==v.transition||"slideUp"==v.transition?"slideUp"==v.transition?N.scrollTop()+D:x+-1*E:d(!(!v.follow[1]&&b||w)),"z-index":v.zIndex+I+1}).each(function(){v.appending&&e(this).appendTo(v.appendTo)}),u(!0)}function o(){return v.modal&&e(".b-modal."+R.data("id")).fadeTo(v.speed,0,function(){e(this).remove()}),v.scrollBar||e("html").css("overflow","auto"),e(".b-modal."+m).unbind("click"),N.unbind("keydown."+m),T.unbind("."+m).data("bPopup",0<T.data("bPopup")-1?T.data("bPopup")-1:null),R.undelegate(".bClose, ."+v.closeClass,"click."+m,o).data("bPopup",null),u(),!1}function s(e){var t=e.width(),n=e.height(),r={};v.contentContainer.css({height:n,width:t}),n>=R.height()&&(r.height=R.height()),t>=R.width()&&(r.width=R.width()),E=R.outerHeight(!0),S=R.outerWidth(!0),p(),v.contentContainer.css({height:"auto",width:"auto"}),r.left=c(!(!v.follow[0]&&y||w)),r.top=d(!(!v.follow[1]&&b||w)),R.animate(r,250,function(){e.show(),g=h()
})}function a(){T.data("bPopup",I),R.delegate(".bClose, ."+v.closeClass,"click."+m,o),v.modalClose&&e(".b-modal."+m).css("cursor","pointer").bind("click",o),_||!v.follow[0]&&!v.follow[1]||T.bind("scroll."+m,function(){g&&R.dequeue().animate({left:v.follow[0]?c(!w):"auto",top:v.follow[1]?d(!w):"auto"},v.followSpeed,v.followEasing)}).bind("resize."+m,function(){D=A.innerHeight||T.height(),O=A.innerWidth||T.width(),(g=h())&&(clearTimeout(k),k=setTimeout(function(){p(),R.dequeue().each(function(){w?e(this).css({left:C,top:x}):e(this).animate({left:v.follow[0]?c(!0):"auto",top:v.follow[1]?d(!0):"auto"},v.followSpeed,v.followEasing)})},50))}),v.escClose&&N.bind("keydown."+m,function(e){27==e.which&&o()})}function u(e){function t(t){R.css({display:"block",opacity:1}).animate(t,v.speed,v.easing,function(){l(e)})}switch(e?v.transition:v.transitionClose||v.transition){case"slideIn":t({left:e?c(!(!v.follow[0]&&y||w)):N.scrollLeft()-(S||R.outerWidth(!0))-j});break;case"slideBack":t({left:e?c(!(!v.follow[0]&&y||w)):N.scrollLeft()+O+j});break;case"slideDown":t({top:e?d(!(!v.follow[1]&&b||w)):N.scrollTop()-(E||R.outerHeight(!0))-j});break;case"slideUp":t({top:e?d(!(!v.follow[1]&&b||w)):N.scrollTop()+D+j});break;default:R.stop().fadeTo(v.speed,e?1:0,function(){l(e)})}}function l(e){e?(a(),f(n),v.autoClose&&setTimeout(o,v.autoClose)):(R.hide(),f(v.onClose),v.loadUrl&&(v.contentContainer.empty(),R.css({height:"auto",width:"auto"})))}function c(e){return e?C+N.scrollLeft():C}function d(e){return e?x+N.scrollTop():x}function f(t){e.isFunction(t)&&t.call(R)}function p(){x=b?v.position[1]:Math.max(0,(D-R.outerHeight(!0))/2-v.amsl),C=y?v.position[0]:(O-R.outerWidth(!0))/2,g=h()}function h(){return D>R.outerHeight(!0)&&O>R.outerWidth(!0)}e.isFunction(t)&&(n=t,t=null);var v=e.extend({},e.fn.bPopup.defaults,t);v.scrollBar||e("html").css("overflow","hidden");var m,g,b,y,w,x,C,E,S,k,R=this,N=e(document),A=window,T=e(A),D=A.innerHeight||T.height(),O=A.innerWidth||T.width(),_=/OS 6(_\d)+/i.test(navigator.userAgent),j=200,I=0;return R.close=function(){v=this.data("bPopup"),m="__b-popup"+T.data("bPopup")+"__",o()},R.each(function(){e(this).data("bPopup")||(f(v.onOpen),I=(T.data("bPopup")||0)+1,m="__b-popup"+I+"__",b="auto"!==v.position[1],y="auto"!==v.position[0],w="fixed"===v.positionStyle,E=R.outerHeight(!0),S=R.outerWidth(!0),v.loadUrl?r():i())})},e.fn.bPopup.defaults={amsl:50,appending:!0,appendTo:"body",autoClose:!1,closeClass:"b-close",content:"ajax",contentContainer:!1,easing:"swing",escClose:!0,follow:[!0,!0],followEasing:"swing",followSpeed:500,iframeAttr:'scrolling="no" frameborder="0"',loadCallback:!1,loadData:!1,loadUrl:!1,modal:!0,modalClose:!0,modalColor:"#000",onClose:!1,onOpen:!1,opacity:.7,position:["auto","auto"],positionStyle:"absolute",scrollBar:!0,speed:250,transition:"fadeIn",transitionClose:!1,zIndex:9997}}(e)}),function(e,t){var n="enumerator is disposed",r="single:sequence contains more than one element.",i=!1,o=null,s=!0,a={Identity:function(e){return e},True:function(){return s},Blank:function(){}},u={Boolean:typeof s,Number:"number",String:"string",Object:typeof{},Undefined:typeof t,Function:"function"},l={createLambda:function(e){if(e==o)return a.Identity;if(typeof e==u.String){if(""==e)return a.Identity;if(-1==e.indexOf("=>")){for(var t,n=new RegExp("[$]+","g"),r=0;t=n.exec(e);){var i=t[0].length;i>r&&(r=i)}for(var s=[],l=1;r>=l;l++){for(var c="",d=0;l>d;d++)c+="$";s.push(c)}var f=Array.prototype.join.call(s,",");return new Function(f,"return "+e)}var p=e.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);return new Function(p[1],"return "+p[2])}return e},isIEnumerable:function(e){if(typeof Enumerator!==u.Undefined)try{return new Enumerator(e),s}catch(t){}return i},defineProperty:Object.defineProperties!=o?function(e,t,n){Object.defineProperty(e,t,{enumerable:i,configurable:s,writable:s,value:n})}:function(e,t,n){e[t]=n},compare:function(e,t){return e===t?0:e>t?1:-1},dispose:function(e){e!=o&&e.dispose()}},c={Before:0,Running:1,After:2},d=function(e,t,n){var r=new f,o=c.Before;this.current=r.current,this.moveNext=function(){try{switch(o){case c.Before:o=c.Running,e();case c.Running:return t.apply(r)?s:(this.dispose(),i);case c.After:return i}}catch(n){throw this.dispose(),n}},this.dispose=function(){if(o==c.Running)try{n()}finally{o=c.After}}},f=function(){var e=o;this.current=function(){return e},this.yieldReturn=function(t){return e=t,s},this.yieldBreak=function(){return i}},p=function(e){this.getEnumerator=e};p.Utils={},p.Utils.createLambda=function(e){return l.createLambda(e)},p.Utils.createEnumerable=function(e){return new p(e)},p.Utils.createEnumerator=function(e,t,n){return new d(e,t,n)},p.Utils.extendTo=function(e){var t,n=e.prototype;e===Array?(t=g.prototype,l.defineProperty(n,"getSource",function(){return this})):(t=p.prototype,l.defineProperty(n,"getEnumerator",function(){return p.from(this).getEnumerator()}));for(var r in t){var i=t[r];n[r]!=i&&(n[r]==o||(r+="ByLinq",n[r]!=i))&&i instanceof Function&&l.defineProperty(n,r,i)}},p.choice=function(){var e=arguments;return new p(function(){return new d(function(){e=e[0]instanceof Array?e[0]:e[0].getEnumerator!=o?e[0].toArray():e},function(){return this.yieldReturn(e[Math.floor(Math.random()*e.length)])},a.Blank)})},p.cycle=function(){var e=arguments;return new p(function(){var t=0;return new d(function(){e=e[0]instanceof Array?e[0]:e[0].getEnumerator!=o?e[0].toArray():e},function(){return t>=e.length&&(t=0),this.yieldReturn(e[t++])},a.Blank)})},p.empty=function(){return new p(function(){return new d(a.Blank,function(){return i},a.Blank)})},p.from=function(e){if(e==o)return p.empty();if(e instanceof p)return e;if(typeof e==u.Number||typeof e==u.Boolean)return p.repeat(e,1);if(typeof e==u.String)return new p(function(){var t=0;return new d(a.Blank,function(){return t<e.length?this.yieldReturn(e.charAt(t++)):i},a.Blank)});if(typeof e!=u.Function){if(typeof e.length==u.Number)return new g(e);if(!(e instanceof Object)&&l.isIEnumerable(e))return new p(function(){var t,n=s;return new d(function(){t=new Enumerator(e)},function(){return n?n=i:t.moveNext(),t.atEnd()?i:this.yieldReturn(t.item())},a.Blank)});if(typeof Windows===u.Object&&typeof e.first===u.Function)return new p(function(){var t,n=s;return new d(function(){t=e.first()},function(){return n?n=i:t.moveNext(),t.hasCurrent?this.yieldReturn(t.current):this.yieldBreak()},a.Blank)})}return new p(function(){var t=[],n=0;return new d(function(){for(var n in e){var r=e[n];!(r instanceof Function)&&Object.prototype.hasOwnProperty.call(e,n)&&t.push({key:n,value:r})}},function(){return n<t.length?this.yieldReturn(t[n++]):i},a.Blank)})},p.make=function(e){return p.repeat(e,1)},p.matches=function(e,t,n){return n==o&&(n=""),t instanceof RegExp&&(n+=t.ignoreCase?"i":"",n+=t.multiline?"m":"",t=t.source),-1===n.indexOf("g")&&(n+="g"),new p(function(){var r;return new d(function(){r=new RegExp(t,n)},function(){var t=r.exec(e);return t?this.yieldReturn(t):i},a.Blank)})},p.range=function(e,t,n){return n==o&&(n=1),new p(function(){var r,i=0;return new d(function(){r=e-n},function(){return i++<t?this.yieldReturn(r+=n):this.yieldBreak()},a.Blank)})},p.rangeDown=function(e,t,n){return n==o&&(n=1),new p(function(){var r,i=0;return new d(function(){r=e+n},function(){return i++<t?this.yieldReturn(r-=n):this.yieldBreak()},a.Blank)})},p.rangeTo=function(e,t,n){return n==o&&(n=1),t>e?new p(function(){var r;return new d(function(){r=e-n},function(){var e=r+=n;return t>=e?this.yieldReturn(e):this.yieldBreak()},a.Blank)}):new p(function(){var r;return new d(function(){r=e+n},function(){var e=r-=n;return e>=t?this.yieldReturn(e):this.yieldBreak()},a.Blank)})},p.repeat=function(e,t){return t!=o?p.repeat(e).take(t):new p(function(){return new d(a.Blank,function(){return this.yieldReturn(e)},a.Blank)})},p.repeatWithFinalize=function(e,t){return e=l.createLambda(e),t=l.createLambda(t),new p(function(){var n;return new d(function(){n=e()},function(){return this.yieldReturn(n)},function(){n!=o&&(t(n),n=o)})})},p.generate=function(e,t){return t!=o?p.generate(e).take(t):(e=l.createLambda(e),new p(function(){return new d(a.Blank,function(){return this.yieldReturn(e())},a.Blank)}))},p.toInfinity=function(e,t){return e==o&&(e=0),t==o&&(t=1),new p(function(){var n;return new d(function(){n=e-t},function(){return this.yieldReturn(n+=t)},a.Blank)})},p.toNegativeInfinity=function(e,t){return e==o&&(e=0),t==o&&(t=1),new p(function(){var n;return new d(function(){n=e+t},function(){return this.yieldReturn(n-=t)},a.Blank)})},p.unfold=function(e,t){return t=l.createLambda(t),new p(function(){var n,r=s;return new d(a.Blank,function(){return r?(r=i,n=e,this.yieldReturn(n)):(n=t(n),this.yieldReturn(n))},a.Blank)})},p.defer=function(e){return new p(function(){var t;return new d(function(){t=p.from(e()).getEnumerator()},function(){return t.moveNext()?this.yieldReturn(t.current()):this.yieldBreak()},function(){l.dispose(t)})})},p.prototype.traverseBreadthFirst=function(e,t){var n=this;return e=l.createLambda(e),t=l.createLambda(t),new p(function(){var r,o=0,a=[];return new d(function(){r=n.getEnumerator()},function(){for(;s;){if(r.moveNext())return a.push(r.current()),this.yieldReturn(t(r.current(),o));var n=p.from(a).selectMany(function(t){return e(t)});if(!n.any())return i;o++,a=[],l.dispose(r),r=n.getEnumerator()}},function(){l.dispose(r)})})},p.prototype.traverseDepthFirst=function(e,t){var n=this;return e=l.createLambda(e),t=l.createLambda(t),new p(function(){var r,o=[];return new d(function(){r=n.getEnumerator()},function(){for(;s;){if(r.moveNext()){var n=t(r.current(),o.length);return o.push(r),r=p.from(e(r.current())).getEnumerator(),this.yieldReturn(n)}if(o.length<=0)return i;l.dispose(r),r=o.pop()}},function(){try{l.dispose(r)}finally{p.from(o).forEach(function(e){e.dispose()})}})})},p.prototype.flatten=function(){var e=this;return new p(function(){var t,n=o;return new d(function(){t=e.getEnumerator()},function(){for(;s;){if(n!=o){if(n.moveNext())return this.yieldReturn(n.current());n=o}if(t.moveNext()){if(t.current()instanceof Array){l.dispose(n),n=p.from(t.current()).selectMany(a.Identity).flatten().getEnumerator();continue}return this.yieldReturn(t.current())}return i}},function(){try{l.dispose(t)}finally{l.dispose(n)}})})},p.prototype.pairwise=function(e){var t=this;return e=l.createLambda(e),new p(function(){var n;return new d(function(){n=t.getEnumerator(),n.moveNext()},function(){var t=n.current();return n.moveNext()?this.yieldReturn(e(t,n.current())):i},function(){l.dispose(n)})})},p.prototype.scan=function(e,t){var n;t==o?(t=l.createLambda(e),n=i):(t=l.createLambda(t),n=s);var r=this;return new p(function(){var o,a,u=s;return new d(function(){o=r.getEnumerator()},function(){if(u){if(u=i,n)return this.yieldReturn(a=e);if(o.moveNext())return this.yieldReturn(a=o.current())}return o.moveNext()?this.yieldReturn(a=t(a,o.current())):i},function(){l.dispose(o)})})},p.prototype.select=function(e){if(e=l.createLambda(e),e.length<=1)return new y(this,o,e);var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){return n.moveNext()?this.yieldReturn(e(n.current(),r++)):i},function(){l.dispose(n)})})},p.prototype.selectMany=function(e,n){var r=this;return e=l.createLambda(e),n==o&&(n=function(e,t){return t}),n=l.createLambda(n),new p(function(){var s,a=t,u=0;return new d(function(){s=r.getEnumerator()},function(){if(a===t&&!s.moveNext())return i;do{if(a==o){var r=e(s.current(),u++);a=p.from(r).getEnumerator()}if(a.moveNext())return this.yieldReturn(n(s.current(),a.current()));l.dispose(a),a=o}while(s.moveNext());return i},function(){try{l.dispose(s)}finally{l.dispose(a)}})})},p.prototype.where=function(e){if(e=l.createLambda(e),e.length<=1)return new b(this,e);var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)if(e(n.current(),r++))return this.yieldReturn(n.current());return i},function(){l.dispose(n)})})},p.prototype.choose=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current(),r++);if(t!=o)return this.yieldReturn(t)}return this.yieldBreak()},function(){l.dispose(n)})})},p.prototype.ofType=function(e){var t;switch(e){case Number:t=u.Number;break;case String:t=u.String;break;case Boolean:t=u.Boolean;break;case Function:t=u.Function;break;default:t=o}return t===o?this.where(function(t){return t instanceof e}):this.where(function(e){return typeof e===t})},p.prototype.zip=function(){var e=arguments,t=l.createLambda(arguments[arguments.length-1]),n=this;if(2==arguments.length){var r=arguments[0];return new p(function(){var e,o,s=0;return new d(function(){e=n.getEnumerator(),o=p.from(r).getEnumerator()},function(){return e.moveNext()&&o.moveNext()?this.yieldReturn(t(e.current(),o.current(),s++)):i},function(){try{l.dispose(e)}finally{l.dispose(o)}})})}return new p(function(){var r,i=0;return new d(function(){var t=p.make(n).concat(p.from(e).takeExceptLast().select(p.from)).select(function(e){return e.getEnumerator()}).toArray();r=p.from(t)},function(){if(r.all(function(e){return e.moveNext()})){var e=r.select(function(e){return e.current()}).toArray();return e.push(i++),this.yieldReturn(t.apply(o,e))}return this.yieldBreak()},function(){p.from(r).forEach(l.dispose)})})},p.prototype.merge=function(){var e=arguments,t=this;return new p(function(){var n,r=-1;return new d(function(){n=p.make(t).concat(p.from(e).select(p.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;n.length>0;){r=r>=n.length-1?0:r+1;var e=n[r];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),n.splice(r--,1)}return this.yieldBreak()},function(){p.from(n).forEach(l.dispose)})})},p.prototype.join=function(e,n,r,u,c){n=l.createLambda(n),r=l.createLambda(r),u=l.createLambda(u),c=l.createLambda(c);var f=this;return new p(function(){var h,v,m=o,g=0;return new d(function(){h=f.getEnumerator(),v=p.from(e).toLookup(r,a.Identity,c)},function(){for(;s;){if(m!=o){var e=m[g++];if(e!==t)return this.yieldReturn(u(h.current(),e));e=o,g=0}if(!h.moveNext())return i;var r=n(h.current());m=v.get(r).toArray()}},function(){l.dispose(h)})})},p.prototype.groupJoin=function(e,t,n,r,s){t=l.createLambda(t),n=l.createLambda(n),r=l.createLambda(r),s=l.createLambda(s);var u=this;return new p(function(){var c=u.getEnumerator(),f=o;return new d(function(){c=u.getEnumerator(),f=p.from(e).toLookup(n,a.Identity,s)},function(){if(c.moveNext()){var e=f.get(t(c.current()));return this.yieldReturn(r(c.current(),e))}return i},function(){l.dispose(c)})})},p.prototype.all=function(e){e=l.createLambda(e);var t=s;return this.forEach(function(n){return e(n)?void 0:(t=i,i)}),t},p.prototype.any=function(e){e=l.createLambda(e);var t=this.getEnumerator();try{if(0==arguments.length)return t.moveNext();for(;t.moveNext();)if(e(t.current()))return s;return i}finally{l.dispose(t)}},p.prototype.isEmpty=function(){return!this.any()},p.prototype.concat=function(){var e=this;if(1==arguments.length){var t=arguments[0];return new p(function(){var n,r;return new d(function(){n=e.getEnumerator()},function(){if(r==o){if(n.moveNext())return this.yieldReturn(n.current());r=p.from(t).getEnumerator()}return r.moveNext()?this.yieldReturn(r.current()):i},function(){try{l.dispose(n)}finally{l.dispose(r)}})})}var n=arguments;return new p(function(){var t;return new d(function(){t=p.make(e).concat(p.from(n).select(p.from)).select(function(e){return e.getEnumerator()}).toArray()},function(){for(;t.length>0;){var e=t[0];if(e.moveNext())return this.yieldReturn(e.current());e.dispose(),t.splice(0,1)}return this.yieldBreak()},function(){p.from(t).forEach(l.dispose)})})},p.prototype.insert=function(e,t){var n=this;return new p(function(){var r,o,a=0,u=i;return new d(function(){r=n.getEnumerator(),o=p.from(t).getEnumerator()},function(){return a==e&&o.moveNext()?(u=s,this.yieldReturn(o.current())):r.moveNext()?(a++,this.yieldReturn(r.current())):!u&&o.moveNext()?this.yieldReturn(o.current()):i},function(){try{l.dispose(r)}finally{l.dispose(o)}})})},p.prototype.alternate=function(e){var t=this;return new p(function(){var n,r,i,a;return new d(function(){i=e instanceof Array||e.getEnumerator!=o?p.from(p.from(e).toArray()):p.make(e),r=t.getEnumerator(),r.moveNext()&&(n=r.current())},function(){for(;s;){if(a!=o){if(a.moveNext())return this.yieldReturn(a.current());a=o}{if(n!=o||!r.moveNext()){if(n!=o){var e=n;return n=o,this.yieldReturn(e)}return this.yieldBreak()}n=r.current(),a=i.getEnumerator()}}},function(){try{l.dispose(r)}finally{l.dispose(a)}})})},p.prototype.contains=function(e,t){t=l.createLambda(t);var n=this.getEnumerator();try{for(;n.moveNext();)if(t(n.current())===e)return s;return i}finally{l.dispose(n)}},p.prototype.defaultIfEmpty=function(e){var n=this;return e===t&&(e=o),new p(function(){var t,r=s;return new d(function(){t=n.getEnumerator()},function(){return t.moveNext()?(r=i,this.yieldReturn(t.current())):r?(r=i,this.yieldReturn(e)):i},function(){l.dispose(t)})})},p.prototype.distinct=function(e){return this.except(p.empty(),e)},p.prototype.distinctUntilChanged=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n,r,o;return new d(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){var t=e(n.current());if(o)return o=i,r=t,this.yieldReturn(n.current());if(r!==t)return r=t,this.yieldReturn(n.current())}return this.yieldBreak()},function(){l.dispose(n)})})},p.prototype.except=function(e,t){t=l.createLambda(t);var n=this;return new p(function(){var r,o;return new d(function(){r=n.getEnumerator(),o=new w(t),p.from(e).forEach(function(e){o.add(e)})},function(){for(;r.moveNext();){var e=r.current();if(!o.contains(e))return o.add(e),this.yieldReturn(e)}return i},function(){l.dispose(r)})})},p.prototype.intersect=function(e,t){t=l.createLambda(t);var n=this;return new p(function(){var r,o,s;return new d(function(){r=n.getEnumerator(),o=new w(t),p.from(e).forEach(function(e){o.add(e)}),s=new w(t)},function(){for(;r.moveNext();){var e=r.current();if(!s.contains(e)&&o.contains(e))return s.add(e),this.yieldReturn(e)}return i},function(){l.dispose(r)})})},p.prototype.sequenceEqual=function(e,t){t=l.createLambda(t);var n=this.getEnumerator();try{var r=p.from(e).getEnumerator();try{for(;n.moveNext();)if(!r.moveNext()||t(n.current())!==t(r.current()))return i;return r.moveNext()?i:s}finally{l.dispose(r)}}finally{l.dispose(n)}},p.prototype.union=function(e,n){n=l.createLambda(n);var r=this;return new p(function(){var o,s,a;return new d(function(){o=r.getEnumerator(),a=new w(n)},function(){var n;if(s===t){for(;o.moveNext();)if(n=o.current(),!a.contains(n))return a.add(n),this.yieldReturn(n);s=p.from(e).getEnumerator()}for(;s.moveNext();)if(n=s.current(),!a.contains(n))return a.add(n),this.yieldReturn(n);return i},function(){try{l.dispose(o)}finally{l.dispose(s)}})})},p.prototype.orderBy=function(e){return new h(this,e,i)},p.prototype.orderByDescending=function(e){return new h(this,e,s)},p.prototype.reverse=function(){var e=this;return new p(function(){var t,n;return new d(function(){t=e.toArray(),n=t.length},function(){return n>0?this.yieldReturn(t[--n]):i},a.Blank)})},p.prototype.shuffle=function(){var e=this;return new p(function(){var t;return new d(function(){t=e.toArray()},function(){if(t.length>0){var e=Math.floor(Math.random()*t.length);return this.yieldReturn(t.splice(e,1)[0])}return i},a.Blank)})},p.prototype.weightedSample=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.choose(function(t){var n=e(t);return 0>=n?o:(r+=n,{value:t,bound:r})}).toArray()},function(){if(n.length>0){for(var e=Math.floor(Math.random()*r)+1,t=-1,i=n.length;i-t>1;){var o=Math.floor((t+i)/2);n[o].bound>=e?i=o:t=o}return this.yieldReturn(n[i].value)}return this.yieldBreak()},a.Blank)})},p.prototype.groupBy=function(e,t,n,r){var s=this;return e=l.createLambda(e),t=l.createLambda(t),n!=o&&(n=l.createLambda(n)),r=l.createLambda(r),new p(function(){var a;return new d(function(){a=s.toLookup(e,t,r).toEnumerable().getEnumerator()},function(){for(;a.moveNext();)return n==o?this.yieldReturn(a.current()):this.yieldReturn(n(a.current().key(),a.current()));return i},function(){l.dispose(a)})})},p.prototype.partitionBy=function(e,t,n,r){var a=this;e=l.createLambda(e),t=l.createLambda(t),r=l.createLambda(r);var u;return n==o?(u=i,n=function(e,t){return new C(e,t)}):(u=s,n=l.createLambda(n)),new p(function(){var o,c,f,h=[];return new d(function(){o=a.getEnumerator(),o.moveNext()&&(c=e(o.current()),f=r(c),h.push(t(o.current())))},function(){for(var a;(a=o.moveNext())==s&&f===r(e(o.current()));)h.push(t(o.current()));if(h.length>0){var l=u?n(c,p.from(h)):n(c,h);return a?(c=e(o.current()),f=r(c),h=[t(o.current())]):h=[],this.yieldReturn(l)}return i},function(){l.dispose(o)})})},p.prototype.buffer=function(e){var t=this;return new p(function(){var n;return new d(function(){n=t.getEnumerator()},function(){for(var t=[],r=0;n.moveNext();)if(t.push(n.current()),++r>=e)return this.yieldReturn(t);return t.length>0?this.yieldReturn(t):i},function(){l.dispose(n)})})},p.prototype.aggregate=function(e,t,n){return(n=l.createLambda(n))(this.scan(e,t,n).last())},p.prototype.average=function(e){e=l.createLambda(e);var t=0,n=0;return this.forEach(function(r){t+=e(r),++n}),t/n},p.prototype.count=function(e){e=e==o?a.True:l.createLambda(e);var t=0;return this.forEach(function(n,r){e(n,r)&&++t}),t},p.prototype.max=function(e){return e==o&&(e=a.Identity),this.select(e).aggregate(function(e,t){return e>t?e:t})},p.prototype.min=function(e){return e==o&&(e=a.Identity),this.select(e).aggregate(function(e,t){return t>e?e:t})},p.prototype.maxBy=function(e){return e=l.createLambda(e),this.aggregate(function(t,n){return e(t)>e(n)?t:n})},p.prototype.minBy=function(e){return e=l.createLambda(e),this.aggregate(function(t,n){return e(t)<e(n)?t:n})},p.prototype.sum=function(e){return e==o&&(e=a.Identity),this.select(e).aggregate(0,function(e,t){return e+t})},p.prototype.elementAt=function(e){var t,n=i;if(this.forEach(function(r,o){return o==e?(t=r,n=s,i):void 0}),!n)throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");return t},p.prototype.elementAtOrDefault=function(e,n){n===t&&(n=o);var r,a=i;return this.forEach(function(t,n){return n==e?(r=t,a=s,i):void 0}),a?r:n},p.prototype.first=function(e){if(e!=o)return this.where(e).first();var t,n=i;if(this.forEach(function(e){return t=e,n=s,i}),!n)throw new Error("first:No element satisfies the condition.");return t},p.prototype.firstOrDefault=function(e,n){if(n===t&&(n=o),e!=o)return this.where(e).firstOrDefault(o,n);var r,a=i;return this.forEach(function(e){return r=e,a=s,i}),a?r:n},p.prototype.last=function(e){if(e!=o)return this.where(e).last();var t,n=i;if(this.forEach(function(e){n=s,t=e}),!n)throw new Error("last:No element satisfies the condition.");return t},p.prototype.lastOrDefault=function(e,n){if(n===t&&(n=o),e!=o)return this.where(e).lastOrDefault(o,n);var r,a=i;return this.forEach(function(e){a=s,r=e}),a?r:n},p.prototype.single=function(e){if(e!=o)return this.where(e).single();var t,n=i;if(this.forEach(function(e){if(n)throw new Error(r);n=s,t=e}),!n)throw new Error("single:No element satisfies the condition.");return t},p.prototype.singleOrDefault=function(e,n){if(n===t&&(n=o),e!=o)return this.where(e).singleOrDefault(o,n);var a,u=i;return this.forEach(function(e){if(u)throw new Error(r);u=s,a=e}),u?a:n},p.prototype.skip=function(e){var t=this;return new p(function(){var n,r=0;return new d(function(){for(n=t.getEnumerator();r++<e&&n.moveNext(););},function(){return n.moveNext()?this.yieldReturn(n.current()):i},function(){l.dispose(n)})})},p.prototype.skipWhile=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n,r=0,o=i;return new d(function(){n=t.getEnumerator()},function(){for(;!o;){if(n.moveNext()){if(!e(n.current(),r++))return o=s,this.yieldReturn(n.current());continue}return i}return n.moveNext()?this.yieldReturn(n.current()):i},function(){l.dispose(n)})})},p.prototype.take=function(e){var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){return r++<e&&n.moveNext()?this.yieldReturn(n.current()):i},function(){l.dispose(n)})})},p.prototype.takeWhile=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){return n.moveNext()&&e(n.current(),r++)?this.yieldReturn(n.current()):i},function(){l.dispose(n)})})},p.prototype.takeExceptLast=function(e){e==o&&(e=1);var t=this;return new p(function(){if(0>=e)return t.getEnumerator();var n,r=[];return new d(function(){n=t.getEnumerator()},function(){for(;n.moveNext();){if(r.length==e)return r.push(n.current()),this.yieldReturn(r.shift());r.push(n.current())}return i},function(){l.dispose(n)})})},p.prototype.takeFromLast=function(e){if(0>=e||e==o)return p.empty();var t=this;return new p(function(){var n,r,s=[];return new d(function(){n=t.getEnumerator()},function(){for(;n.moveNext();)s.length==e&&s.shift(),s.push(n.current());return r==o&&(r=p.from(s).getEnumerator()),r.moveNext()?this.yieldReturn(r.current()):i},function(){l.dispose(r)})})},p.prototype.indexOf=function(e){var t=o;return typeof e===u.Function?this.forEach(function(n,r){return e(n,r)?(t=r,i):void 0}):this.forEach(function(n,r){return n===e?(t=r,i):void 0}),t!==o?t:-1},p.prototype.lastIndexOf=function(e){var t=-1;return typeof e===u.Function?this.forEach(function(n,r){e(n,r)&&(t=r)}):this.forEach(function(n,r){n===e&&(t=r)}),t},p.prototype.asEnumerable=function(){return p.from(this)},p.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},p.prototype.toLookup=function(e,n,r){e=l.createLambda(e),n=l.createLambda(n),r=l.createLambda(r);var i=new w(r);return this.forEach(function(r){var o=e(r),s=n(r),a=i.get(o);a!==t?a.push(s):i.add(o,[s])}),new x(i)},p.prototype.toObject=function(e,t){e=l.createLambda(e),t=l.createLambda(t);var n={};return this.forEach(function(r){n[e(r)]=t(r)}),n},p.prototype.toDictionary=function(e,t,n){e=l.createLambda(e),t=l.createLambda(t),n=l.createLambda(n);var r=new w(n);return this.forEach(function(n){r.add(e(n),t(n))}),r},p.prototype.toJSONString=function(e,t){if(typeof JSON===u.Undefined||JSON.stringify==o)throw new Error("toJSONString can't find JSON.stringify. This works native JSON support Browser or include json2.js");return JSON.stringify(this.toArray(),e,t)},p.prototype.toJoinedString=function(e,t){return e==o&&(e=""),t==o&&(t=a.Identity),this.select(t).toArray().join(e)},p.prototype.doAction=function(e){var t=this;return e=l.createLambda(e),new p(function(){var n,r=0;return new d(function(){n=t.getEnumerator()},function(){return n.moveNext()?(e(n.current(),r++),this.yieldReturn(n.current())):i},function(){l.dispose(n)})})},p.prototype.forEach=function(e){e=l.createLambda(e);var t=0,n=this.getEnumerator();try{for(;n.moveNext()&&e(n.current(),t++)!==i;);}finally{l.dispose(n)}},p.prototype.write=function(e,t){e==o&&(e=""),t=l.createLambda(t);var n=s;this.forEach(function(r){n?n=i:document.write(e),document.write(t(r))})},p.prototype.writeLine=function(e){e=l.createLambda(e),this.forEach(function(t){document.writeln(e(t)+"<br />")})},p.prototype.force=function(){var e=this.getEnumerator();try{for(;e.moveNext(););}finally{l.dispose(e)}},p.prototype.letBind=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n;return new d(function(){n=p.from(e(t)).getEnumerator()},function(){return n.moveNext()?this.yieldReturn(n.current()):i},function(){l.dispose(n)})})},p.prototype.share=function(){var e,t=this,r=i;return new m(function(){return new d(function(){e==o&&(e=t.getEnumerator())},function(){if(r)throw new Error(n);return e.moveNext()?this.yieldReturn(e.current()):i},a.Blank)},function(){r=s,l.dispose(e)})},p.prototype.memoize=function(){var e,t,r=this,u=i;return new m(function(){var s=-1;return new d(function(){t==o&&(t=r.getEnumerator(),e=[])},function(){if(u)throw new Error(n);return s++,e.length<=s?t.moveNext()?this.yieldReturn(e[s]=t.current()):i:this.yieldReturn(e[s])},a.Blank)},function(){u=s,l.dispose(t),e=o})},p.prototype.catchError=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n;return new d(function(){n=t.getEnumerator()},function(){try{return n.moveNext()?this.yieldReturn(n.current()):i}catch(t){return e(t),i}},function(){l.dispose(n)})})},p.prototype.finallyAction=function(e){e=l.createLambda(e);var t=this;return new p(function(){var n;return new d(function(){n=t.getEnumerator()},function(){return n.moveNext()?this.yieldReturn(n.current()):i},function(){try{l.dispose(n)}finally{e()}})})},p.prototype.log=function(e){return e=l.createLambda(e),this.doAction(function(t){typeof console!==u.Undefined&&console.log(e(t))})},p.prototype.trace=function(e,t){return e==o&&(e="Trace"),t=l.createLambda(t),this.doAction(function(n){typeof console!==u.Undefined&&console.log(e,t(n))})};var h=function(e,t,n,r){var i=this;i.source=e,i.keySelector=l.createLambda(t),i.descending=n,i.parent=r};h.prototype=new p,h.prototype.createOrderedEnumerable=function(e,t){return new h(this.source,e,t,this)},h.prototype.thenBy=function(e){return this.createOrderedEnumerable(e,i)},h.prototype.thenByDescending=function(e){return this.createOrderedEnumerable(e,s)},h.prototype.getEnumerator=function(){var e,t,n=this,r=0;return new d(function(){e=[],t=[],n.source.forEach(function(n,r){e.push(n),t.push(r)});var r=v.create(n,o);r.GenerateKeys(e),t.sort(function(e,t){return r.compare(e,t)})},function(){return r<t.length?this.yieldReturn(e[t[r++]]):i},a.Blank)};var v=function(e,t,n){var r=this;r.keySelector=e,r.descending=t,r.child=n,r.keys=o};v.create=function(e,t){var n=new v(e.keySelector,e.descending,t);return e.parent!=o?v.create(e.parent,n):n},v.prototype.GenerateKeys=function(e){for(var t=this,n=e.length,r=t.keySelector,i=new Array(n),s=0;n>s;s++)i[s]=r(e[s]);t.keys=i,t.child!=o&&t.child.GenerateKeys(e)},v.prototype.compare=function(e,t){var n=this,r=l.compare(n.keys[e],n.keys[t]);return 0==r?n.child!=o?n.child.compare(e,t):l.compare(e,t):n.descending?-r:r};var m=function(e,t){this.dispose=t,p.call(this,e)};m.prototype=new p;var g=function(e){this.getSource=function(){return e}};g.prototype=new p,g.prototype.any=function(e){return e==o?this.getSource().length>0:p.prototype.any.apply(this,arguments)},g.prototype.count=function(e){return e==o?this.getSource().length:p.prototype.count.apply(this,arguments)},g.prototype.elementAt=function(e){var t=this.getSource();return e>=0&&e<t.length?t[e]:p.prototype.elementAt.apply(this,arguments)},g.prototype.elementAtOrDefault=function(e,n){n===t&&(n=o);var r=this.getSource();return e>=0&&e<r.length?r[e]:n},g.prototype.first=function(e){var t=this.getSource();return e==o&&t.length>0?t[0]:p.prototype.first.apply(this,arguments)},g.prototype.firstOrDefault=function(e,n){if(n===t&&(n=o),e!=o)return p.prototype.firstOrDefault.apply(this,arguments);var r=this.getSource();return r.length>0?r[0]:n},g.prototype.last=function(e){var t=this.getSource();return e==o&&t.length>0?t[t.length-1]:p.prototype.last.apply(this,arguments)},g.prototype.lastOrDefault=function(e,n){if(n===t&&(n=o),e!=o)return p.prototype.lastOrDefault.apply(this,arguments);var r=this.getSource();return r.length>0?r[r.length-1]:n},g.prototype.skip=function(e){var t=this.getSource();return new p(function(){var n;return new d(function(){n=0>e?0:e},function(){return n<t.length?this.yieldReturn(t[n++]):i},a.Blank)})},g.prototype.takeExceptLast=function(e){return e==o&&(e=1),this.take(this.getSource().length-e)},g.prototype.takeFromLast=function(e){return this.skip(this.getSource().length-e)},g.prototype.reverse=function(){var e=this.getSource();return new p(function(){var t;return new d(function(){t=e.length},function(){return t>0?this.yieldReturn(e[--t]):i
},a.Blank)})},g.prototype.sequenceEqual=function(e,t){return(e instanceof g||e instanceof Array)&&t==o&&p.from(e).count()!=this.count()?i:p.prototype.sequenceEqual.apply(this,arguments)},g.prototype.toJoinedString=function(e,t){var n=this.getSource();return t==o&&n instanceof Array?(e==o&&(e=""),n.join(e)):p.prototype.toJoinedString.apply(this,arguments)},g.prototype.getEnumerator=function(){var e=this.getSource(),t=-1;return{current:function(){return e[t]},moveNext:function(){return++t<e.length},dispose:a.Blank}};var b=function(e,t){this.prevSource=e,this.prevPredicate=t};b.prototype=new p,b.prototype.where=function(e){if(e=l.createLambda(e),e.length<=1){var t=this.prevPredicate,n=function(n){return t(n)&&e(n)};return new b(this.prevSource,n)}return p.prototype.where.call(this,e)},b.prototype.select=function(e){return e=l.createLambda(e),e.length<=1?new y(this.prevSource,this.prevPredicate,e):p.prototype.select.call(this,e)},b.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSource;return new d(function(){e=n.getEnumerator()},function(){for(;e.moveNext();)if(t(e.current()))return this.yieldReturn(e.current());return i},function(){l.dispose(e)})};var y=function(e,t,n){this.prevSource=e,this.prevPredicate=t,this.prevSelector=n};y.prototype=new p,y.prototype.where=function(e){return e=l.createLambda(e),e.length<=1?new b(this,e):p.prototype.where.call(this,e)},y.prototype.select=function(e){var t=this;if(e=l.createLambda(e),e.length<=1){var n=t.prevSelector,r=function(t){return e(n(t))};return new y(t.prevSource,t.prevPredicate,r)}return p.prototype.select.call(t,e)},y.prototype.getEnumerator=function(){var e,t=this.prevPredicate,n=this.prevSelector,r=this.prevSource;return new d(function(){e=r.getEnumerator()},function(){for(;e.moveNext();)if(t==o||t(e.current()))return this.yieldReturn(n(e.current()));return i},function(){l.dispose(e)})};var w=function(){var e=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n=function(e){return e===o?"null":e===t?"undefined":typeof e.toString===u.Function?e.toString():Object.prototype.toString.call(e)},r=function(e,t){var n=this;n.key=e,n.value=t,n.prev=o,n.next=o},l=function(){this.first=o,this.last=o};l.prototype={addLast:function(e){var t=this;t.last!=o?(t.last.next=e,e.prev=t.last,t.last=e):t.first=t.last=e},replace:function(e,t){e.prev!=o?(e.prev.next=t,t.prev=e.prev):this.first=t,e.next!=o?(e.next.prev=t,t.next=e.next):this.last=t},remove:function(e){e.prev!=o?e.prev.next=e.next:this.first=e.next,e.next!=o?e.next.prev=e.prev:this.last=e.prev}};var c=function(e){var t=this;t.countField=0,t.entryList=new l,t.buckets={},t.compareSelector=e==o?a.Identity:e};return c.prototype={add:function(t,i){var o=this,s=o.compareSelector(t),a=n(s),u=new r(t,i);if(e(o.buckets,a)){for(var l=o.buckets[a],c=0;c<l.length;c++)if(o.compareSelector(l[c].key)===s)return o.entryList.replace(l[c],u),l[c]=u,void 0;l.push(u)}else o.buckets[a]=[u];o.countField++,o.entryList.addLast(u)},get:function(r){var i=this,o=i.compareSelector(r),s=n(o);if(!e(i.buckets,s))return t;for(var a=i.buckets[s],u=0;u<a.length;u++){var l=a[u];if(i.compareSelector(l.key)===o)return l.value}return t},set:function(t,o){var a=this,u=a.compareSelector(t),l=n(u);if(e(a.buckets,l))for(var c=a.buckets[l],d=0;d<c.length;d++)if(a.compareSelector(c[d].key)===u){var f=new r(t,o);return a.entryList.replace(c[d],f),c[d]=f,s}return i},contains:function(t){var r=this,o=r.compareSelector(t),a=n(o);if(!e(r.buckets,a))return i;for(var u=r.buckets[a],l=0;l<u.length;l++)if(r.compareSelector(u[l].key)===o)return s;return i},clear:function(){this.countField=0,this.buckets={},this.entryList=new l},remove:function(t){var r=this,i=r.compareSelector(t),o=n(i);if(e(r.buckets,o))for(var s=r.buckets[o],a=0;a<s.length;a++)if(r.compareSelector(s[a].key)===i)return r.entryList.remove(s[a]),s.splice(a,1),0==s.length&&delete r.buckets[o],r.countField--,void 0},count:function(){return this.countField},toEnumerable:function(){var e=this;return new p(function(){var t;return new d(function(){t=e.entryList.first},function(){if(t!=o){var e={key:t.key,value:t.value};return t=t.next,this.yieldReturn(e)}return i},a.Blank)})}},c}(),x=function(e){var t=this;t.count=function(){return e.count()},t.get=function(t){return p.from(e.get(t))},t.contains=function(t){return e.contains(t)},t.toEnumerable=function(){return e.toEnumerable().select(function(e){return new C(e.key,e.value)})}},C=function(e,t){this.key=function(){return e},g.call(this,t)};C.prototype=new g,typeof define===u.Function&&define.amd?define("linqjs",[],function(){return p}):typeof module!==u.Undefined&&module.exports?module.exports=p:e.Enumerable=p}(this),define("scalejs.linq-linqjs",["scalejs!core","linqjs"],function(e,t){t.Utils.extendTo(Array),e.registerExtension({linq:{enumerable:t}})}),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define("scion",t):e.SCION=t()}(this,function(){function e(e){function t(e){void 0===d[e]&&(d[e]=0);var t=d[e]++;return"$generated-"+e+"-"+t}function n(e){return{states:[{type:"initial",transitions:[{target:e}]},e]}}function r(e,n){if(n.transitions&&u.push.apply(u,n.transitions),n.id){if(l[n.id])throw new Error("Redefinition of state id "+n.id);l[n.id]=n}n.type=n.type||"state",n.ancestors=e,n.depth=e.length,n.parent=e[0],n.transitions=n.transitions||[],n.transitions.forEach(function(e){e.documentOrder=c++,e.source=n});var i=r.bind(null,[n].concat(e));switch(n.states&&n.states.forEach(i),n.type){case"parallel":n.typeEnum=o.PARALLEL;break;case"initial":n.typeEnum=o.INITIAL;break;case"history":n.typeEnum=o.HISTORY;break;case"final":n.typeEnum=o.FINAL;break;case"state":case"scxml":n.typeEnum=n.states&&n.states.length?o.COMPOSITE:o.BASIC;break;default:throw new Error("Unknown state type: "+n.type)}n.descendants=n.states?n.states.concat(n.states.map(function(e){return e.descendants}).reduce(function(e,t){return e.concat(t)},[])):[];var s;if(n.typeEnum===o.COMPOSITE&&("string"==typeof n.initial?(s=n.states.filter(function(e){return e.id===n.initial}),s.length&&(n.initialRef=s[0])):(s=n.states.filter(function(e){return"initial"===e.type}),n.initialRef=s.length?s[0]:n.states[0]),!n.initialRef))throw new Error("Unable to locate initial state for composite state: "+n.id);if(n.typeEnum===o.COMPOSITE||n.typeEnum===o.PARALLEL){var a=n.states.filter(function(e){return"history"===e.type});n.historyRef=a[0]}n.id||(n.id=t(n.type),l[n.id]=n),["onEntry","onExit"].forEach(function(e){"function"==typeof n[e]&&(n[e]=[n[e]])})}function i(){u.forEach(function(e){"function"==typeof e.onTransition&&(e.onTransition=[e.onTransition])}),u.forEach(function(e){e.event&&(e.events=e.event.trim().split(/ +/))}),u.forEach(function(e){if(!e.targets&&"undefined"!=typeof e.target)if("string"==typeof e.target){var t=l[e.target];if(!t)throw new Error("Unable to find target state with id "+e.target);e.target=t,e.targets=[e.target]}else if(Array.isArray(e.target))e.targets=e.target.map(function(t){if("string"==typeof t){if(t=l[t],!t)throw new Error("Unable to find target state with id "+e.target);return t}return t});else{if("object"!=typeof e.target)throw new Error("Transition target has unknown type: "+e.target);e.targets=[e.target]}}),u.forEach(function(e){e.targets&&(e.lcca=a(e.source,e.targets[0])),e.scope=s(e)})}function s(e){var t="internal"===e.type&&e.source.parent&&e.targets&&e.targets.every(function(t){return e.source.descendants.indexOf(t)>-1});return e.targets?t?e.source:e.lcca:e.source}function a(e,t){var n=[];if(e.ancestors.forEach(function(e){e.typeEnum===o.COMPOSITE&&e.descendants.indexOf(t)>-1&&n.push(e)}),!n.length)throw new Error("Could not find LCA for states.");return n[0]}var u=[],l={},c=0,d={},f=n(e);return r([],f),i(),f}function t(e){e=e||[],this.o=[],e.forEach(function(e){this.add(e)},this)}function n(e){var t=e[0],n=e[1];return t.source.depth<n.source.depth?n:n.source.depth<t.source.depth?t:t.documentOrder<n.documentOrder?t:n}function r(r,i){this._model=e(r),this.opts=i||{},this.opts.log=i.log||("undefined"==typeof console?{log:function(){}}:console.log.bind(console)),this.opts.Set=this.opts.Set||t,this.opts.priorityComparisonFn=this.opts.priorityComparisonFn||n,this.opts.transitionSelector=this.opts.transitionSelector||s,this._sessionid=this.opts.sessionid||"",this._configuration=new this.opts.Set,this._historyValue={},this._internalEventQueue=[],this._isInFinalState=!1,this._timeoutMap={},this._x={_sessionId:i.sessionId||null,_name:r.name||i.name||null,_ioprocessors:i.ioprocessors||null},this._listeners=[],this._userScriptingContext={raise:function(e,t){var n;n="string"==typeof e?{name:e,data:t}:e,this._internalEventQueue.push(n)}.bind(this),send:function(){this.send.apply(this,arguments)}.bind(this),cancel:function(){this.cancel.apply(this,arguments)}.bind(this)}}function i(e,t){t=t||{},this._isStepping=!1,this._externalEventQueue=[],this.send=t.send||this.send,this.cancel=t.cancel||this.cancel,r.call(this,e,t)}var o={BASIC:0,COMPOSITE:1,PARALLEL:2,HISTORY:3,INITIAL:4,FINAL:5};t.prototype={add:function(e){return this.contains(e)?void 0:this.o.push(e)},remove:function(e){var t=this.o.indexOf(e);return-1===t?!1:(this.o.splice(t,1),!0)},union:function(e){return e=e.iter?e.iter():e,e.forEach(function(e){this.add(e)},this),this},difference:function(e){return e=e.iter?e.iter():e,e.forEach(function(e){this.remove(e)},this),this},contains:function(e){return this.o.indexOf(e)>-1},iter:function(){return this.o},isEmpty:function(){return!this.o.length},equals:function(e){var t=e.iter(),n=this.o;return n.every(function(e){return t.indexOf(e)>-1})&&t.every(function(e){return n.indexOf(e)>-1})},toString:function(){return"Set("+this.o.toString()+")"}};var s=function(){function e(e){return new RegExp("^"+e.replace(/\./g,"\\.")+"(\\.[0-9a-zA-Z]+)*$")}function t(t){return r[t]?r[t]:r[t]=e(t)}function n(e,n){return n&&n.name&&(e.events.indexOf("*")>-1?!0:e.events.filter(function(e){return t(e).test(n.name)}).length)}var r={};return function(e,t,r){return e.transitions.filter(function(e){return!(e.events&&!n(e,t)||e.cond&&!r(e.cond))})}}(),a={getAncestors:function(e,t){var n;return n=e.ancestors.indexOf(t),n>-1?e.ancestors.slice(0,n):e.ancestors},getAncestorsOrSelf:function(e,t){return[e].concat(this.getAncestors(e,t))},getDescendantsOrSelf:function(e){return[e].concat(e.descendants)},isOrthogonalTo:function(e,t){return!this.isAncestrallyRelatedTo(e,t)&&this.getLCA(e,t).typeEnum===o.PARALLEL},isAncestrallyRelatedTo:function(e,t){return this.getAncestorsOrSelf(t).indexOf(e)>-1||this.getAncestorsOrSelf(e).indexOf(t)>-1},getLCA:function(e,t){var n=this.getAncestors(e).filter(function(e){return e.descendants.indexOf(t)>-1},this);return n[0]}},u=!1;return r.prototype={start:function(){return u&&this.opts.log("performing initial big step"),this._configuration.add(this._model.initialRef),this._performBigStep(),this.getConfiguration()},getConfiguration:function(){return this._configuration.iter().map(function(e){return e.id})},getFullConfiguration:function(){return this._configuration.iter().map(function(e){return[e].concat(a.getAncestors(e))},this).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return e.id}).reduce(function(e,t){return e.indexOf(t)>-1?e:e.concat(t)},[])},isIn:function(e){return this.getFullConfiguration().indexOf(e)>-1},isFinal:function(){return this._isInFinalState},_performBigStep:function(e){e&&this._internalEventQueue.push(e);for(var t=!0;t;){var n=this._internalEventQueue.shift()||null,r=this._performSmallStep(n);t=!r.isEmpty()}this._isInFinalState=this._configuration.iter().every(function(e){return e.typeEnum===o.FINAL})},_performSmallStep:function(e){u&&this.opts.log("selecting transitions with currentEvent: ",e);var t=this._selectTransitions(e);if(u&&this.opts.log("selected transitions: ",t),!t.isEmpty()){u&&this.opts.log("sorted transitions: ",t);var n=new this.opts.Set(t.iter().filter(function(e){return e.targets})),r=this._getStatesExited(n),i=r[0],s=r[1],a=this._getStatesEntered(n),l=a[0],c=a[1];u&&this.opts.log("basicStatesExited ",i),u&&this.opts.log("basicStatesEntered ",l),u&&this.opts.log("statesExited ",s),u&&this.opts.log("statesEntered ",c);var d=new this.opts.Set;u&&this.opts.log("executing state exit actions");var f=this._evaluateAction.bind(this,e);s.forEach(function(e){(u||this.opts.logStatesEnteredAndExited)&&this.opts.log("exiting ",e.id),this._listeners.forEach(function(t){t.onExit&&t.onExit(e.id)}),void 0!==e.onExit&&e.onExit.forEach(f);var t;e.historyRef&&(t=e.historyRef.isDeep?function(t){return t.typeEnum===o.BASIC&&e.descendants.indexOf(t)>-1}:function(t){return t.parent===e},this._historyValue[e.historyRef.id]=s.filter(t))},this);var p=t.iter().sort(function(e,t){return e.documentOrder-t.documentOrder});u&&this.opts.log("executing transitition actions"),p.forEach(function(e){var t=e.targets&&e.targets.map(function(e){return e.id});this._listeners.forEach(function(n){n.onTransition&&n.onTransition(e.source.id,t)}),void 0!==e.onTransition&&e.onTransition.forEach(f)},this),u&&this.opts.log("executing state enter actions"),c.forEach(function(e){(u||this.opts.logStatesEnteredAndExited)&&this.opts.log("entering",e.id),void 0!==e.onEntry&&e.onEntry.forEach(f),this._listeners.forEach(function(t){t.onEntry&&f(function(n){t.onEntry.call(this,e.id,n)})})},this),u&&this.opts.log("updating configuration "),u&&this.opts.log("old configuration ",this._configuration),this._configuration.difference(i),this._configuration.union(l),u&&this.opts.log("new configuration ",this._configuration),d.isEmpty()||(u&&this.opts.log("adding triggered events to inner queue ",d),this._internalEventQueue.push(d))}return t},_evaluateAction:function(e,t){return t.call(this._userScriptingContext,e,this.isIn.bind(this),this._x._sessionId,this._x._name,this._x._ioprocessors,this._x)},_getStatesExited:function(e){var t=new this.opts.Set,n=new this.opts.Set;e.iter().forEach(function(e){var r=e.scope,i=r.descendants;this._configuration.iter().forEach(function(e){i.indexOf(e)>-1&&(n.add(e),t.add(e),a.getAncestors(e,r).forEach(function(e){t.add(e)}))},this)},this);var r=t.iter().sort(function(e,t){return t.depth-e.depth});return[n,r]},_getStatesEntered:function(e){var t={statesToEnter:new this.opts.Set,basicStatesToEnter:new this.opts.Set,statesProcessed:new this.opts.Set,statesToProcess:[]};e.iter().forEach(function(e){e.targets.forEach(function(n){this._addStateAndAncestors(n,e.scope,t)},this)},this);for(var n;n=t.statesToProcess.pop();)this._addStateAndDescendants(n,t);var r=t.statesToEnter.iter().sort(function(e,t){return e.depth-t.depth});return[t.basicStatesToEnter,r]},_addStateAndAncestors:function(e,t,n){this._addStateAndDescendants(e,n),a.getAncestors(e,t).forEach(function(e){e.typeEnum===o.COMPOSITE?(n.statesToEnter.add(e),n.statesProcessed.add(e)):this._addStateAndDescendants(e,n)},this)},_addStateAndDescendants:function(e,t){t.statesProcessed.contains(e)||(e.typeEnum===o.HISTORY?e.id in this._historyValue?this._historyValue[e.id].forEach(function(n){this._addStateAndAncestors(n,e.parent,t)},this):(t.statesToEnter.add(e),t.basicStatesToEnter.add(e)):(t.statesToEnter.add(e),e.typeEnum===o.PARALLEL?t.statesToProcess.push.apply(t.statesToProcess,e.states.filter(function(e){return e.typeEnum!==o.HISTORY})):e.typeEnum===o.COMPOSITE?t.statesToProcess.push(e.initialRef):(e.typeEnum===o.INITIAL||e.typeEnum===o.BASIC||e.typeEnum===o.FINAL)&&t.basicStatesToEnter.add(e)),t.statesProcessed.add(e))},_selectTransitions:function(e){if(this.opts.onlySelectFromBasicStates)var t=this._configuration.iter();else{var n=new this.opts.Set;this._configuration.iter().forEach(function(e){n.add(e),a.getAncestors(e).forEach(function(e){n.add(e)})},this),t=n.iter()}var r=e&&e.name&&e.name.search("."),i=r?s:this.opts.transitionSelector,o=new this.opts.Set,l=this._evaluateAction.bind(this,e);t.forEach(function(t){i(t,e,l).forEach(function(e){o.add(e)})});var c=this._selectPriorityEnabledTransitions(o);return u&&this.opts.log("priorityEnabledTransitions",c),c},_selectPriorityEnabledTransitions:function(e){var t=new this.opts.Set,n=this._getInconsistentTransitions(e),r=n[0],i=n[1];for(t.union(r),u&&this.opts.log("enabledTransitions",e),u&&this.opts.log("consistentTransitions",r),u&&this.opts.log("inconsistentTransitionsPairs",i),u&&this.opts.log("priorityEnabledTransitions",t);!i.isEmpty();)e=new this.opts.Set(i.iter().map(function(e){return this.opts.priorityComparisonFn(e)},this)),n=this._getInconsistentTransitions(e),r=n[0],i=n[1],t.union(r),u&&this.opts.log("enabledTransitions",e),u&&this.opts.log("consistentTransitions",r),u&&this.opts.log("inconsistentTransitionsPairs",i),u&&this.opts.log("priorityEnabledTransitions",t);return t},_getInconsistentTransitions:function(e){var t=new this.opts.Set,n=new this.opts.Set,r=e.iter();u&&this.opts.log("transitions",r);for(var i=0;i<r.length;i++)for(var o=i+1;o<r.length;o++){var s=r[i],a=r[o];this._conflicts(s,a)&&(t.add(s),t.add(a),n.add([s,a]))}var l=e.difference(t);return[l,n]},_conflicts:function(e,t){return!this._isArenaOrthogonal(e,t)},_isArenaOrthogonal:function(e,t){u&&this.opts.log("transition scopes",e.scope,t.scope);var n=a.isOrthogonalTo(e.scope,t.scope);return u&&this.opts.log("transition scopes are orthogonal?",n),n},registerListener:function(e){return this._listeners.push(e)},unregisterListener:function(e){return this._listeners.splice(this._listeners.indexOf(e),1)}},i.prototype=Object.create(r.prototype),i.prototype.gen=function(e,t){var n;switch(typeof e){case"string":n={name:e,data:t};break;case"object":if("string"!=typeof e.name)throw new Error('Event object must have "name" property of type string.');n=e;break;default:throw new Error("First argument to gen must be a string or object.")}if(this._externalEventQueue.push(n),this._isStepping)return null;this._isStepping=!0;for(var r;r=this._externalEventQueue.shift();)this._performBigStep(r);return this._isStepping=!1,this.getConfiguration()},i.prototype.send=function(e,t,n){var r;switch(typeof e){case"string":r={name:e,data:t},n=n||{};break;case"object":if("string"!=typeof e.name)throw new Error('Event object must have "name" property of type string.');r=e,n=t||{};break;default:throw new Error("First argument to send must be a string or object.")}if(void 0===n.delay)this.gen(r);else{if("undefined"==typeof setTimeout)throw new Error("Default implementation of Statechart.prototype.send will not work unless setTimeout is defined globally.");u&&this.opts.log("sending event",r.name,"with content",r.data,"after delay",n.delay);var i=setTimeout(this.gen.bind(this,r),n.delay||0);n.sendid&&(this._timeoutMap[n.sendid]=i)}},i.prototype.cancel=function(e){if("undefined"==typeof clearTimeout)throw new Error("Default implementation of Statechart.prototype.cancel will not work unless setTimeout is defined globally.");e in this._timeoutMap&&(u&&this.opts.log("cancelling ",e," with timeout id ",this._timeoutMap[e]),clearTimeout(this._timeoutMap[e]))},{BaseInterpreter:r,Statechart:i,ArraySet:t,STATE_TYPES:o,initializeModel:e}}),define("scalejs.statechart-scion/state.builder",["scalejs!core","scion"],function(e,t){return function(n){function r(e){return R(function(t){if(t.onEntry)throw new Error("Only one `onEntry` action is allowed.");if("function"!=typeof e)throw new Error("`onEntry` takes a function as a parameter.");return t.onEntry=e,t})}function i(e){return R(function(t){if(t.onExit)throw new Error("Only one `onExit` action is allowed.");if("function"!=typeof e)throw new Error("`onExit` takes a function as a parameter.");return t.onExit=e,t})}function o(e){return R(function(t){t.event=e})}function s(e){return R(function(t){t.cond=e})}function a(e,t,n){return R(function(r){return"state"===r.type||"parallel"===r.type?w(a(e,t,n))(r):(e&&(r.type="internal"),"function"==typeof t?r.onTransition=t:(r.target=E(t,"array")?t:t.split(" "),n&&(r.onTransition=n)),void 0)})}function u(e,t){return a(!1,e,t)}function l(e,t){return a(!0,e,t)}function c(e){if("function"==typeof e)return R(function(t){t.onTransition=e});if("$yield"===e.kind)return e;throw new Error("Unsupported transition action",e)}function d(){var e,t=x.copy(arguments),n=t.pop();if(t.length>2)throw new Error("First (optional) argument should be event name, second (optional) argument should be a condition function");if("function"!=typeof n&&"$yield"!==n.kind)throw new Error("Last argument should be either `goto` or a function.");return e=t.map(function(e){if("string"==typeof e)return o(e);if("function"==typeof e)return s(e);throw new Error("Transition argument ",e," is not supported. First (optional) argument should be event name, second (optional) argument should be a condition function")}),R(w.apply(null,e.concat([c(n)])))}function f(){var e=x.copy(arguments),t=e.pop();if(e.forEach(function(e){if("string"!=typeof e)throw new Error("`whenInStates` accepts list of states and either `goto` or a function as the last argument.")}),"function"!=typeof t&&"$yield"!==t.kind)throw new Error("Last argument should be either `goto` or a function.");return R(w(s(function(t,n){return e.every(function(e){return n(e)})}),t))}function p(){var e=x.copy(arguments),t=e.pop();if(e.forEach(function(e){if("string"!=typeof e)throw new Error("`whenNotInStates` accepts list of states and either `goto` or a function as the last argument.")}),"function"!=typeof t&&"$yield"!==t.kind)throw new Error("Last argument should be either `goto` or a function.");return R(w(s(function(t,n){return e.every(function(e){return!n(e)})}),t))}function h(e){return R(function(t){return t.parallel?new Error("`initial` shouldn't be specified on parallel region."):(t.initial=e,void 0)})}function v(n){return function(){var r=b.apply(null,arguments);return new t.Statechart(r,S({log:e.log.debug},n))}}var m,g,b,y,w,x=e.array,C=e.object.has,E=e.type.is,S=e.object.merge,k=e.functional.builder,R=k.$yield;return m=k({run:function(e,t){var n=new function(){};return n.type=C(t,"parallel")?"parallel":"state",e(n),n},delay:function(e){return e()},zero:function(){return function(){}},$yield:function(e){return e},combine:function(e,t){return function(n){e(n),t(n)}},missing:function(e){if("string"==typeof e)return function(t){if(t.id)throw new Error("Can't set state id to \""+e+'". state\'s id is already set to "'+t.id+'"');t.id=e};if("function"==typeof e)return e;if("state"===e.type||"parallel"===e.type)return function(t){t.states||(t.states=[]),t.states.push(e)};throw new Error("Missing builder for expression: "+JSON.stringify(e))}}),b=m(),y=m({parallel:!0}),g=k({run:function(e){return function(t){t.transitions||(t.transitions=[]);var n={};e(n),t.transitions.push(n)}},delay:function(e){return e()},zero:function(){return function(){}},$yield:function(e){return e},combine:function(e,t){return function(n){e(n),t(n)}},missing:function(e){if("function"==typeof e)return e;throw new Error('Unknown operation "'+e.kind+'" in transition expression',e)}}),w=g(),{builder:v,state:b,parallel:y,initial:h,onEntry:r,onExit:i,on:d,whenInStates:f,whenNotInStates:p,"goto":u,gotoInternally:l,statechart:v({logStatesEnteredAndExited:n.logStatesEnteredAndExited,log:e.log.debug})}}}),define("scalejs.statechart-scion/state",["scalejs!core","./state.builder","scion","scalejs.functional","scalejs.linq-linqjs"],function(e,t,n){return function(r){function i(e){return y(e,"states")?m.make(e).concat(m.from(e.states).selectMany(i)):m.make(e)}function o(e,t){var n=i(e).firstOrDefault(function(e){return e.id===t});return n}function s(e,t){var n=i(e).firstOrDefault(function(e){return e.states&&e.states.some(function(e){return e.id===t})});return n}function a(){return x(function(e,t){var n,r;if(n=o(h,e),!n)throw new Error('Parent state "'+e+"\" doesn't exist");if(y(t,"id")&&(r=o(h,t.id)))throw new Error('State "'+t.id+'" already exists.');y(n,"states")||(n.states=[]),n.states.push(t)}).apply(null,arguments)}function u(t){if(e.isApplicationRunning())throw new Error("Can't register a state while application is running.");g(arguments,1).forEach(a(t))}function l(e,t){var n;if(n=o(h,e),!n)throw new Error('Parent state "'+e+"\" doesn't exist");t.expr(n)}function c(){if(e.isApplicationRunning())throw new Error("Can't unregister a state while application is running.");g(arguments).forEach(function(e){var t=s(h,e),n=m.from(t.states).first(function(t){return t.id===e});b(t.states,n)})}function d(e,t,n){var r;if(w(e,"string"))r={name:e};else{if(!w(e,"name"))throw new Error("event object should have `name` property.");r=e}!y(n)&&w(t,"number")?n=t:r.data=t,v.send(r,{delay:n})}function f(){return e.reactive.Observable.create(function(e){var t={onEntry:function(t){e.onNext({event:"entry",state:t,context:this})},onExit:function(t){e.onNext({event:"exit",state:t})},onTransition:function(t,n){e.onNext({event:"transition",source:t,targets:n})}};return v.registerListener(t),function(){v.unregisterListener(t)}})}function p(e){return function(t){f().where(function(t){return"entry"===t.event&&t.state===e}).take(1).subscribe(function(){t()})}}var h,v,m=e.linq.enumerable,g=e.array.toArray,b=e.array.removeOne,y=e.object.has,w=e.type.is,x=e.functional.curry,C=t(r),E=C.state,S=C.parallel;return h=E("scalejs-app",S("root")),e.onApplicationEvent(function(t){switch(t){case"started":v=new n.Statechart(h,{logStatesEnteredAndExited:r.logStatesEnteredAndExited,log:e.log.debug}),v.start();break;case"stopped":}}),{registerStates:u,registerTransition:l,unregisterStates:c,raise:d,observe:f,onState:p,builder:C}}}),define("scalejs.statechart-scion",["scalejs!core","./scalejs.statechart-scion/state","module"],function(e,t,n){e.registerExtension({state:t(n.config())})}),function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define("knockout.mapping",["knockout","exports"],e):e(ko,ko.mapping={})}(function(e,t){function n(e,t){for(var n={},r=e.length-1;r>=0;--r)n[e[r]]=e[r];for(var r=t.length-1;r>=0;--r)n[t[r]]=t[r];var i=[];for(var o in n)i.push(n[o]);return i}function r(e,i){var o;for(var s in i)if(i.hasOwnProperty(s)&&i[s])if(o=t.getType(e[s]),s&&e[s]&&"array"!==o&&"string"!==o)r(e[s],i[s]);else{var a="array"===t.getType(e[s])&&"array"===t.getType(i[s]);e[s]=a?n(e[s],i[s]):i[s]}}function i(e,t){var n={};return r(n,e),r(n,t),n}function o(e,t){for(var n=i({},e),r=S.length-1;r>=0;r--){var o=S[r];n[o]&&(n[""]instanceof Object||(n[""]={}),n[""][o]=n[o],delete n[o])}return t&&(n.ignore=s(t.ignore,n.ignore),n.include=s(t.include,n.include),n.copy=s(t.copy,n.copy),n.observe=s(t.observe,n.observe)),n.ignore=s(n.ignore,N.ignore),n.include=s(n.include,N.include),n.copy=s(n.copy,N.copy),n.observe=s(n.observe,N.observe),n.mappedProperties=n.mappedProperties||{},n.copiedProperties=n.copiedProperties||{},n}function s(n,r){return"array"!==t.getType(n)&&(n="undefined"===t.getType(n)?[]:[n]),"array"!==t.getType(r)&&(r="undefined"===t.getType(r)?[]:[r]),e.utils.arrayGetDistinctValues(n.concat(r))}function a(t,n){var r=e.dependentObservable;e.dependentObservable=function(n,r,i){i=i||{},n&&"object"==typeof n&&(i=n);var o=i.deferEvaluation,s=!1,a=function(n){var r=e.dependentObservable;e.dependentObservable=C;var i=e.isWriteableObservable(n);e.dependentObservable=r;var o=C({read:function(){return s||(e.utils.arrayRemoveItem(t,n),s=!0),n.apply(n,arguments)},write:i&&function(e){return n(e)},deferEvaluation:!0});return w&&(o._wrapper=!0),o};i.deferEvaluation=!0;var u=new C(n,r,i);return o||(u=a(u),t.push(u)),u},e.dependentObservable.fn=C.fn,e.computed=e.dependentObservable;var i=n();return e.dependentObservable=r,e.computed=e.dependentObservable,i}function u(n,r,o,s,c,v,m){var g="array"===t.getType(e.utils.unwrapObservable(r));if(v=v||"",t.isMapped(n)){var w=e.utils.unwrapObservable(n)[x];o=i(w,o)}var C={data:r,parent:m||c},E=function(){return o[s]&&o[s].create instanceof Function},S=function(t){return a(b,function(){return e.utils.unwrapObservable(c)instanceof Array?o[s].create({data:t||C.data,parent:C.parent,skip:k}):o[s].create({data:t||C.data,parent:C.parent})})},R=function(){return o[s]&&o[s].update instanceof Function},N=function(t,n){var r={data:n||C.data,parent:C.parent,target:e.utils.unwrapObservable(t)};return e.isWriteableObservable(t)&&(r.observable=t),o[s].update(r)},A=y.get(r);if(A)return A;if(s=s||"",g){var T=[],D=!1,O=function(e){return e};o[s]&&o[s].key&&(O=o[s].key,D=!0),e.isObservable(n)||(n=e.observableArray([]),n.mappedRemove=function(e){var t="function"==typeof e?e:function(t){return t===O(e)};return n.remove(function(e){return t(O(e))})},n.mappedRemoveAll=function(t){var r=f(t,O);return n.remove(function(t){return-1!=e.utils.arrayIndexOf(r,O(t))})},n.mappedDestroy=function(e){var t="function"==typeof e?e:function(t){return t===O(e)};return n.destroy(function(e){return t(O(e))})},n.mappedDestroyAll=function(t){var r=f(t,O);return n.destroy(function(t){return-1!=e.utils.arrayIndexOf(r,O(t))})},n.mappedIndexOf=function(t){var r=f(n(),O),i=O(t);return e.utils.arrayIndexOf(r,i)},n.mappedCreate=function(t){if(-1!==n.mappedIndexOf(t))throw new Error("There already is an object with the key that you specified.");var r=E()?S(t):t;if(R()){var i=N(r,t);e.isWriteableObservable(r)?r(i):r=i}return n.push(r),r});var _=f(e.utils.unwrapObservable(n),O).sort(),j=f(r,O);D&&j.sort();var I,$,P=e.utils.compareArrays(_,j),L={},B=e.utils.unwrapObservable(r),M={},F=!0;for(I=0,$=B.length;$>I;I++){var W=O(B[I]);if(void 0===W||W instanceof Object){F=!1;break}M[W]=B[I]}var H=[],V=0;for(I=0,$=P.length;$>I;I++){var z,W=P[I],q=v+"["+I+"]";switch(W.status){case"added":var U=F?M[W.value]:d(e.utils.unwrapObservable(r),W.value,O);z=u(void 0,U,o,s,n,q,c),E()||(z=e.utils.unwrapObservable(z));var J=l(e.utils.unwrapObservable(r),U,L);z===k?V++:H[J-V]=z,L[J]=!0;break;case"retained":var U=F?M[W.value]:d(e.utils.unwrapObservable(r),W.value,O);z=d(n,W.value,O),u(z,U,o,s,n,q,c);var J=l(e.utils.unwrapObservable(r),U,L);H[J]=z,L[J]=!0;break;case"deleted":z=d(n,W.value,O)}T.push({event:W.status,item:z})}n(H),o[s]&&o[s].arrayChanged&&e.utils.arrayForEach(T,function(e){o[s].arrayChanged(e.event,e.item)})}else if(h(r)){if(n=e.utils.unwrapObservable(n),!n){if(E()){var G=S();return R()&&(G=N(G)),G}if(R())return N(G);n={}}if(R()&&(n=N(n)),y.save(r,n),R())return n;p(r,function(t){var i=v.length?v+"."+t:t;if(-1==e.utils.arrayIndexOf(o.ignore,i)){if(-1!=e.utils.arrayIndexOf(o.copy,i))return n[t]=r[t],void 0;if("object"!=typeof r[t]&&"array"!=typeof r[t]&&o.observe.length>0&&-1==e.utils.arrayIndexOf(o.observe,i))return n[t]=r[t],o.copiedProperties[i]=!0,void 0;var s=y.get(r[t]),a=u(n[t],r[t],o,t,n,i,n),l=s||a;if(o.observe.length>0&&-1==e.utils.arrayIndexOf(o.observe,i))return n[t]=l(),o.copiedProperties[i]=!0,void 0;e.isWriteableObservable(n[t])?n[t](e.utils.unwrapObservable(l)):(l=void 0===n[t]?l:e.utils.unwrapObservable(l),n[t]=l),o.mappedProperties[i]=!0}})}else switch(t.getType(r)){case"function":R()?e.isWriteableObservable(r)?(r(N(r)),n=r):n=N(r):n=r;break;default:if(e.isWriteableObservable(n)){if(R()){var K=N(n);return n(K),K}var K=e.utils.unwrapObservable(r);return n(K),K}var X=E()||R();if(n=E()?S():e.observable(e.utils.unwrapObservable(r)),R()&&n(N(n)),X)return n}return n}function l(e,t,n){for(var r=0,i=e.length;i>r;r++)if(n[r]!==!0&&e[r]===t)return r;return null}function c(n,r){var i;return r&&(i=r(n)),"undefined"===t.getType(i)&&(i=n),e.utils.unwrapObservable(i)}function d(t,n,r){t=e.utils.unwrapObservable(t);for(var i=0,o=t.length;o>i;i++){var s=t[i];if(c(s,r)===n)return s}throw new Error("When calling ko.update*, the key '"+n+"' was not found!")}function f(t,n){return e.utils.arrayMap(e.utils.unwrapObservable(t),function(e){return n?c(e,n):e})}function p(e,n){if("array"===t.getType(e))for(var r=0;r<e.length;r++)n(r);else for(var i in e)n(i)}function h(e){var n=t.getType(e);return("object"===n||"array"===n)&&null!==e}function v(e,n,r){var i=e||"";return"array"===t.getType(n)?e&&(i+="["+r+"]"):(e&&(i+="."),i+=r),i}function m(){var t=[],n=[];
this.save=function(r,i){var o=e.utils.arrayIndexOf(t,r);o>=0?n[o]=i:(t.push(r),n.push(i))},this.get=function(r){var i=e.utils.arrayIndexOf(t,r),o=i>=0?n[i]:void 0;return o}}function g(){var e={},t=function(t){var n;try{n=t}catch(r){n="$$$"}var i=e[n];return void 0===i&&(i=new m,e[n]=i),i};this.save=function(e,n){t(e).save(e,n)},this.get=function(e){return t(e).get(e)}}var b,y,w=!0,x="__ko_mapping__",C=e.dependentObservable,E=0,S=["create","update","key","arrayChanged"],k={},R={include:["_destroy"],ignore:[],copy:[],observe:[]},N=R;t.isMapped=function(t){var n=e.utils.unwrapObservable(t);return n&&n[x]},t.fromJS=function(e){if(0==arguments.length)throw new Error("When calling ko.fromJS, pass the object you want to convert.");try{E++||(b=[],y=new g);var t,n;2==arguments.length&&(arguments[1][x]?n=arguments[1]:t=arguments[1]),3==arguments.length&&(t=arguments[1],n=arguments[2]),n&&(t=i(t,n[x])),t=o(t);var r=u(n,e,t);if(n&&(r=n),!--E)for(;b.length;){var s=b.pop();s&&s()}return r[x]=i(r[x],t),r}catch(a){throw E=0,a}},t.fromJSON=function(n){var r=e.utils.parseJson(n);return arguments[0]=r,t.fromJS.apply(this,arguments)},t.updateFromJS=function(){throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},t.updateFromJSON=function(){throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},t.toJS=function(n,r){if(N||t.resetDefaultOptions(),0==arguments.length)throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==t.getType(N.ignore))throw new Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==t.getType(N.include))throw new Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==t.getType(N.copy))throw new Error("ko.mapping.defaultOptions().copy should be an array.");return r=o(r,n[x]),t.visitModel(n,function(t){return e.utils.unwrapObservable(t)},r)},t.toJSON=function(n,r){var i=t.toJS(n,r);return e.utils.stringifyJson(i)},t.defaultOptions=function(){return arguments.length>0?(N=arguments[0],void 0):N},t.resetDefaultOptions=function(){N={include:R.include.slice(0),ignore:R.ignore.slice(0),copy:R.copy.slice(0)}},t.getType=function(e){if(e&&"object"==typeof e){if(e.constructor===Date)return"date";if(e.constructor===Array)return"array"}return typeof e},t.visitModel=function(n,r,i){i=i||{},i.visitedObjects=i.visitedObjects||new g;var s,a=e.utils.unwrapObservable(n);if(!h(a))return r(n,i.parentName);i=o(i,a[x]),r(n,i.parentName),s="array"===t.getType(a)?[]:{},i.visitedObjects.save(n,s);var u=i.parentName;return p(a,function(n){if(!i.ignore||-1==e.utils.arrayIndexOf(i.ignore,n)){var o=a[n];if(i.parentName=v(u,a,n),-1!==e.utils.arrayIndexOf(i.copy,n)||-1!==e.utils.arrayIndexOf(i.include,n)||!a[x]||!a[x].mappedProperties||a[x].mappedProperties[n]||!a[x].copiedProperties||a[x].copiedProperties[n]||"array"===t.getType(a)){switch(t.getType(e.utils.unwrapObservable(o))){case"object":case"array":case"undefined":var l=i.visitedObjects.get(o);s[n]="undefined"!==t.getType(l)?l:t.visitModel(o,r,i);break;default:s[n]=r(o,i.parentName)}}}}),s}}),function(e){"function"==typeof define&&define.amd?define("scalejs.mvvm/classBindingProvider",["knockout","exports"],e):e(ko)}(function(e,t){var n=function(e,t){var n,r;if(!e)return e;n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r],r,e));return n},r=function(e){return function(){return e}};e.version>="3.0.0"&&!function(){var t=document.createElement("div");e.applyBindings(null,t);var n=e.contextFor(t),r=!e.storedBindingContextForNode,i=r?"A":"_subscribable",o=r?"wb":"_addNode",s=function(){};s[o]=s,n.constructor.prototype[i]=s,e.cleanNode(t)}();var i=function(t,i){var o=new e.bindingProvider;i=i||{},this.attribute=i.attribute||"data-class",this.virtualAttribute="ko "+(i.virtualAttribute||"class")+":",this.fallback=i.fallback,this.bindings=t||{},this.bindingRouter=i.bindingRouter||function(e,t){var n,r,i,o;if(t[e])return t[e];for(i=e.split("."),o=t,n=0,r=i.length;r>n;n++)o=o[i[n]];return o},this.registerBindings=function(t){e.utils.extend(this.bindings,t)},this.nodeHasBindings=function(e){var t,n;return 1===e.nodeType?t=e.getAttribute(this.attribute):8===e.nodeType&&(n=""+e.nodeValue||e.text,t=n.indexOf(this.virtualAttribute)>-1),!t&&this.fallback&&(t=o.nodeHasBindings(e)),t},this.getBindingsFunction=function(t){return function(s,a){var u,l,c,d,f,p,h={},v="";if(1===s.nodeType?v=s.getAttribute(this.attribute):8===s.nodeType&&(f=""+s.nodeValue||s.text,p=f.indexOf(this.virtualAttribute),p>-1&&(v=f.substring(p+this.virtualAttribute.length))),v)for(v=v.replace(/^(\s|\u00A0)+|(\s|\u00A0)+$/g,"").replace(/(\s|\u00A0){2,}/g," ").split(" "),u=0,l=v.length;l>u;u++)c=this.bindingRouter(v[u],this.bindings),c?(d="function"==typeof c?c.call(a.$data,a,v):c,t&&(d=n(d,r)),e.utils.extend(h,d)):i.log&&i.log('No binding function provided for data class "'+v[u]+'" in element ',s,"\nMake sure data class is spelled correctly and that it's binding function is registered.");else this.fallback&&(h=o[t?"getBindingAccessors":"getBindings"](s,a));if(i.log)for(bindingName in h)h.hasOwnProperty(bindingName)&&"_ko_property_writers"!==bindingName&&"valueUpdate"!==bindingName&&"optionsText"!==bindingName&&!e.bindingHandlers[bindingName]&&(d?i.log('Unknown binding handler "'+bindingName+'" found in element',s,' defined in data-class "'+v+'" as',d,"\nMake sure that binding handler's name is spelled correctly and that it's properly registered. \nThe binding will be ignored."):i.log('Unknown binding handler "'+bindingName+'" in',s,"\nMake sure that it's name spelled correctly and that it's properly registered. \nThe binding will be ignored."));return h}},this.getBindings=this.getBindingsFunction(!1),this.getBindingAccessors=this.getBindingsFunction(!0)};return t||(e.classBindingProvider=i),i}),define("scalejs.mvvm/htmlTemplateSource",["knockout","scalejs!core"],function(e,t){function n(e){var t=document.createElement("div");"undefined"!=typeof WinJS?WinJS.Utilities.setInnerHTMLUnsafe(t,e):t.innerHTML=e,i(t.childNodes).forEach(function(e){1===e.nodeType&&o(e,"id")&&(a[e.id]=e.innerHTML)})}function r(e){function t(t,n){return o(a.data,e)||(a.data[e]={}),1===arguments.length?a.data[e][t]:(a.data[e][t]=n,void 0)}function n(t){if(0===arguments.length)return a[e];throw new Error('An attempt to override template "'+e+'" with content "'+t+'" Template overriding is not supported.')}return{data:t,text:n}}var i=t.array.toArray,o=t.object.has,s=new e.nativeTemplateEngine,a={data:{}};return s.makeTemplateSource=r,e.setTemplateEngine(s),{registerTemplates:n}}),define("scalejs.mvvm/selectableArray",["knockout","scalejs!core"],function(e,t){var n=e.isObservable,r=e.utils.unwrapObservable,i=e.observable,o=e.computed,s=t.object.has,a=t.array;return function(e,t){function u(e){if(!n(e.isSelected)||s(t.isSelectedPath)&&"isSelected"!==t.isSelectedPath){if(n(e.isSelected))throw new Error('item has observable `isSelected` property but `isSelectedPath` specified as "'+t.isSelectedPath+"\". `selectable` uses `isSelected` property of an item to determine whether it's selected. Either don't specify `isSelectedPath` or rename `isSelected` property to something else.");if(e.hasOwnProperty("isSelected"))throw new Error("item has non-observable `isSelected` property. `selectable` uses `isSelected` property of an item to determine whether it's selected. Either make `isSelected` observable or rename it.");if(e.isSelected=i(),s(t.isSelectedPath)&&"isSelected"!==t.isSelectedPath&&!n(e[t.isSelectedPath]))throw new Error("item's property \""+t.isSelectedPath+"\" specified by `isSelectedPath`  isn't observable. Either make it observable or specify different property in  `isSelectedPath`");s(t.isSelectedPath)&&(e.isSelected=e[t.isSelectedPath]),e.isSelected.subscribe(function(t){t?c(e):c()===e&&c(void 0)})}}t=t||{};var l,c=t.selectedItem||i(),d=t.selectionPolicy||"single";return n(e)?l=o(function(){var t=r(e);return t.forEach(u),a.copy(t)}):(e.forEach(u),l=a.copy(e)),c.subscribe(function(e){r(l).forEach(function(t){t.isSelected(t===e)}),"deselect"===d&&e&&setTimeout(function(){c(void 0)},0)}),l.selectedItem=c,l}}),define("scalejs.mvvm/ko.utils",["scalejs!core","knockout"],function(e,t){function n(n,r){return e.array.toArray(n).map(function(e){var n=e.cloneNode(!0);return r?t.cleanNode(n):n})}return{cloneNodes:n}}),define("scalejs.mvvm/mvvm",["knockout","knockout.mapping","scalejs!core","scalejs.mvvm/classBindingProvider","./htmlTemplateSource","./selectableArray","./ko.utils"],function(e,t,n,r,i,o,s){function a(t){return e.observable(t)}function u(t){return e.observableArray(t)}function l(t){return e.computed(t)}function c(e){return t.toJSON(e)}function d(e){return JSON.parse(c(e))}function f(){w(arguments).forEach(x.registerBindings.bind(x))}function p(e,n,r){var i=Object.keys(r).reduce(function(e,t){return y(e,{k:t,create:function(e){return r[t](e.data)}})},{});return t.fromJS(e,i,n)}function h(){w(arguments).forEach(i.registerTemplates)}function v(e,t){var n={};return n[e]=t,n}function m(e,t){return v("template",{name:e,data:t})}function g(e,t){return{dataClass:e,viewmodel:t}}function b(t){var n=t.root?document.getElementById(t.root):document.getElementsByTagName("body")[0],r=document.createComment(" ko class: scalejs-shell "),i=document.createComment(" /ko ");n&&(n.appendChild(r),n.appendChild(i),f({"scalejs-shell":function(e){return{render:e.$data.root}}}),e.applyBindings({root:C},n))}var y=n.object.merge,w=n.array.toArray,x=new r({},{log:n.log.warn,fallback:!0}),C=e.observable();return e.bindingProvider.instance=x,{core:{mvvm:{toJson:c,registerBindings:f,registerTemplates:h,dataClass:g,template:m,dataBinding:v,selectableArray:o,ko:{utils:s}}},sandbox:{mvvm:{observable:a,observableArray:u,computed:l,registerBindings:f,registerTemplates:h,toJson:c,toViewModel:p,toObject:d,dataClass:g,template:m,dataBinding:v,selectableArray:o,root:C}},init:b}}),define("scalejs.bindings/change",["knockout","scalejs!core"],function(e,t){function n(t,n,o,s){function a(e,n){return function(r){r!==n&&(n=r,e.call(s,r,t))}}function u(n,r){e.computed({read:function(){var e=f(s[n]);r(e)},disposeWhenNodeIsRemoved:t})}if(i(s)){var l,c,d,f=e.utils.unwrapObservable,p=n(),h=f(p);for(l in h)h.hasOwnProperty(l)&&(c=h[l],r(c.initial,"function")&&c.initial.apply(s,[f(s[l]),t]),r(c.update,"function")&&(d=a(c.update,f(s[l]))),r(c,"function")&&(d=a(c,f(s[l]))),d&&u(l,d))}}var r=t.type.is,i=t.object.has;return{init:n}}),define("scalejs.bindings/render",["scalejs!core","knockout","scalejs.functional"],function(e,t){function n(){return{controlsDescendantBindings:!0}}function r(e,n,r,l,c){function d(n){p?t.applyBindingsToNode(e,p,l):t.utils.emptyDomNode(e),window.requestAnimationFrame(n)}var f,p,h,v,m,g=s(n()),b=[],y=[];if(h=t.utils.domData.get(e,"binding"),g)if(i(g.dataClass,"string")){if(f=t.bindingProvider.instance.bindingRouter(g.dataClass),!f)throw new Error("Don't know how to render binding \""+g.dataClass+'" - no such binding registered. Either register the bindng or correct its name.');f&&(p=i(f,"function")?f.call(g.viewmodel||l,c):f)}else p=i(g,"function")?g.call(l,c):g;o(h,"transitions","outTransitions")&&(y=h.transitions.outTransitions.map(function(e){return u(e)})),o(p,"transitions","inTransitions")&&(b=p.transitions.inTransitions.map(function(e){return u(e)})),m=a.apply(null,y.concat(u(d)).concat(b)),v={getElement:function(){return e}},m.call(v),t.utils.domData.set(e,"binding",p)}var i=e.type.is,o=e.object.has,s=t.utils.unwrapObservable,a=e.functional.builders.continuation,u=e.functional.builder.$DO;return{init:n,update:r}}),define("scalejs.mvvm",["scalejs!core","knockout","scalejs.mvvm/mvvm","./scalejs.bindings/change","./scalejs.bindings/render","module"],function(e,t,n,r,i,o){t.bindingHandlers.change=r,t.bindingHandlers.render=i,t.virtualElements.allowedBindings.change=!0,t.virtualElements.allowedBindings.render=!0,n.init(o.config()),e.registerExtension(n)}),define("scalejs.grid-slick/observableDataview",["knockout","slick.grid"],function(e,t){var n=e.isObservable,r=e.computed;return function(e){function i(){return n(e.itemsCount)?e.itemsCount():e.itemsSource().length}function o(){return p}function s(e){return p?p[e]:null}function a(e){var t=p[e];return t?t.metadata:null}function u(){var t=0;n(e.itemsCount)?e.itemsCount.subscribe(function(e){d.notify({previous:t,current:e},null,null),t=e}):r({read:function(){var n=e.itemsSource()||[],r=n.length;r!==t&&(d.notify({previous:t,current:r},null,null),t=r)}})}function l(){r({read:function(){var t,n,r,i=e.itemsSource()||[],o=[];t=Object.keys(p).map(function(e){return parseInt(e,10)}),n=i.map(function(e){return e.index}),r=t.except(n).toArray(),r.forEach(function(e){delete p[e]}),o=i.filter(function(e){return p[e.index]!==e}).map(function(e){return p[e.index]=e,e.index}),o.length>0&&f.notify({rows:o},null,null)}})}function c(){l(),u()}var d=new t.Event,f=new t.Event,p={};if(!n(e.itemsSource))throw new Error("`itemsSource` must be an observableArray.");return{getLength:i,getItem:s,getItemMetadata:a,getItems:o,subscribe:c,onRowCountChanged:d,onRowsChanged:f}}}),define("text!scalejs.grid-slick/filters/filters.html",[],function(){return'<div id="number_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n        <div class="numberFilter">\r\n            Select Value: \r\n               <div>Quick Search: <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n               <div class="listFilterBox">\r\n                   <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: all" /> \r\n                        <span>Select All</span> \r\n                    </div> \r\n                    <!-- ko foreach: options --> \r\n                    <div>\r\n                        <input type="checkbox" data-bind="checked: selected" /> \r\n                        <span data-bind="text: value"></span> \r\n                    </div> \r\n                    <!-- /ko --> \r\n               </div> \r\n               Show rows with values that: \r\n            <div class="numberFilterBox">\r\n                <div> \r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n                </div>\r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonA">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option> \r\n                        <option value="NotEqualTo">Is Not Equal To</option> \r\n                        <option value="GreaterThan">Is Greater Than</option>         \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n                <div>and</div> \r\n                <div>\r\n                    <select data-bind="value: comparisonB">\r\n                        <option value="EqualTo">Is Equal To</option> \r\n                        <option value="LessThan">Is Less Than</option>\r\n                        <option value="NotEqualTo">Is Not Equal To</option>\r\n                        <option value="GreaterThan">Is Greater Than</option> \r\n                    </select>\r\n                </div> \r\n                <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" /> \r\n            </div> \r\n    </div>  \r\n</div> \r\n \r\n<div id="string_filter_template">\r\n    <div data-bind="css: { iconArrowLeft: !flipped(), iconArrowRight: flipped }"></div> \r\n    <div class="numberFilter">\r\n        Select Value: \r\n        <div>Quick Search:  <input data-bind="value: quickSearch, valueUpdate: \'afterkeydown\'" /></div> \r\n        <div class="listFilterBox">\r\n            <div data-bind="visible: loading" style="width:100%;height:200px;background:black;opacity:.2;position:absolute"></div> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: all" /> \r\n                <span>Select All</span> \r\n            </div> \r\n            <!-- ko foreach: options --> \r\n            <div>\r\n                <input type="checkbox" data-bind="checked: selected" /> \r\n                <span data-bind="text: value"></span> \r\n            </div> \r\n            <!-- /ko --> \r\n        </div> \r\n        Show rows with values that: \r\n        <div class="numberFilterBox">\r\n            <div>\r\n                <input type="checkbox" data-bind="checked: notEmpty" />\r\n                <span>Are Not Empty</span> \r\n            </div>\r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonA">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option> \r\n                    <option value="EndsWith">Ends</option>  \r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueA, valueUpdate: \'afterkeydown\'" /> \r\n            <div>and</div> \r\n            <div>\r\n                <select data-bind="value: comparisonB">\r\n                    <option value="Contains">Contains</option> \r\n                    <option value="StartsWith">Starts With</option>\r\n                    <option value="EndsWith">Ends</option>\r\n                </select>\r\n            </div> \r\n            <input type="text" data-bind="value: valueB, valueUpdate: \'afterkeydown\'" />\r\n        </div> \r\n    </div>  \r\n</div>  \r\n\r\n'}),define("scalejs.grid-slick/filters/observableFilters",["scalejs!core","jQuery","knockout","text!./filters.html","bPopup","scalejs.statechart-scion","scalejs.mvvm"],function(e,t,n,r){function i(e,r){function i(e){K.quickSearch.dispose(),e&&e.values&&e.values.length?(U(e.values[0]),M(e.values[0])):(U(""),M("")),K.quickSearch=M.subscribe(g)}function g(t){K.fieldQuickSearch.dispose(),e.quickSearch(b(t)?{op:F,values:[t]}:void 0),K.fieldQuickSearch=e.quickSearch.subscribe(i)}function y(){K.filter.dispose();var t=e.value.peek()||[],n="string"===e.type?["Contains","StartsWith","EndsWith"]:["EqualTo","LessThan","NotEqualTo","GreaterThan"];-1===t.indexOf("NotEmpty")&&H(!1),(void 0===t[0]||-1===n.indexOf(t[0].op))&&(W.a(n[0]),W.valA(void 0)),(void 0===t[1]||-1===n.indexOf(t[1].op))&&(W.b(n[0]),W.valB(void 0)),t.forEach(function(e,t){"In"===e.op?J().forEach(function(t){t.selected(e.values.indexOf(t.value)>-1)}):"NotEmpty"===e.op?H(!0):0===t?(W.a(e.op),W.valA(e.values[0])):(W.b(e.op),W.valB(e.values[0]))}),B(t),K.filter=B.subscribe(w)}function w(t){K.fieldValue.dispose(),e.value(t),K.fieldValue=e.value.subscribe(y)}function x(e,t){return{selected:h(b(t)?t:V()),value:b(e)?e.toString():""}}function C(e){B(e||[])}function E(){V(!0),J().forEach(function(e){e.selected(!0)})}function S(){V(!1),J().forEach(function(e){e.selected(!1)})}function k(){return J().filter(function(e){return e.selected()})}function R(){W.valA(void 0),W.valB(void 0),H(!1)}function N(e){$=t(e.find(".slick-filter")[0]),$.click(function(){function e(e){return G(e),e?$.offset().left-P.width()-r.width+10:$.offset().left+20}P||(P=t('<div class="slick-filter-popup" data-bind="template: { name: popupTemplate, data: $data}"></div>').appendTo("body"),n.applyBindings(I,P.get()[0]));var i=e($.offset().left+10+P.width()>window.innerWidth),o=$.offset().top+P.height()>window.innerHeight?window.innerHeight-P.height():$.offset().top-10;L("filter.open"),P.bPopup({follow:[!1,!1],position:[i,o],opacity:0,speed:0,onClose:function(){L("filter.close")}});var s=P.find("div")[0];t(s).css("top",$.offset().top-o)})}function A(){return o(a("filter",c(function(){L=this.send,this.initial=!0}),s("filter.view",s("filter.hidden",c(function(t,n){K.quickSearchSub=M.subscribe(function(e){U(e)}),K.quickSub=U.subscribe(function(e){K.quickSearchSub.dispose(),M(e),K.quickSearchSub=M.subscribe(function(e){U(e)}),n("filter.model.all")||L("filter.all")}),this.initial&&(y(e.value()),i(e.quickSearch()),this.initial=!1)}),d(function(){K.quickSearchSub.dispose(),K.quickSub.dispose()}),u("filter.open",f("filter.shown"))),s("filter.shown",c(function(){M.valueHasMutated()}),u("filter.close",f("filter.hidden")))),s("filter.model",s("filter.model.all",c(function(){E(),R(),C(_()),K.list=O.subscribe(function(e){e?L("filter.list"):0===k().length&&L("filter.value")}),K.value=D.subscribe(function(){L("filter.value")})}),d(function(){K.list.dispose(),K.value.dispose()}),s("filter.all.hidden",c(function(){this.quickSubAll=U.subscribe(function(){C(_())})}),d(function(){this.quickSubAll.dispose()}),l("filter.shown",f("filter.all.shown"))),s("filter.all.shown",c(function(){U(M()),K.all=V.subscribe(function(e){e||L("filter.value")}),K.quick=M.subscribe(function(e){void 0!==e&&(U(M()),C(_()))})}),d(function(){K.all.dispose(),K.quick.dispose()}),l("filter.hidden",f("filter.all.hidden")))),s("filter.model.list",c(function(){V(!1),R(),C(O()),K.list=O.subscribe(function(e){e?C(e):0===k().length?L("filter.value"):L("filter.all")}),K.value=D.subscribe(function(){L("filter.value")})}),d(function(){K.list.dispose(),K.value.dispose()}),s("filter.list.hidden",l("filter.shown",f("filter.list.shown"))),s("filter.list.shown",c(function(){U(""),K.all=V.subscribe(function(){L("filter.all")})}),d(function(){K.all.dispose()}),l("filter.hidden",f("filter.list.hidden")))),s("filter.model.value",c(function(){S(),U(""),C(D()),K.list=O.subscribe(function(e){e?L("filter.list"):k().length>0&&L("filter.all")}),K.value=D.subscribe(function(e){C(e)})}),d(function(){K.list.dispose(),K.value.dispose()}),s("filter.value.hidden",l("filter.shown",f("filter.value.shown"))),s("filter.value.shown",c(function(){K.all=V.subscribe(function(){L("filter.all")})}),d(function(){K.all.dispose()}),l("filter.hidden",f("filter.value.hidden")))),u("filter.all",p("filter.model.all")),u("filter.list",p("filter.model.list")),u("filter.value",p("filter.model.value")))))}function T(){X.start()}var D,O,_,j,I,$,P,L,B=h([]),M=h(),F=e.quickFilterOp||"StartsWith",W={a:h(),valA:h(),b:h(),valB:h()},H=h(!1),V=h(!0),z=h(!1),q=e.values,U=h(""),J=m([]),G=h(!1),K={};K.fieldQuickSearch=e.quickSearch.subscribe(i),K.quickSearch=M.subscribe(g),B.equalityComparer=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},K.fieldValue=e.value.subscribe(y),K.filter=B.subscribe(w),q.subscribe(function(e){var t,n=1===B().length&&"In"===B()[0].op?B()[0].values:[];t=n.length>0?e.map(function(e){return x(e,n.indexOf(e.toString())>-1)}):e.groupJoin(J(),"$.toString()","$.value",function(e,t){return t.elementAtOrDefault(0,x(e))}).toArray(),J(t)}),D=v(function(){var e=[];return W.valA()&&e.push({op:W.a(),values:[W.valA()]}),W.valB()&&e.push({op:W.b(),values:[W.valB()]}),H()&&e.push({op:"NotEmpty",values:[]}),e.length>0?e:void 0}),O=v(function(){var e=J().filter(function(e){return e.selected()});return e.length>0&&e.length<J().length?[{op:"In",values:e.map(function(e){return e.value})}]:void 0}),_=v(function(){return U()?[{op:F,values:[U()]}]:V()&&M()?[{op:F,values:[M()]}]:[]}),j=v(function(){return B().length>0}),I={comparisonA:W.a,comparisonB:W.b,valueA:W.valA,valueB:W.valB,quickSearch:M,all:V,options:J,popupTemplate:"string"===e.type?"string_filter_template":"number_filter_template",value:U,filterOn:j,flipped:G,notEmpty:H,loading:z};var X=A(),Q=!1;return{bindings:I,start:T,initalized:Q,init:N}}var o=e.state.builder.statechart,s=e.state.builder.state,a=e.state.builder.parallel,u=e.state.builder.on,l=e.state.builder.whenInStates,c=e.state.builder.onEntry,d=e.state.builder.onExit,f=e.state.builder.goto,p=e.state.builder.gotoInternally,h=n.observable,v=n.computed,m=n.observableArray,g=(n.utils.unwrapObservable,e.mvvm.registerTemplates),b=e.object.has;return g(r),function(){function e(e){e.onHeaderRowCellRendered.subscribe(function(e,r){var o=t(r.node),s=o[0],a=r.column.filter,u='<input type="text" data-bind="value: value, valueUpdate: \'afterkeydown\'"/><div class="slick-filter" data-bind="css: { iconFilterOff: !filterOn(), iconFilterOn: filterOn }"></div>';a&&(a.state||(a.state=i(a,r.column)),o.html(u),n.applyBindings(a.state.bindings,s),a.state.init(o),a.state.initalized||(a.state.start(),a.state.initialized=!0))})}function r(){}return{init:e,destroy:r}}}),define("scalejs.grid-slick/filters/defaultFilters",["scalejs!core","knockout"],function(e,t){var n=t.observable,r=t.computed,i=e.object.has,o=e.object.valueOrDefault;return function(e,t){function a(e,t){var n;if(evaluate=d[e.op],"In"===e.op||"NotEmpty"===e.op)n=evaluate(t,e.values);else for(var r=0;r<e.values.length&&(n=evaluate(t,o(e.values[r],"").toString()),n);r+=1);return n}function u(e){return"string"==typeof e?e.toLowerCase():e}function l(e){return function(t){return i(t,e)?u(t[e]):-Number.MAX_VALUE}}var c,d={EqualTo:function(e,t){return parseFloat(e)===parseFloat(t)},GreaterThan:function(e,t){return parseFloat(e)>parseFloat(t)},LessThan:function(e,t){return parseFloat(e)<parseFloat(t)},NotEqualTo:function(e,t){return parseFloat(e)!==parseFloat(t)},In:function(e,t){return t.some(function(t){return e.match(new RegExp("^"+t+"$","i"))})},Contains:function(e,t){return e.match(new RegExp(t,"i"))},StartsWith:function(e,t){return e.match(new RegExp("^"+t,"i"))},EndsWith:function(e,t){return e.match(new RegExp(t+"$","i"))},NotEmpty:function(e){return""!==e}};return e.forEach(function(e){var r=n(""),u=e.filter.quickFilterOp;e.filter={type:e.filter.type,quickFilterOp:u,value:n(),quickSearch:r,values:n([])},r.subscribe(function(){var n=t().where(function(t){var n=!0;ops=operations.filter(function(t){return t.id!==e.id});for(var r=0;r<ops.length&&(n=a(ops[r],t[ops[r].id]),n);r++);return n}).distinct(function(t){return i(t[e.id])?t[e.id]:void 0}).orderBy(l(e.id)).select(function(t){return o(t[e.id],"").toString()});r().values[0]&&(s=r().values[0].toLowerCase(),n=n.where(function(e){return e=e.toLowerCase(),"Contains"===u?-1!==e.indexOf(s):0===e.indexOf(s)})),e.filter.values(n.take(50).toArray())})}),c=r(function(){if(operations=e.selectMany(function(e){return e.filter.value()},function(e,t){return{id:e.id,op:t.op,values:t.values}}).toArray(),operations.length>0){var n=t().filter(function(e){for(var t,n=0;n<operations.length&&(t=a(operations[n],e[operations[n].id]),t);n++);return t});return n}return t()})}}),define("scalejs.grid-slick/sorting/observableSorting",["scalejs!core","knockout"],function(e,t){"use strict;";return function(e){function n(n){n.onSort.subscribe(function(t,n){var r=n.multiColumnSort?n.sortCols:[n];r=r.reduce(function(e,t){return e[t.sortCol.field]=t.sortAsc===!0?"asc":"dsc",e},{}),e.forEach(function(e){e.sort(r[e.field])})}),t.computed(function(){var t=e.reduce(function(e,t){return t.sort()&&e.push({columnId:t.field,sortAsc:"asc"===t.sort()}),e},[]);n.setSortColumns(t)})}function r(){}return{init:n,destroy:r}}}),define("scalejs.grid-slick/sorting/defaultSorting",["scalejs!core","knockout"],function(e,t){var n=e.object.has,r=t.computed;return function(e,i){function o(e){return"string"==typeof e?e.toLowerCase():e}function s(e){return function(t){return n(t,e)?o(t[e]):-Number.MAX_VALUE}}function a(e,t){function n(e,t){return t.sortAsc?e.thenBy(s(t.column)):e.thenByDescending(s(t.column))}function r(e,t){return t.sortAsc?e.orderBy(s(t.column)):e.orderByDescending(s(t.column))}var i;return t&&0!==t.length?(i=r(e,t[0]),i=t.skip(1).aggregate(i,n),e=i.toArray()):e}var u,l;return e.forEach(function(e){e.sort=t.observable("string"==typeof e.sort?e.sort:void 0)}),l=r(function(){return e.reduce(function(e,t){return t.sort()&&e.push({column:t.field,sortAsc:"asc"===t.sort()}),e},[])}),u=t.computed(function(){return orderedItems=a(i(),l())})}}),define("scalejs.grid-slick/changesFlasher",["scalejs!core"],function(e){return function(t,n){function r(e){if("string"==typeof n.key)return e[n.key];var t=n.key.map(function(t){return e[t]}).join("_");return t}function i(){var e,n;for(n=0;n<t.getDataLength();n+=1)e=t.getDataItem(n),s(e)&&(l[r(e)]=e)}var o=e.object.clone,s=e.object.has,a=e.object.diff,u=e.object.merge,l={};n=u({speed:1e3,key:"id"},n),n.fields=s(n.fields)?n.fields:t.getColumns().map(function(e){return e.field}),t.getData().onRowsChanged.subscribe(function(e,u){var c=u.rows,d=(new Date).getTime().toString(),f="flash_chaged_"+d,p="flash_changes_"+d,h=o(s(t.getCellCssStyles(f))||{}),v=o(s(t.getCellCssStyles(p))||{});c.forEach(function(e){var i,o,u,c,d;i=t.getDataItem(e),s(i)&&(o=l[r(i)],s(o)&&s(o)&&o!==i&&(u=a(o,i,n.fields),c={},d={},Object.keys(u).forEach(function(e){var t=u[e][0],n=u[e][1];n>t&&(d[e]="slick-cell-changed-up",c[e]="slick-cell-changed"),t>n&&(d[e]="slick-cell-changed-down",c[e]="slick-cell-changed")}),h[e]=c,v[e]=d))}),t.setCellCssStyles(f,h),t.setCellCssStyles(p,v),i(),setTimeout(function(){t.removeCellCssStyles(p)},100),setTimeout(function(){t.removeCellCssStyles(f)},n.speed)})}}),define("scalejs.grid-slick/slickGrid",["scalejs!core","require","knockout","jQuery","slick.grid","./observableDataview","./filters/observableFilters","./filters/defaultFilters","./sorting/observableSorting","./sorting/defaultSorting","./changesFlasher"],function(e,t,n,r,i,o,s,a,u,l,c){function d(t,d){function f(e){var t,n=A.filter(function(e){return e.filter});return 0===n.length?e:(t=n.some(function(e){return!e.filter.value})?a(n,e):e,T.push(s()),t)}function m(e){var t,r=d.columns.filter(function(e){return e.sort?e.sortable=!0:!1});return 0===r.length?e:(t=r.some(function(e){return!n.isObservable(e.sort)})?l(r,e):e,T.push(u(r)),t)}function g(e){var t;return t=d.itemsCount?e:n.computed(function(){return e().map(function(e,t){return e.index=t,e})})}function b(){k=d.itemsSource,k=m(k),k=f(k),k=g(k)}function y(){R=o(v(d,{itemsSource:k})),R.onRowCountChanged.subscribe(function(){N.updateRowCount(),N.render()}),R.onRowsChanged.subscribe(function(e,t){var n,r;n=N.getRenderedRange(),r=t.rows.filter(function(e){return e>=n.top&&e<=n.bottom}),r.length>0&&(N.invalidateRows(r),N.render())})}function w(){d.explicitInitialization=!0,N=new i.Grid(t,R,A,d),r(t).data("slickgrid",N),N.setSelectionModel(new i.RowSelectionModel),T.forEach(function(e){e.init(N)}),p(d.columns)&&d.columns.subscribe(function(){A=n.unwrap(d.columns),N.setColumns(A)}),d.changesFlasher&&c(N,d.changesFlasher),N.init()}function x(){R.subscribe()}function C(){h(d.selectedItem)?N.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e=[];N.getSelectedRows().forEach(function(t){e.push(N.getDataItem(t))}),d.selectedItem(e)}):p(d.selectedItem)&&N.getSelectionModel().onSelectedRangesChanged.subscribe(function(){var e,t;e=N.getSelectedRows(),t=N.getDataItem(e[0]),d.selectedItem(t)})}function E(){var e;p(d.viewport)&&(N.onViewportChanged.subscribe(function(){var e=N.getViewport();d.viewport(e)}),d.viewport.subscribe(function(t){(t.top>e+2||t.top<e-2)&&(N.scrollRowIntoView(t.top),e=t.top)}))}function S(){e.layout&&e.layout.onLayoutDone&&e.layout.onLayoutDone(function(){if(N.resizeCanvas(),p(d.viewport)){var e=N.getViewport();d.viewport(e)}})}var k,R,N,A=n.unwrap(d.columns),T=[];b(),y(),w(),x(),C(),E(),S()}function f(e,t,n){var r=n(),i=r.slickGrid;return d(e,i),{controlsDescendantBindings:!0}}{var p=n.isObservable,h=function(e){return p(e)&&e.indexOf},v=e.object.merge;e.object.has,e.linq.enumerable.from,n.observable,n.observableArray,n.computed,e.object.valueOrDefault}return{init:f}}),define("scalejs.grid-slick",["./scalejs.grid-slick/slickGrid","knockout","scalejs.linq-linqjs"],function(e,t){t.bindingHandlers.slickGrid=e}),function(e){function t(){}function n(e){return e}function r(e,t){return rt(e,t)}function i(e,t){return e-t}function o(e){return e.toString()}function s(e){throw e
}function a(e){return"function"==typeof e.then&&e.then!==T.Observable.prototype.then}function u(){if(this.isDisposed)throw new Error(j)}function l(e){var t=typeof e;return e&&("function"==t||"object"==t)||!1}function c(e){var t=[];if(!l(e))return t;nt.nonEnumArgs&&e.length&&h(e)&&(e=it.call(e));var n=nt.enumPrototypes&&"function"==typeof e,r=nt.enumErrorProps&&(e===X||e instanceof Error);for(var i in e)n&&"prototype"==i||r&&("message"==i||"name"==i)||t.push(i);if(nt.nonEnumShadows&&e!==Q){var o=e.constructor,s=-1,a=et.length;if(e===(o&&o.prototype))var u=e===stringProto?U:e===X?W:J.call(e),c=tt[u];for(;++s<a;)i=et[s],c&&c[i]||!G.call(e,i)||t.push(i)}return t}function d(e,t,n){for(var r=-1,i=n(e),o=i.length;++r<o;){var s=i[r];if(t(e[s],s,e)===!1)break}return e}function f(e,t){return d(e,t,c)}function p(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function h(e){return e&&"object"==typeof e?J.call(e)==L:!1}function v(e){return"function"==typeof e}function m(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;var i=typeof e,o=typeof t;if(e===e&&(null==e||null==t||"function"!=i&&"object"!=i&&"function"!=o&&"object"!=o))return!1;var s=J.call(e),a=J.call(t);if(s==L&&(s=z),a==L&&(a=z),s!=a)return!1;switch(s){case M:case F:return+e==+t;case V:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case q:case U:return e==String(t)}var u=s==B;if(!u){if(s!=z||!nt.nodeClass&&(p(e)||p(t)))return!1;var l=!nt.argsObject&&h(e)?Object:e.constructor,c=!nt.argsObject&&h(t)?Object:t.constructor;if(!(l==c||G.call(e,"constructor")&&G.call(t,"constructor")||v(l)&&l instanceof l&&v(c)&&c instanceof c||!("constructor"in e&&"constructor"in t)))return!1}n||(n=[]),r||(r=[]);for(var d=n.length;d--;)if(n[d]==e)return r[d]==t;var g=0;if(result=!0,n.push(e),r.push(t),u){if(d=e.length,g=t.length,result=g==d)for(;g--;){var b=t[g];if(!(result=m(e[g],b,n,r)))break}}else f(t,function(t,i,o){return G.call(o,i)?(g++,result=G.call(e,i)&&m(e[i],t,n,r)):void 0}),result&&f(e,function(e,t,n){return G.call(n,t)?result=--g>-1:void 0});return n.pop(),r.pop(),result}function g(e,t){return 1===e.length&&Array.isArray(e[t])?e[t]:it.call(e)}function b(e,t){for(var n=new Array(e),r=0;e>r;r++)n[r]=t();return n}function y(e,t){this.scheduler=e,this.disposable=t,this.isDisposed=!1}function w(e,t){return new nn(function(n){var r=new gt,i=new bt;return i.setDisposable(r),r.setDisposable(e.subscribe(n.onNext.bind(n),function(e){var r,o;try{o=t(e)}catch(s){return n.onError(s),void 0}r=new gt,i.setDisposable(r),r.setDisposable(o.subscribe(n))},n.onCompleted.bind(n))),i})}function x(e,t){var n=this;return new nn(function(r){var i=0,o=e.length;return n.subscribe(function(n){if(o>i){var s,a=e[i++];try{s=t(n,a)}catch(u){return r.onError(u),void 0}r.onNext(s)}else r.onCompleted()},r.onError.bind(r),r.onCompleted.bind(r))})}function C(e){return this.select(function(t,n){var r=e(t,n);return a(r)?qt(r):r}).mergeObservable()}var E={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},S=E[typeof window]&&window||this,k=E[typeof exports]&&exports&&!exports.nodeType&&exports,R=E[typeof module]&&module&&!module.nodeType&&module,N=R&&R.exports===k&&k,A=E[typeof global]&&global;!A||A.global!==A&&A.window!==A||(S=A);var T={internals:{},config:{}},D=Date.now,O="Sequence contains no elements.",_="Argument out of range",j="Object has been disposed",I="object"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";S.Set&&"function"==typeof(new S.Set)["@@iterator"]&&(I="@@iterator");var $,P={done:!0,value:e},L="[object Arguments]",B="[object Array]",M="[object Boolean]",F="[object Date]",W="[object Error]",H="[object Function]",V="[object Number]",z="[object Object]",q="[object RegExp]",U="[object String]",J=Object.prototype.toString,G=Object.prototype.hasOwnProperty,K=J.call(arguments)==L,X=Error.prototype,Q=Object.prototype,Y=Q.propertyIsEnumerable;try{$=!(J.call(document)==z&&!({toString:0}+""))}catch(Z){$=!0}var et=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],tt={};tt[B]=tt[F]=tt[V]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},tt[M]=tt[U]={constructor:!0,toString:!0,valueOf:!0},tt[W]=tt[H]=tt[q]={constructor:!0,toString:!0},tt[z]={constructor:!0};var nt={};!function(){var e=function(){this.x=1},t=[];e.prototype={valueOf:1,y:1};for(var n in new e)t.push(n);for(n in arguments);nt.enumErrorProps=Y.call(X,"message")||Y.call(X,"name"),nt.enumPrototypes=Y.call(e,"prototype"),nt.nonEnumArgs=0!=n,nt.nonEnumShadows=!/valueOf/.test(t)}(1),K||(h=function(e){return e&&"object"==typeof e?G.call(e,"callee"):!1}),v(/x/)&&(v=function(e){return"function"==typeof e&&J.call(e)==H});var rt=T.internals.isEqual=function(e,t){return m(e,t,[],[])},it=Array.prototype.slice,ot=({}.hasOwnProperty,this.inherits=T.internals.inherits=function(e,t){function n(){this.constructor=e}n.prototype=t.prototype,e.prototype=new n}),st=T.internals.addProperties=function(e){for(var t=it.call(arguments,1),n=0,r=t.length;r>n;n++){var i=t[n];for(var o in i)e[o]=i[o]}},at=T.internals.addRef=function(e,t){return new nn(function(n){return new dt(t.getDisposable(),e.subscribe(n))})},ut=function(e,t){this.id=e,this.value=t};ut.prototype.compareTo=function(e){var t=this.value.compareTo(e.value);return 0===t&&(t=this.id-e.id),t};var lt=T.internals.PriorityQueue=function(e){this.items=new Array(e),this.length=0},ct=lt.prototype;ct.isHigherPriority=function(e,t){return this.items[e].compareTo(this.items[t])<0},ct.percolate=function(e){if(!(e>=this.length||0>e)){var t=e-1>>1;if(!(0>t||t===e)&&this.isHigherPriority(e,t)){var n=this.items[e];this.items[e]=this.items[t],this.items[t]=n,this.percolate(t)}}},ct.heapify=function(t){if(t===e&&(t=0),!(t>=this.length||0>t)){var n=2*t+1,r=2*t+2,i=t;if(n<this.length&&this.isHigherPriority(n,i)&&(i=n),r<this.length&&this.isHigherPriority(r,i)&&(i=r),i!==t){var o=this.items[t];this.items[t]=this.items[i],this.items[i]=o,this.heapify(i)}}},ct.peek=function(){return this.items[0].value},ct.removeAt=function(e){this.items[e]=this.items[--this.length],delete this.items[this.length],this.heapify()},ct.dequeue=function(){var e=this.peek();return this.removeAt(0),e},ct.enqueue=function(e){var t=this.length++;this.items[t]=new ut(lt.count++,e),this.percolate(t)},ct.remove=function(e){for(var t=0;t<this.length;t++)if(this.items[t].value===e)return this.removeAt(t),!0;return!1},lt.count=0;var dt=T.CompositeDisposable=function(){this.disposables=g(arguments,0),this.isDisposed=!1,this.length=this.disposables.length},ft=dt.prototype;ft.add=function(e){this.isDisposed?e.dispose():(this.disposables.push(e),this.length++)},ft.remove=function(e){var t=!1;if(!this.isDisposed){var n=this.disposables.indexOf(e);-1!==n&&(t=!0,this.disposables.splice(n,1),this.length--,e.dispose())}return t},ft.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var e=this.disposables.slice(0);this.disposables=[],this.length=0;for(var t=0,n=e.length;n>t;t++)e[t].dispose()}},ft.clear=function(){var e=this.disposables.slice(0);this.disposables=[],this.length=0;for(var t=0,n=e.length;n>t;t++)e[t].dispose()},ft.contains=function(e){return-1!==this.disposables.indexOf(e)},ft.toArray=function(){return this.disposables.slice(0)};var pt=T.Disposable=function(e){this.isDisposed=!1,this.action=e||t};pt.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var ht=pt.create=function(e){return new pt(e)},vt=pt.empty={dispose:t},mt=function(){function e(e){this.isSingle=e,this.isDisposed=!1,this.current=null}var t=e.prototype;return t.getDisposable=function(){return this.current},t.setDisposable=function(e){if(this.current&&this.isSingle)throw new Error("Disposable has already been assigned");var t,n=this.isDisposed;n||(t=this.current,this.current=e),t&&t.dispose(),n&&e&&e.dispose()},t.dispose=function(){var e;this.isDisposed||(this.isDisposed=!0,e=this.current,this.current=null),e&&e.dispose()},e}(),gt=T.SingleAssignmentDisposable=function(e){function t(){e.call(this,!0)}return ot(t,e),t}(mt),bt=T.SerialDisposable=function(e){function t(){e.call(this,!1)}return ot(t,e),t}(mt),yt=T.RefCountDisposable=function(){function e(e){this.disposable=e,this.disposable.count++,this.isInnerDisposed=!1}function t(e){this.underlyingDisposable=e,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return e.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},t.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},t.prototype.getDisposable=function(){return this.isDisposed?vt:new e(this)},t}();y.prototype.dispose=function(){var e=this;this.scheduler.schedule(function(){e.isDisposed||(e.isDisposed=!0,e.disposable.dispose())})};var wt=T.internals.ScheduledItem=function(e,t,n,r,o){this.scheduler=e,this.state=t,this.action=n,this.dueTime=r,this.comparer=o||i,this.disposable=new gt};wt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},wt.prototype.compareTo=function(e){return this.comparer(this.dueTime,e.dueTime)},wt.prototype.isCancelled=function(){return this.disposable.isDisposed},wt.prototype.invokeCore=function(){return this.action(this.scheduler,this.state)};var xt,Ct=T.Scheduler=function(){function e(e,t,n,r){this.now=e,this._schedule=t,this._scheduleRelative=n,this._scheduleAbsolute=r}function t(e,t){var n=t.first,r=t.second,i=new dt,o=function(t){r(t,function(t){var n=!1,r=!1,s=e.scheduleWithState(t,function(e,t){return n?i.remove(s):r=!0,o(t),vt});r||(i.add(s),n=!0)})};return o(n),i}function n(e,t,n){var r=t.first,i=t.second,o=new dt,s=function(t){i(t,function(t,r){var i=!1,a=!1,u=e[n].call(e,t,r,function(e,t){return i?o.remove(u):a=!0,s(t),vt});a||(o.add(u),i=!0)})};return s(r),o}function r(e,t){return t(),vt}var i=e.prototype;return i.catchException=i["catch"]=function(e){return new Nt(this,e)},i.schedulePeriodic=function(e,t){return this.schedulePeriodicWithState(null,e,function(){t()})},i.schedulePeriodicWithState=function(e,t,n){var r=e,i=setInterval(function(){r=n(r)},t);return ht(function(){clearInterval(i)})},i.schedule=function(e){return this._schedule(e,r)},i.scheduleWithState=function(e,t){return this._schedule(e,t)},i.scheduleWithRelative=function(e,t){return this._scheduleRelative(t,e,r)},i.scheduleWithRelativeAndState=function(e,t,n){return this._scheduleRelative(e,t,n)},i.scheduleWithAbsolute=function(e,t){return this._scheduleAbsolute(t,e,r)},i.scheduleWithAbsoluteAndState=function(e,t,n){return this._scheduleAbsolute(e,t,n)},i.scheduleRecursive=function(e){return this.scheduleRecursiveWithState(e,function(e,t){e(function(){t(e)})})},i.scheduleRecursiveWithState=function(e,n){return this.scheduleWithState({first:e,second:n},function(e,n){return t(e,n)})},i.scheduleRecursiveWithRelative=function(e,t){return this.scheduleRecursiveWithRelativeAndState(t,e,function(e,t){e(function(n){t(e,n)})})},i.scheduleRecursiveWithRelativeAndState=function(e,t,r){return this._scheduleRelative({first:e,second:r},t,function(e,t){return n(e,t,"scheduleWithRelativeAndState")})},i.scheduleRecursiveWithAbsolute=function(e,t){return this.scheduleRecursiveWithAbsoluteAndState(t,e,function(e,t){e(function(n){t(e,n)})})},i.scheduleRecursiveWithAbsoluteAndState=function(e,t,r){return this._scheduleAbsolute({first:e,second:r},t,function(e,t){return n(e,t,"scheduleWithAbsoluteAndState")})},e.now=D,e.normalize=function(e){return 0>e&&(e=0),e},e}(),Et=Ct.normalize,St=(T.internals.SchedulePeriodicRecursive=function(){function e(e,t){t(0,this._period);try{this._state=this._action(this._state)}catch(n){throw this._cancel.dispose(),n}}function t(e,t,n,r){this._scheduler=e,this._state=t,this._period=n,this._action=r}return t.prototype.start=function(){var t=new gt;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveWithRelativeAndState(0,this._period,e.bind(this))),t},t}(),Ct.immediate=function(){function e(e,t){return t(this,e)}function t(e,t,n){for(var r=Et(r);r-this.now()>0;);return n(this,e)}function n(e,t,n){return this.scheduleWithRelativeAndState(e,t-this.now(),n)}return new Ct(D,e,t,n)}()),kt=Ct.currentThread=function(){function e(e){for(var t;e.length>0;)if(t=e.dequeue(),!t.isCancelled()){for(;t.dueTime-Ct.now()>0;);t.isCancelled()||t.invoke()}}function t(e,t){return this.scheduleWithRelativeAndState(e,0,t)}function n(t,n,r){var o=this.now()+Ct.normalize(n),s=new wt(this,t,r,o);if(i)i.enqueue(s);else{i=new lt(4),i.enqueue(s);try{e(i)}catch(a){throw a}finally{i=null}}return s.disposable}function r(e,t,n){return this.scheduleWithRelativeAndState(e,t-this.now(),n)}var i,o=new Ct(D,t,n,r);return o.scheduleRequired=function(){return null===i},o.ensureTrampoline=function(e){return null===i?this.schedule(e):e()},o}(),Rt=t;!function(){function e(){if(!S.postMessage||S.importScripts)return!1;var e=!1,t=S.onmessage;return S.onmessage=function(){e=!0},S.postMessage("","*"),S.onmessage=t,e}function t(e){if("string"==typeof e.data&&e.data.substring(0,o.length)===o){var t=e.data.substring(o.length),n=s[t];n(),delete s[t]}}var n=RegExp("^"+String(J).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),r="function"==typeof(r=A&&N&&A.setImmediate)&&!n.test(r)&&r,i="function"==typeof(i=A&&N&&A.clearImmediate)&&!n.test(i)&&i;if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))xt=process.nextTick;else if("function"==typeof r)xt=r,Rt=i;else if(e()){var o="ms.rx.schedule"+Math.random(),s={},a=0;S.addEventListener?S.addEventListener("message",t,!1):S.attachEvent("onmessage",t,!1),xt=function(e){var t=a++;s[t]=e,S.postMessage(o+t,"*")}}else if(S.MessageChannel){var u=new S.MessageChannel,l={},c=0;u.port1.onmessage=function(e){var t=e.data,n=l[t];n(),delete l[t]},xt=function(e){var t=c++;l[t]=e,u.port2.postMessage(t)}}else"document"in S&&"onreadystatechange"in S.document.createElement("script")?xt=function(e){var t=S.document.createElement("script");t.onreadystatechange=function(){e(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},S.document.documentElement.appendChild(t)}:(xt=function(e){return setTimeout(e,0)},Rt=clearTimeout)}();var Nt=(Ct.timeout=function(){function e(e,t){var n=this,r=new gt,i=xt(function(){r.isDisposed||r.setDisposable(t(n,e))});return new dt(r,ht(function(){Rt(i)}))}function t(e,t,n){var r=this,i=Ct.normalize(t);if(0===i)return r.scheduleWithState(e,n);var o=new gt,s=setTimeout(function(){o.isDisposed||o.setDisposable(n(r,e))},i);return new dt(o,ht(function(){clearTimeout(s)}))}function n(e,t,n){return this.scheduleWithRelativeAndState(e,t-this.now(),n)}return new Ct(D,e,t,n)}(),function(e){function t(){return this._scheduler.now()}function n(e,t){return this._scheduler.scheduleWithState(e,this._wrap(t))}function r(e,t,n){return this._scheduler.scheduleWithRelativeAndState(e,t,this._wrap(n))}function i(e,t,n){return this._scheduler.scheduleWithAbsoluteAndState(e,t,this._wrap(n))}function o(o,s){this._scheduler=o,this._handler=s,this._recursiveOriginal=null,this._recursiveWrapper=null,e.call(this,t,n,r,i)}return ot(o,e),o.prototype._clone=function(e){return new o(e,this._handler)},o.prototype._wrap=function(e){var t=this;return function(n,r){try{return e(t._getRecursiveWrapper(n),r)}catch(i){if(!t._handler(i))throw i;return vt}}},o.prototype._getRecursiveWrapper=function(e){if(this._recursiveOriginal!==e){this._recursiveOriginal=e;var t=this._clone(e);t._recursiveOriginal=e,t._recursiveWrapper=t,this._recursiveWrapper=t}return this._recursiveWrapper},o.prototype.schedulePeriodicWithState=function(e,t,n){var r=this,i=!1,o=new gt;return o.setDisposable(this._scheduler.schedulePeriodicWithState(e,t,function(e){if(i)return null;try{return n(e)}catch(t){if(i=!0,!r._handler(t))throw t;return o.dispose(),null}})),o},o}(Ct)),At=T.Notification=function(){function e(e,t){this.hasValue=null==t?!1:t,this.kind=e}var t=e.prototype;return t.accept=function(e,t,n){return 1===arguments.length&&"object"==typeof e?this._acceptObservable(e):this._accept(e,t,n)},t.toObservable=function(e){var t=this;return e||(e=St),new nn(function(n){return e.schedule(function(){t._acceptObservable(n),"N"===t.kind&&n.onCompleted()})})},e}(),Tt=At.createOnNext=function(){function e(e){return e(this.value)}function t(e){return e.onNext(this.value)}function n(){return"OnNext("+this.value+")"}return function(r){var i=new At("N",!0);return i.value=r,i._accept=e,i._acceptObservable=t,i.toString=n,i}}(),Dt=At.createOnError=function(){function e(e,t){return t(this.exception)}function t(e){return e.onError(this.exception)}function n(){return"OnError("+this.exception+")"}return function(r){var i=new At("E");return i.exception=r,i._accept=e,i._acceptObservable=t,i.toString=n,i}}(),Ot=At.createOnCompleted=function(){function e(e,t,n){return n()}function t(e){return e.onCompleted()}function n(){return"OnCompleted()"}return function(){var r=new At("C");return r._accept=e,r._acceptObservable=t,r.toString=n,r}}(),_t=T.internals.Enumerator=function(e){this._next=e};_t.prototype.next=function(){return this._next()},_t.prototype[I]=function(){return this};var jt=T.internals.Enumerable=function(e){this._iterator=e};jt.prototype[I]=function(){return this._iterator()},jt.prototype.concat=function(){var e=this;return new nn(function(t){var n;try{n=e[I]()}catch(r){return t.onError(),void 0}var i,o=new bt,s=St.scheduleRecursive(function(e){var r;if(!i){try{r=n.next()}catch(s){return t.onError(s),void 0}if(r.done)return t.onCompleted(),void 0;var a=new gt;o.setDisposable(a),a.setDisposable(r.value.subscribe(t.onNext.bind(t),t.onError.bind(t),function(){e()}))}});return new dt(o,s,ht(function(){i=!0}))})},jt.prototype.catchException=function(){var e=this;return new nn(function(t){var n;try{n=e[I]()}catch(r){return t.onError(),void 0}var i,o,s=new bt,a=St.scheduleRecursive(function(e){if(!i){var r;try{r=n.next()}catch(a){return t.onError(a),void 0}if(r.done)return o?t.onError(o):t.onCompleted(),void 0;var u=new gt;s.setDisposable(u),u.setDisposable(r.value.subscribe(t.onNext.bind(t),function(t){o=t,e()},t.onCompleted.bind(t)))}});return new dt(s,a,ht(function(){i=!0}))})};var It=jt.repeat=function(e,t){return null==t&&(t=-1),new jt(function(){var n=t;return new _t(function(){return 0===n?P:(n>0&&n--,{done:!1,value:e})})})},$t=jt.forEach=function(e,t,r){return t||(t=n),new jt(function(){var n=-1;return new _t(function(){return++n<e.length?{done:!1,value:t.call(r,e[n],n,e)}:P})})},Pt=T.Observer=function(){};Pt.prototype.toNotifier=function(){var e=this;return function(t){return t.accept(e)}},Pt.prototype.asObserver=function(){return new Ft(this.onNext.bind(this),this.onError.bind(this),this.onCompleted.bind(this))},Pt.prototype.checked=function(){return new Wt(this)};var Lt=Pt.create=function(e,n,r){return e||(e=t),n||(n=s),r||(r=t),new Ft(e,n,r)};Pt.fromNotifier=function(e){return new Ft(function(t){return e(Tt(t))},function(t){return e(Dt(t))},function(){return e(Ot())})},Pt.notifyOn=function(e){return new Vt(e,this)};var Bt,Mt=T.internals.AbstractObserver=function(e){function t(){this.isStopped=!1,e.call(this)}return ot(t,e),t.prototype.onNext=function(e){this.isStopped||this.next(e)},t.prototype.onError=function(e){this.isStopped||(this.isStopped=!0,this.error(e))},t.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},t.prototype.dispose=function(){this.isStopped=!0},t.prototype.fail=function(e){return this.isStopped?!1:(this.isStopped=!0,this.error(e),!0)},t}(Pt),Ft=T.AnonymousObserver=function(e){function t(t,n,r){e.call(this),this._onNext=t,this._onError=n,this._onCompleted=r}return ot(t,e),t.prototype.next=function(e){this._onNext(e)},t.prototype.error=function(e){this._onError(e)},t.prototype.completed=function(){this._onCompleted()},t}(Mt),Wt=function(e){function t(t){e.call(this),this._observer=t,this._state=0}ot(t,e);var n=t.prototype;return n.onNext=function(e){this.checkAccess();try{this._observer.onNext(e)}catch(t){throw t}finally{this._state=0}},n.onError=function(e){this.checkAccess();try{this._observer.onError(e)}catch(t){throw t}finally{this._state=2}},n.onCompleted=function(){this.checkAccess();try{this._observer.onCompleted()}catch(e){throw e}finally{this._state=2}},n.checkAccess=function(){if(1===this._state)throw new Error("Re-entrancy detected");if(2===this._state)throw new Error("Observer completed");0===this._state&&(this._state=1)},t}(Pt),Ht=T.internals.ScheduledObserver=function(e){function t(t,n){e.call(this),this.scheduler=t,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new bt}return ot(t,e),t.prototype.next=function(e){var t=this;this.queue.push(function(){t.observer.onNext(e)})},t.prototype.error=function(e){var t=this;this.queue.push(function(){t.observer.onError(e)})},t.prototype.completed=function(){var e=this;this.queue.push(function(){e.observer.onCompleted()})},t.prototype.ensureActive=function(){var e=!1,t=this;!this.hasFaulted&&this.queue.length>0&&(e=!this.isAcquired,this.isAcquired=!0),e&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(function(e){var n;if(!(t.queue.length>0))return t.isAcquired=!1,void 0;n=t.queue.shift();try{n()}catch(r){throw t.queue=[],t.hasFaulted=!0,r}e()}))},t.prototype.dispose=function(){e.prototype.dispose.call(this),this.disposable.dispose()},t}(Mt),Vt=function(e){function t(){e.apply(this,arguments)}return ot(t,e),t.prototype.next=function(t){e.prototype.next.call(this,t),this.ensureActive()},t.prototype.error=function(t){e.prototype.error.call(this,t),this.ensureActive()},t.prototype.completed=function(){e.prototype.completed.call(this),this.ensureActive()},t}(Ht),zt=T.Observable=function(){function e(e){this._subscribe=e}return Bt=e.prototype,Bt.finalValue=function(){var e=this;return new nn(function(t){var n,r=!1;return e.subscribe(function(e){r=!0,n=e},t.onError.bind(t),function(){r?(t.onNext(n),t.onCompleted()):t.onError(new Error(O))})})},Bt.subscribe=Bt.forEach=function(e,t,n){var r;return r="object"==typeof e?e:Lt(e,t,n),this._subscribe(r)},Bt.toArray=function(){function e(e,t){var n=e.slice(0);return n.push(t),n}return this.scan([],e).startWith([]).finalValue()},e}();Bt.observeOn=function(e){var t=this;return new nn(function(n){return t.subscribe(new Vt(e,n))})},Bt.subscribeOn=function(e){var t=this;return new nn(function(n){var r=new gt,i=new bt;return i.setDisposable(r),r.setDisposable(e.schedule(function(){i.setDisposable(new y(e,t.subscribe(n)))})),i})};var qt=zt.fromPromise=function(e){return new nn(function(t){e.then(function(e){t.onNext(e),t.onCompleted()},function(e){t.onError(e)})})};Bt.toPromise=function(e){if(e||(e=T.config.Promise),!e)throw new Error("Promise type not provided nor in Rx.config.Promise");var t=this;return new e(function(e,n){var r,i=!1;t.subscribe(function(e){r=e,i=!0},function(e){n(e)},function(){i&&e(r)})})},zt.create=zt.createWithDisposable=function(e){return new nn(e)};var Ut=(zt.defer=function(e){return new nn(function(t){var n;try{n=e()}catch(r){return Xt(r).subscribe(t)}return n.subscribe(t)})},zt.empty=function(e){return e||(e=St),new nn(function(t){return e.schedule(function(){t.onCompleted()})})}),Jt=zt.fromArray=function(e,t){return t||(t=kt),new nn(function(n){var r=0;return t.scheduleRecursive(function(t){r<e.length?(n.onNext(e[r++]),t()):n.onCompleted()})})};zt.fromIterable=function(e,t){return t||(t=kt),new nn(function(n){var r;try{r=e[I]()}catch(i){return n.onError(i),void 0}return t.scheduleRecursive(function(e){var t;try{t=r.next()}catch(i){return n.onError(i),void 0}t.done?n.onCompleted():(n.onNext(t.value),e())})})},zt.generate=function(e,t,n,r,i){return i||(i=kt),new nn(function(o){var s=!0,a=e;return i.scheduleRecursive(function(e){var i,u;try{s?s=!1:a=n(a),i=t(a),i&&(u=r(a))}catch(l){return o.onError(l),void 0}i?(o.onNext(u),e()):o.onCompleted()})})};var Gt=zt.never=function(){return new nn(function(){return vt})};zt.range=function(e,t,n){return n||(n=kt),new nn(function(r){return n.scheduleRecursiveWithState(0,function(n,i){t>n?(r.onNext(e+n),i(n+1)):r.onCompleted()})})},zt.repeat=function(e,t,n){return n||(n=kt),null==t&&(t=-1),Kt(e,n).repeat(t)};var Kt=zt["return"]=zt.returnValue=function(e,t){return t||(t=St),new nn(function(n){return t.schedule(function(){n.onNext(e),n.onCompleted()})})},Xt=zt["throw"]=zt.throwException=function(e,t){return t||(t=St),new nn(function(n){return t.schedule(function(){n.onError(e)})})};zt.using=function(e,t){return new nn(function(n){var r,i,o=vt;try{r=e(),r&&(o=r),i=t(r)}catch(s){return new dt(Xt(s).subscribe(n),o)}return new dt(i.subscribe(n),o)})},Bt.amb=function(e){var t=this;return new nn(function(n){function r(){o||(o=s,l.dispose())}function i(){o||(o=a,u.dispose())}var o,s="L",a="R",u=new gt,l=new gt;return u.setDisposable(t.subscribe(function(e){r(),o===s&&n.onNext(e)},function(e){r(),o===s&&n.onError(e)},function(){r(),o===s&&n.onCompleted()})),l.setDisposable(e.subscribe(function(e){i(),o===a&&n.onNext(e)},function(e){i(),o===a&&n.onError(e)},function(){i(),o===a&&n.onCompleted()})),new dt(u,l)})},zt.amb=function(){function e(e,t){return e.amb(t)}for(var t=Gt(),n=g(arguments,0),r=0,i=n.length;i>r;r++)t=e(t,n[r]);return t},Bt["catch"]=Bt.catchException=function(e){return"function"==typeof e?w(this,e):Qt([this,e])};var Qt=zt.catchException=zt["catch"]=function(){var e=g(arguments,0);return $t(e).catchException()};Bt.combineLatest=function(){var e=it.call(arguments);return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),Yt.apply(this,e)};var Yt=zt.combineLatest=function(){var e=it.call(arguments),t=e.pop();return Array.isArray(e[0])&&(e=e[0]),new nn(function(r){function i(e){var i;if(u[e]=!0,l||(l=u.every(n))){try{i=t.apply(null,d)}catch(o){return r.onError(o),void 0}r.onNext(i)}else c.filter(function(t,n){return n!==e}).every(n)&&r.onCompleted()}function o(e){c[e]=!0,c.every(n)&&r.onCompleted()}for(var s=function(){return!1},a=e.length,u=b(a,s),l=!1,c=b(a,s),d=new Array(a),f=new Array(a),p=0;a>p;p++)!function(t){f[t]=new gt,f[t].setDisposable(e[t].subscribe(function(e){d[t]=e,i(t)},r.onError.bind(r),function(){o(t)}))}(p);return new dt(f)})};Bt.concat=function(){var e=it.call(arguments,0);return e.unshift(this),Zt.apply(this,e)};var Zt=zt.concat=function(){var e=g(arguments,0);return $t(e).concat()};Bt.concatObservable=Bt.concatAll=function(){return this.merge(1)},Bt.merge=function(e){if("number"!=typeof e)return en(this,e);var t=this;return new nn(function(n){var r=0,i=new dt,o=!1,s=[],u=function(e){var t=new gt;i.add(t),a(e)&&(e=qt(e)),t.setDisposable(e.subscribe(n.onNext.bind(n),n.onError.bind(n),function(){var e;i.remove(t),s.length>0?(e=s.shift(),u(e)):(r--,o&&0===r&&n.onCompleted())}))};return i.add(t.subscribe(function(t){e>r?(r++,u(t)):s.push(t)},n.onError.bind(n),function(){o=!0,0===r&&n.onCompleted()})),i})};var en=zt.merge=function(){var e,t;return arguments[0]?arguments[0].now?(e=arguments[0],t=it.call(arguments,1)):(e=St,t=it.call(arguments,0)):(e=St,t=it.call(arguments,1)),Array.isArray(t[0])&&(t=t[0]),Jt(t,e).mergeObservable()};Bt.mergeObservable=Bt.mergeAll=function(){var e=this;return new nn(function(t){var n=new dt,r=!1,i=new gt;return n.add(i),i.setDisposable(e.subscribe(function(e){var i=new gt;n.add(i),a(e)&&(e=qt(e)),i.setDisposable(e.subscribe(function(e){t.onNext(e)},t.onError.bind(t),function(){n.remove(i),r&&1===n.length&&t.onCompleted()}))},t.onError.bind(t),function(){r=!0,1===n.length&&t.onCompleted()})),n})},Bt.onErrorResumeNext=function(e){if(!e)throw new Error("Second observable is required");return tn([this,e])};var tn=zt.onErrorResumeNext=function(){var e=g(arguments,0);return new nn(function(t){var n=0,r=new bt,i=St.scheduleRecursive(function(i){var o,s;n<e.length?(o=e[n++],s=new gt,r.setDisposable(s),s.setDisposable(o.subscribe(t.onNext.bind(t),function(){i()},function(){i()}))):t.onCompleted()});return new dt(r,i)})};Bt.skipUntil=function(e){var t=this;return new nn(function(n){var r=!1,i=new dt(t.subscribe(function(e){r&&n.onNext(e)},n.onError.bind(n),function(){r&&n.onCompleted()})),o=new gt;return i.add(o),o.setDisposable(e.subscribe(function(){r=!0,o.dispose()},n.onError.bind(n),function(){o.dispose()})),i})},Bt["switch"]=Bt.switchLatest=function(){var e=this;return new nn(function(t){var n=!1,r=new bt,i=!1,o=0,s=e.subscribe(function(e){var s=new gt,u=++o;n=!0,r.setDisposable(s),a(e)&&(e=qt(e)),s.setDisposable(e.subscribe(function(e){o===u&&t.onNext(e)},function(e){o===u&&t.onError(e)},function(){o===u&&(n=!1,i&&t.onCompleted())}))},t.onError.bind(t),function(){i=!0,n||t.onCompleted()});return new dt(s,r)})},Bt.takeUntil=function(e){var n=this;return new nn(function(r){return new dt(n.subscribe(r),e.subscribe(r.onCompleted.bind(r),r.onError.bind(r),t))})},Bt.zip=function(){if(Array.isArray(arguments[0]))return x.apply(this,arguments);var e=this,t=it.call(arguments),r=t.pop();return t.unshift(e),new nn(function(i){function o(e){u[e]=!0,u.every(function(e){return e})&&i.onCompleted()}for(var s=t.length,a=b(s,function(){return[]}),u=b(s,function(){return!1}),l=function(t){var o,s;if(a.every(function(e){return e.length>0})){try{s=a.map(function(e){return e.shift()}),o=r.apply(e,s)}catch(l){return i.onError(l),void 0}i.onNext(o)}else u.filter(function(e,n){return n!==t}).every(n)&&i.onCompleted()},c=new Array(s),d=0;s>d;d++)!function(e){c[e]=new gt,c[e].setDisposable(t[e].subscribe(function(t){a[e].push(t),l(e)},i.onError.bind(i),function(){o(e)}))}(d);return new dt(c)})},zt.zip=function(){var e=it.call(arguments,0),t=e.shift();return t.zip.apply(t,e)},zt.zipArray=function(){var e=g(arguments,0);return new nn(function(t){function r(e){if(s.every(function(e){return e.length>0})){var r=s.map(function(e){return e.shift()});t.onNext(r)}else if(a.filter(function(t,n){return n!==e}).every(n))return t.onCompleted(),void 0}function i(e){return a[e]=!0,a.every(n)?(t.onCompleted(),void 0):void 0}for(var o=e.length,s=b(o,function(){return[]}),a=b(o,function(){return!1}),u=new Array(o),l=0;o>l;l++)!function(n){u[n]=new gt,u[n].setDisposable(e[n].subscribe(function(e){s[n].push(e),r(n)},t.onError.bind(t),function(){i(n)}))}(l);var c=new dt(u);return c.add(ht(function(){for(var e=0,t=s.length;t>e;e++)s[e]=[]})),c})},Bt.asObservable=function(){var e=this;return new nn(function(t){return e.subscribe(t)})},Bt.bufferWithCount=function(e,t){return 1===arguments.length&&(t=e),this.windowWithCount(e,t).selectMany(function(e){return e.toArray()}).where(function(e){return e.length>0})},Bt.dematerialize=function(){var e=this;return new nn(function(t){return e.subscribe(function(e){return e.accept(t)},t.onError.bind(t),t.onCompleted.bind(t))})},Bt.distinctUntilChanged=function(e,t){var i=this;return e||(e=n),t||(t=r),new nn(function(n){var r,o=!1;return i.subscribe(function(i){var s,a=!1;try{s=e(i)}catch(u){return n.onError(u),void 0}if(o)try{a=t(r,s)}catch(u){return n.onError(u),void 0}o&&a||(o=!0,r=s,n.onNext(i))},n.onError.bind(n),n.onCompleted.bind(n))})},Bt["do"]=Bt.doAction=function(e,t,n){var r,i=this;return"function"==typeof e?r=e:(r=e.onNext.bind(e),t=e.onError.bind(e),n=e.onCompleted.bind(e)),new nn(function(e){return i.subscribe(function(t){try{r(t)}catch(n){e.onError(n)}e.onNext(t)},function(n){if(t){try{t(n)}catch(r){e.onError(r)}e.onError(n)}else e.onError(n)},function(){if(n){try{n()}catch(t){e.onError(t)}e.onCompleted()}else e.onCompleted()})})},Bt["finally"]=Bt.finallyAction=function(e){var t=this;return new nn(function(n){var r=t.subscribe(n);return ht(function(){try{r.dispose()}catch(t){throw t}finally{e()}})})},Bt.ignoreElements=function(){var e=this;return new nn(function(n){return e.subscribe(t,n.onError.bind(n),n.onCompleted.bind(n))})},Bt.materialize=function(){var e=this;return new nn(function(t){return e.subscribe(function(e){t.onNext(Tt(e))},function(e){t.onNext(Dt(e)),t.onCompleted()
},function(){t.onNext(Ot()),t.onCompleted()})})},Bt.repeat=function(e){return It(this,e).concat()},Bt.retry=function(e){return It(this,e).catchException()},Bt.scan=function(){var e,t,n=!1,r=this;return 2===arguments.length?(n=!0,e=arguments[0],t=arguments[1]):t=arguments[0],new nn(function(i){var o,s,a;return r.subscribe(function(r){try{a||(a=!0),o?s=t(s,r):(s=n?t(e,r):r,o=!0)}catch(u){return i.onError(u),void 0}i.onNext(s)},i.onError.bind(i),function(){!a&&n&&i.onNext(e),i.onCompleted()})})},Bt.skipLast=function(e){var t=this;return new nn(function(n){var r=[];return t.subscribe(function(t){r.push(t),r.length>e&&n.onNext(r.shift())},n.onError.bind(n),n.onCompleted.bind(n))})},Bt.startWith=function(){var e,t,n=0;return arguments.length&&"now"in Object(arguments[0])?(t=arguments[0],n=1):t=St,e=it.call(arguments,n),$t([Jt(e,t),this]).concat()},Bt.takeLast=function(e,t){return this.takeLastBuffer(e).selectMany(function(e){return Jt(e,t)})},Bt.takeLastBuffer=function(e){var t=this;return new nn(function(n){var r=[];return t.subscribe(function(t){r.push(t),r.length>e&&r.shift()},n.onError.bind(n),function(){n.onNext(r),n.onCompleted()})})},Bt.windowWithCount=function(e,t){var n=this;if(0>=e)throw new Error(_);if(1===arguments.length&&(t=e),0>=t)throw new Error(_);return new nn(function(r){var i=new gt,o=new yt(i),s=0,a=[],u=function(){var e=new an;a.push(e),r.onNext(at(e,o))};return u(),i.setDisposable(n.subscribe(function(n){for(var r,i=0,o=a.length;o>i;i++)a[i].onNext(n);var l=s-e+1;l>=0&&l%t===0&&(r=a.shift(),r.onCompleted()),s++,s%t===0&&u()},function(e){for(;a.length>0;)a.shift().onError(e);r.onError(e)},function(){for(;a.length>0;)a.shift().onCompleted();r.onCompleted()})),o})},Bt.defaultIfEmpty=function(t){var n=this;return t===e&&(t=null),new nn(function(e){var r=!1;return n.subscribe(function(t){r=!0,e.onNext(t)},e.onError.bind(e),function(){r||e.onNext(t),e.onCompleted()})})},Bt.distinct=function(e,t){var r=this;return e||(e=n),t||(t=o),new nn(function(n){var i={};return r.subscribe(function(r){var o,s,a,u=!1;try{o=e(r),s=t(o)}catch(l){return n.onError(l),void 0}for(a in i)if(s===a){u=!0;break}u||(i[s]=null,n.onNext(r))},n.onError.bind(n),n.onCompleted.bind(n))})},Bt.groupBy=function(e,t,n){return this.groupByUntil(e,t,function(){return Gt()},n)},Bt.groupByUntil=function(e,r,i,s){var a=this;return r||(r=n),s||(s=o),new nn(function(n){var o={},u=new dt,l=new yt(u);return u.add(a.subscribe(function(a){var c,d,f,p,h,v,m,g,b,y;try{v=e(a),m=s(v)}catch(w){for(y in o)o[y].onError(w);return n.onError(w),void 0}p=!1;try{b=o[m],b||(b=new an,o[m]=b,p=!0)}catch(w){for(y in o)o[y].onError(w);return n.onError(w),void 0}if(p){h=new on(v,b,l),d=new on(v,b);try{c=i(d)}catch(w){for(y in o)o[y].onError(w);return n.onError(w),void 0}n.onNext(h),g=new gt,u.add(g);var x=function(){m in o&&(delete o[m],b.onCompleted()),u.remove(g)};g.setDisposable(c.take(1).subscribe(t,function(e){for(y in o)o[y].onError(e);n.onError(e)},function(){x()}))}try{f=r(a)}catch(w){for(y in o)o[y].onError(w);return n.onError(w),void 0}b.onNext(f)},function(e){for(var t in o)o[t].onError(e);n.onError(e)},function(){for(var e in o)o[e].onCompleted();n.onCompleted()})),l})},Bt.select=Bt.map=function(e,t){var n=this;return new nn(function(r){var i=0;return n.subscribe(function(o){var s;try{s=e.call(t,o,i++,n)}catch(a){return r.onError(a),void 0}r.onNext(s)},r.onError.bind(r),r.onCompleted.bind(r))})},Bt.pluck=function(e){return this.select(function(t){return t[e]})},Bt.selectMany=Bt.flatMap=function(e,t){return t?this.selectMany(function(n,r){var i=e(n,r),o=a(i)?qt(i):i;return o.select(function(e){return t(n,e,r)})}):"function"==typeof e?C.call(this,e):C.call(this,function(){return e})},Bt.selectSwitch=Bt.flatMapLatest=function(e,t){return this.select(e,t).switchLatest()},Bt.skip=function(e){if(0>e)throw new Error(_);var t=this;return new nn(function(n){var r=e;return t.subscribe(function(e){0>=r?n.onNext(e):r--},n.onError.bind(n),n.onCompleted.bind(n))})},Bt.skipWhile=function(e,t){var n=this;return new nn(function(r){var i=0,o=!1;return n.subscribe(function(s){if(!o)try{o=!e.call(t,s,i++,n)}catch(a){return r.onError(a),void 0}o&&r.onNext(s)},r.onError.bind(r),r.onCompleted.bind(r))})},Bt.take=function(e,t){if(0>e)throw new Error(_);if(0===e)return Ut(t);var n=this;return new nn(function(t){var r=e;return n.subscribe(function(e){r>0&&(r--,t.onNext(e),0===r&&t.onCompleted())},t.onError.bind(t),t.onCompleted.bind(t))})},Bt.takeWhile=function(e,t){var n=this;return new nn(function(r){var i=0,o=!0;return n.subscribe(function(s){if(o){try{o=e.call(t,s,i++,n)}catch(a){return r.onError(a),void 0}o?r.onNext(s):r.onCompleted()}},r.onError.bind(r),r.onCompleted.bind(r))})},Bt.where=Bt.filter=function(e,t){var n=this;return new nn(function(r){var i=0;return n.subscribe(function(o){var s;try{s=e.call(t,o,i++,n)}catch(a){return r.onError(a),void 0}s&&r.onNext(o)},r.onError.bind(r),r.onCompleted.bind(r))})};var nn=T.AnonymousObservable=function(e){function t(e){return"undefined"==typeof e?e=vt:"function"==typeof e&&(e=ht(e)),e}function n(r){function i(e){var n=new rn(e);if(kt.scheduleRequired())kt.schedule(function(){try{n.setDisposable(t(r(n)))}catch(e){if(!n.fail(e))throw e}});else try{n.setDisposable(t(r(n)))}catch(i){if(!n.fail(i))throw i}return n}return this instanceof n?(e.call(this,i),void 0):new n(r)}return ot(n,e),n}(zt),rn=function(e){function t(t){e.call(this),this.observer=t,this.m=new gt}ot(t,e);var n=t.prototype;return n.next=function(e){var t=!1;try{this.observer.onNext(e),t=!0}catch(n){throw n}finally{t||this.dispose()}},n.error=function(e){try{this.observer.onError(e)}catch(t){throw t}finally{this.dispose()}},n.completed=function(){try{this.observer.onCompleted()}catch(e){throw e}finally{this.dispose()}},n.setDisposable=function(e){this.m.setDisposable(e)},n.getDisposable=function(){return this.m.getDisposable()},n.disposable=function(e){return arguments.length?this.getDisposable():setDisposable(e)},n.dispose=function(){e.prototype.dispose.call(this),this.m.dispose()},t}(Mt),on=function(e){function t(e){return this.underlyingObservable.subscribe(e)}function n(n,r,i){e.call(this,t),this.key=n,this.underlyingObservable=i?new nn(function(e){return new dt(i.getDisposable(),r.subscribe(e))}):r}return ot(n,e),n}(zt),sn=function(e,t){this.subject=e,this.observer=t};sn.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var an=T.Subject=function(e){function t(e){return u.call(this),this.isStopped?this.exception?(e.onError(this.exception),vt):(e.onCompleted(),vt):(this.observers.push(e),new sn(this,e))}function n(){e.call(this,t),this.isDisposed=!1,this.isStopped=!1,this.observers=[]}return ot(n,e),st(n.prototype,Pt,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(u.call(this),!this.isStopped){var e=this.observers.slice(0);this.isStopped=!0;for(var t=0,n=e.length;n>t;t++)e[t].onCompleted();this.observers=[]}},onError:function(e){if(u.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var n=0,r=t.length;r>n;n++)t[n].onError(e);this.observers=[]}},onNext:function(e){if(u.call(this),!this.isStopped)for(var t=this.observers.slice(0),n=0,r=t.length;r>n;n++)t[n].onNext(e)},dispose:function(){this.isDisposed=!0,this.observers=null}}),n.create=function(e,t){return new un(e,t)},n}(zt),un=(T.AsyncSubject=function(e){function t(e){if(u.call(this),!this.isStopped)return this.observers.push(e),new sn(this,e);var t=this.exception,n=this.hasValue,r=this.value;return t?e.onError(t):n?(e.onNext(r),e.onCompleted()):e.onCompleted(),vt}function n(){e.call(this,t),this.isDisposed=!1,this.isStopped=!1,this.value=null,this.hasValue=!1,this.observers=[],this.exception=null}return ot(n,e),st(n.prototype,Pt,{hasObservers:function(){return u.call(this),this.observers.length>0},onCompleted:function(){var e,t,n;if(u.call(this),!this.isStopped){this.isStopped=!0;var r=this.observers.slice(0),i=this.value,o=this.hasValue;if(o)for(t=0,n=r.length;n>t;t++)e=r[t],e.onNext(i),e.onCompleted();else for(t=0,n=r.length;n>t;t++)r[t].onCompleted();this.observers=[]}},onError:function(e){if(u.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var n=0,r=t.length;r>n;n++)t[n].onError(e);this.observers=[]}},onNext:function(e){u.call(this),this.isStopped||(this.value=e,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.exception=null,this.value=null}}),n}(zt),function(e){function t(e){return this.observable.subscribe(e)}function n(n,r){e.call(this,t),this.observer=n,this.observable=r}return ot(n,e),st(n.prototype,Pt,{onCompleted:function(){this.observer.onCompleted()},onError:function(e){this.observer.onError(e)},onNext:function(e){this.observer.onNext(e)}}),n}(zt));"function"==typeof define&&"object"==typeof define.amd&&define.amd?(S.Rx=T,define("rx",[],function(){return T})):k&&R?N?(R.exports=T).Rx=T:k.Rx=T:S.Rx=T}.call(this),function(e){var t={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=t[typeof window]&&window||this,r=t[typeof exports]&&exports&&!exports.nodeType&&exports,i=t[typeof module]&&module&&!module.nodeType&&module,o=(i&&i.exports===r&&r,t[typeof global]&&global);!o||o.global!==o&&o.window!==o||(n=o),"function"==typeof define&&define.amd?define("rx.binding",["rx","exports"],function(t,r){return n.Rx=e(n,r,t),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=e(n,module.exports,require("./rx")):n.Rx=e(n,{},n.Rx)}.call(this,function(e,t,n){function r(){if(this.isDisposed)throw new Error(g)}var i=n.Observable,o=i.prototype,s=n.AnonymousObservable,a=n.Subject,u=n.AsyncSubject,l=n.Observer,c=n.internals.ScheduledObserver,d=n.Disposable.create,f=n.Disposable.empty,p=n.CompositeDisposable,h=n.Scheduler.currentThread,v=n.internals.inherits,m=n.internals.addProperties,g="Object has been disposed";o.multicast=function(e,t){var n=this;return"function"==typeof e?new s(function(r){var i=n.multicast(e());return new p(t(i).subscribe(r),i.connect())}):new x(n,e)},o.publish=function(e){return e?this.multicast(function(){return new a},e):this.multicast(new a)},o.share=function(){return this.publish(null).refCount()},o.publishLast=function(e){return e?this.multicast(function(){return new u},e):this.multicast(new u)},o.publishValue=function(e,t){return 2===arguments.length?this.multicast(function(){return new y(t)},e):this.multicast(new y(e))},o.shareValue=function(e){return this.publishValue(e).refCount()},o.replay=function(e,t,n,r){return e?this.multicast(function(){return new w(t,n,r)},e):this.multicast(new w(t,n,r))},o.replayWhileObserved=function(e,t,n){return this.replay(null,e,t,n).refCount()};var b=function(e,t){this.subject=e,this.observer=t};b.prototype.dispose=function(){if(!this.subject.isDisposed&&null!==this.observer){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1),this.observer=null}};var y=n.BehaviorSubject=function(e){function t(e){if(r.call(this),!this.isStopped)return this.observers.push(e),e.onNext(this.value),new b(this,e);var t=this.exception;return t?e.onError(t):e.onCompleted(),f}function n(n){e.call(this,t),this.value=n,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.exception=null}return v(n,e),m(n.prototype,l,{hasObservers:function(){return this.observers.length>0},onCompleted:function(){if(r.call(this),!this.isStopped){var e=this.observers.slice(0);this.isStopped=!0;for(var t=0,n=e.length;n>t;t++)e[t].onCompleted();this.observers=[]}},onError:function(e){if(r.call(this),!this.isStopped){var t=this.observers.slice(0);this.isStopped=!0,this.exception=e;for(var n=0,i=t.length;i>n;n++)t[n].onError(e);this.observers=[]}},onNext:function(e){if(r.call(this),!this.isStopped){this.value=e;for(var t=this.observers.slice(0),n=0,i=t.length;i>n;n++)t[n].onNext(e)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.exception=null}}),n}(i),w=n.ReplaySubject=function(e){function t(e,t){this.subject=e,this.observer=t}function n(e){var n=new c(this.scheduler,e),i=new t(this,n);r.call(this),this._trim(this.scheduler.now()),this.observers.push(n);for(var o=this.q.length,s=0,a=this.q.length;a>s;s++)n.onNext(this.q[s].value);return this.hasError?(o++,n.onError(this.error)):this.isStopped&&(o++,n.onCompleted()),n.ensureActive(o),i}function i(t,r,i){this.bufferSize=null==t?Number.MAX_VALUE:t,this.windowSize=null==r?Number.MAX_VALUE:r,this.scheduler=i||h,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,e.call(this,n)}return t.prototype.dispose=function(){if(this.observer.dispose(),!this.subject.isDisposed){var e=this.subject.observers.indexOf(this.observer);this.subject.observers.splice(e,1)}},v(i,e),m(i.prototype,l,{hasObservers:function(){return this.observers.length>0},_trim:function(e){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&e-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(e){var t;if(r.call(this),!this.isStopped){var n=this.scheduler.now();this.q.push({interval:n,value:e}),this._trim(n);for(var i=this.observers.slice(0),o=0,s=i.length;s>o;o++)t=i[o],t.onNext(e),t.ensureActive()}},onError:function(e){var t;if(r.call(this),!this.isStopped){this.isStopped=!0,this.error=e,this.hasError=!0;var n=this.scheduler.now();this._trim(n);for(var i=this.observers.slice(0),o=0,s=i.length;s>o;o++)t=i[o],t.onError(e),t.ensureActive();this.observers=[]}},onCompleted:function(){var e;if(r.call(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var n=this.observers.slice(0),i=0,o=n.length;o>i;i++)e=n[i],e.onCompleted(),e.ensureActive();this.observers=[]}},dispose:function(){this.isDisposed=!0,this.observers=null}}),i}(i),x=n.ConnectableObservable=function(e){function t(t,n){function r(e){return i.subject.subscribe(e)}var i={subject:n,source:t.asObservable(),hasSubscription:!1,subscription:null};this.connect=function(){return i.hasSubscription||(i.hasSubscription=!0,i.subscription=new p(i.source.subscribe(i.subject),d(function(){i.hasSubscription=!1}))),i.subscription},e.call(this,r)}return v(t,e),t.prototype.connect=function(){return this.connect()},t.prototype.refCount=function(){var e=null,t=0,n=this;return new s(function(r){var i,o;return t++,i=1===t,o=n.subscribe(r),i&&(e=n.connect()),d(function(){o.dispose(),t--,0===t&&e.dispose()})})},t}(i);return n}),function(e){var t={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=t[typeof window]&&window||this,r=t[typeof exports]&&exports&&!exports.nodeType&&exports,i=t[typeof module]&&module&&!module.nodeType&&module,o=(i&&i.exports===r&&r,t[typeof global]&&global);!o||o.global!==o&&o.window!==o||(n=o),"function"==typeof define&&define.amd?define("rx.time",["rx","exports"],function(t,r){return n.Rx=e(n,r,t),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=e(n,module.exports,require("./rx")):n.Rx=e(n,{},n.Rx)}.call(this,function(e,t,n,r){function i(e,t){return new p(function(n){return t.scheduleWithAbsolute(e,function(){n.onNext(0),n.onCompleted()})})}function o(e,t,n){var r=R(t);return new p(function(t){var i=0,o=e;return n.scheduleRecursiveWithAbsolute(o,function(e){var s;r>0&&(s=n.now(),o+=r,s>=o&&(o=s+r)),t.onNext(i++),e(o)})})}function s(e,t){var n=R(e);return new p(function(e){return t.scheduleWithRelative(n,function(){e.onNext(0),e.onCompleted()})})}function a(e,t,n){return e===t?new p(function(e){return n.schedulePeriodicWithState(0,t,function(t){return e.onNext(t),t+1})}):h(function(){return o(n.now()+e,t,n)})}function u(e,t){var n=this;return new p(function(r){var i,o=!1,s=new x,a=null,u=[],l=!1;return i=n.materialize().timestamp(t).subscribe(function(n){var i,c;"E"===n.value.kind?(u=[],u.push(n),a=n.value.exception,c=!l):(u.push({value:n.value,timestamp:n.timestamp+e}),c=!o,o=!0),c&&(null!==a?r.onError(a):(i=new w,s.setDisposable(i),i.setDisposable(t.scheduleRecursiveWithRelative(e,function(e){var n,i,s,c;if(null===a){l=!0;do s=null,u.length>0&&u[0].timestamp-t.now()<=0&&(s=u.shift().value),null!==s&&s.accept(r);while(null!==s);c=!1,i=0,u.length>0?(c=!0,i=Math.max(0,u[0].timestamp-t.now())):o=!1,n=a,l=!1,null!==n?r.onError(n):c&&e(i)}}))))}),new C(i,s)})}function l(e,t){var n=this;return h(function(){var r=e-t.now();return u.call(n,r,t)})}function c(e,t){return new p(function(n){function r(){s&&(s=!1,n.onNext(o)),i&&n.onCompleted()}var i,o,s;return new C(e.subscribe(function(e){s=!0,o=e},n.onError.bind(n),function(){i=!0}),t.subscribe(r,n.onError.bind(n),r))})}var d=n.Observable,f=d.prototype,p=n.AnonymousObservable,h=d.defer,v=d.empty,m=d.never,g=d.throwException,b=d.fromArray,y=n.Scheduler.timeout,w=n.SingleAssignmentDisposable,x=n.SerialDisposable,C=n.CompositeDisposable,E=n.RefCountDisposable,S=n.Subject,k=n.internals.addRef,R=n.Scheduler.normalize,N=d.interval=function(e,t){return t||(t=y),a(e,e,t)},A=d.timer=function(e,t,n){var u;return n||(n=y),t!==r&&"number"==typeof t?u=t:t!==r&&"object"==typeof t&&(n=t),e instanceof Date&&u===r?i(e.getTime(),n):e instanceof Date&&u!==r?(u=t,o(e.getTime(),u,n)):u===r?s(e,n):a(e,u,n)};return f.delay=function(e,t){return t||(t=y),e instanceof Date?l.call(this,e.getTime(),t):u.call(this,e,t)},f.throttle=function(e,t){t||(t=y);return this.throttleWithSelector(function(){return A(e,t)})},f.windowWithTime=function(e,t,n){var i,o=this;return t===r&&(i=e),n===r&&(n=y),"number"==typeof t?i=t:"object"==typeof t&&(i=e,n=t),new p(function(t){function r(){var e=new w,o=!1,s=!1;d.setDisposable(e),l===u?(o=!0,s=!0):u>l?o=!0:s=!0;var p=o?l:u,h=p-f;f=p,o&&(l+=i),s&&(u+=i),e.setDisposable(n.scheduleWithRelative(h,function(){var e;s&&(e=new S,c.push(e),t.onNext(k(e,a))),o&&(e=c.shift(),e.onCompleted()),r()}))}var s,a,u=i,l=e,c=[],d=new x,f=0;return s=new C(d),a=new E(s),c.push(new S),t.onNext(k(c[0],a)),r(),s.add(o.subscribe(function(e){var t,n;for(t=0;t<c.length;t++)n=c[t],n.onNext(e)},function(e){var n,r;for(n=0;n<c.length;n++)r=c[n],r.onError(e);t.onError(e)},function(){var e,n;for(e=0;e<c.length;e++)n=c[e],n.onCompleted();t.onCompleted()})),a})},f.windowWithTimeOrCount=function(e,t,n){var r=this;return n||(n=y),new p(function(i){var o,s,a,u,l=0,c=new x,d=0;return s=new C(c),a=new E(s),o=function(t){var r=new w;c.setDisposable(r),r.setDisposable(n.scheduleWithRelative(e,function(){var e;t===d&&(l=0,e=++d,u.onCompleted(),u=new S,i.onNext(k(u,a)),o(e))}))},u=new S,i.onNext(k(u,a)),o(0),s.add(r.subscribe(function(e){var n=0,r=!1;u.onNext(e),l++,l===t&&(r=!0,l=0,n=++d,u.onCompleted(),u=new S,i.onNext(k(u,a))),r&&o(n)},function(e){u.onError(e),i.onError(e)},function(){u.onCompleted(),i.onCompleted()})),a})},f.bufferWithTime=function(){return this.windowWithTime.apply(this,arguments).selectMany(function(e){return e.toArray()})},f.bufferWithTimeOrCount=function(e,t,n){return this.windowWithTimeOrCount(e,t,n).selectMany(function(e){return e.toArray()})},f.timeInterval=function(e){var t=this;return e||(e=y),h(function(){var n=e.now();return t.select(function(t){var r=e.now(),i=r-n;return n=r,{value:t,interval:i}})})},f.timestamp=function(e){return e||(e=y),this.select(function(t){return{value:t,timestamp:e.now()}})},f.sample=function(e,t){return t||(t=y),"number"==typeof e?c(this,N(e,t)):c(this,e)},f.timeout=function(e,t,n){var r,i=this;return t||(t=g(new Error("Timeout"))),n||(n=y),r=e instanceof Date?function(e,t){n.scheduleWithAbsolute(e,t)}:function(e,t){n.scheduleWithRelative(e,t)},new p(function(n){var o,s=0,a=new w,u=new x,l=!1,c=new x;return u.setDisposable(a),o=function(){var i=s;c.setDisposable(r(e,function(){l=s===i;var e=l;e&&u.setDisposable(t.subscribe(n))}))},o(),a.setDisposable(i.subscribe(function(e){var t=!l;t&&(s++,n.onNext(e),o())},function(e){var t=!l;t&&(s++,n.onError(e))},function(){var e=!l;e&&(s++,n.onCompleted())})),new C(u,c)})},d.generateWithAbsoluteTime=function(e,t,n,r,i,o){return o||(o=y),new p(function(s){var a,u,l=!0,c=!1,d=e;return o.scheduleRecursiveWithAbsolute(o.now(),function(e){c&&s.onNext(a);try{l?l=!1:d=n(d),c=t(d),c&&(a=r(d),u=i(d))}catch(o){return s.onError(o),void 0}c?e(u):s.onCompleted()})})},d.generateWithRelativeTime=function(e,t,n,r,i,o){return o||(o=y),new p(function(s){var a,u,l=!0,c=!1,d=e;return o.scheduleRecursiveWithRelative(0,function(e){c&&s.onNext(a);try{l?l=!1:d=n(d),c=t(d),c&&(a=r(d),u=i(d))}catch(o){return s.onError(o),void 0}c?e(u):s.onCompleted()})})},f.delaySubscription=function(e,t){return t||(t=y),this.delayWithSelector(A(e,t),function(){return v()})},f.delayWithSelector=function(e,t){var n,r,i=this;return"function"==typeof e?r=e:(n=e,r=t),new p(function(e){var t=new C,o=!1,s=function(){o&&0===t.length&&e.onCompleted()},a=new x,u=function(){a.setDisposable(i.subscribe(function(n){var i;try{i=r(n)}catch(o){return e.onError(o),void 0}var a=new w;t.add(a),a.setDisposable(i.subscribe(function(){e.onNext(n),t.remove(a),s()},e.onError.bind(e),function(){e.onNext(n),t.remove(a),s()}))},e.onError.bind(e),function(){o=!0,a.dispose(),s()}))};return n?a.setDisposable(n.subscribe(function(){u()},e.onError.bind(e),function(){u()})):u(),new C(a,t)})},f.timeoutWithSelector=function(e,t,n){if(1===arguments.length){t=e;var e=m()}n||(n=g(new Error("Timeout")));var r=this;return new p(function(i){var o=new x,s=new x,a=new w;o.setDisposable(a);var u=0,l=!1,c=function(e){var t=u,r=function(){return u===t},a=new w;s.setDisposable(a),a.setDisposable(e.subscribe(function(){r()&&o.setDisposable(n.subscribe(i)),a.dispose()},function(e){r()&&i.onError(e)},function(){r()&&o.setDisposable(n.subscribe(i))}))};c(e);var d=function(){var e=!l;return e&&u++,e};return a.setDisposable(r.subscribe(function(e){if(d()){i.onNext(e);var n;try{n=t(e)}catch(r){return i.onError(r),void 0}c(n)}},function(e){d()&&i.onError(e)},function(){d()&&i.onCompleted()})),new C(o,s)})},f.throttleWithSelector=function(e){var t=this;return new p(function(n){var r,i=!1,o=new x,s=0,a=t.subscribe(function(t){var a;try{a=e(t)}catch(u){return n.onError(u),void 0}i=!0,r=t,s++;var l=s,c=new w;o.setDisposable(c),c.setDisposable(a.subscribe(function(){i&&s===l&&n.onNext(r),i=!1,c.dispose()},n.onError.bind(n),function(){i&&s===l&&n.onNext(r),i=!1,c.dispose()}))},function(e){o.dispose(),n.onError(e),i=!1,s++},function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,s++});return new C(a,o)})},f.skipLastWithTime=function(e,t){t||(t=y);var n=this;return new p(function(r){var i=[];return n.subscribe(function(n){var o=t.now();for(i.push({interval:o,value:n});i.length>0&&o-i[0].interval>=e;)r.onNext(i.shift().value)},r.onError.bind(r),function(){for(var n=t.now();i.length>0&&n-i[0].interval>=e;)r.onNext(i.shift().value);r.onCompleted()})})},f.takeLastWithTime=function(e,t,n){return this.takeLastBufferWithTime(e,t).selectMany(function(e){return b(e,n)})},f.takeLastBufferWithTime=function(e,t){var n=this;return t||(t=y),new p(function(r){var i=[];return n.subscribe(function(n){var r=t.now();for(i.push({interval:r,value:n});i.length>0&&r-i[0].interval>=e;)i.shift()},r.onError.bind(r),function(){for(var n=t.now(),o=[];i.length>0;){var s=i.shift();n-s.interval<=e&&o.push(s.value)}r.onNext(o),r.onCompleted()})})},f.takeWithTime=function(e,t){var n=this;return t||(t=y),new p(function(r){var i=t.scheduleWithRelative(e,function(){r.onCompleted()});return new C(i,n.subscribe(r))})},f.skipWithTime=function(e,t){var n=this;return t||(t=y),new p(function(r){var i=!1,o=t.scheduleWithRelative(e,function(){i=!0}),s=n.subscribe(function(e){i&&r.onNext(e)},r.onError.bind(r),r.onCompleted.bind(r));return new C(o,s)})},f.skipUntilWithTime=function(e,t){t||(t=y);var n=this;return new p(function(r){var i=!1,o=t.scheduleWithAbsolute(e,function(){i=!0}),s=n.subscribe(function(e){i&&r.onNext(e)},r.onError.bind(r),r.onCompleted.bind(r));return new C(o,s)})},f.takeUntilWithTime=function(e,t){t||(t=y);var n=this;return new p(function(r){return new C(t.scheduleWithAbsolute(e,function(){r.onCompleted()}),n.subscribe(r))})},n}),function(e){var t={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},n=t[typeof window]&&window||this,r=t[typeof exports]&&exports&&!exports.nodeType&&exports,i=t[typeof module]&&module&&!module.nodeType&&module,o=(i&&i.exports===r&&r,t[typeof global]&&global);!o||o.global!==o&&o.window!==o||(n=o),"function"==typeof define&&define.amd?define("rx.experimental",["rx","exports"],function(t,r){return n.Rx=e(n,r,t),n.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=e(n,module.exports,require("./rx")):n.Rx=e(n,{},n.Rx)}.call(this,function(e,t,n,r){function i(){}function o(e,t){return 1===e.length&&Array.isArray(e[t])?e[t]:C.call(e)}function s(e,t){return new b(function(){return new g(function(){return e()?{done:!1,value:t}:{done:!0,value:r}})})}var a=n.Observable,u=a.prototype,l=n.AnonymousObservable,c=a.concat,d=a.defer,f=a.empty,p=n.Disposable.empty,h=n.CompositeDisposable,v=n.SerialDisposable,m=n.SingleAssignmentDisposable,g=n.internals.Enumerator,b=n.internals.Enumerable,y=b.forEach,w=n.Scheduler.immediate,x=n.Scheduler.currentThread,C=Array.prototype.slice,E=n.AsyncSubject,S=n.Observer,k=n.internals.inherits,R=n.internals.addProperties,N="object"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";e.Set&&"function"==typeof(new e.Set)["@@iterator"]&&(N="@@iterator");u.letBind=u.let=function(e){return e(this)},a["if"]=a.ifThen=function(e,t,n){return d(function(){if(n||(n=f()),n.now){var r=n;n=f(r)}return e()?t:n})},a["for"]=a.forIn=function(e,t){return y(e,t).concat()};var A=a["while"]=a.whileDo=function(e,t){return s(e,t).concat()};u.doWhile=function(e){return c([this,A(e,this)])},a["case"]=a.switchCase=function(e,t,n){return d(function(){if(n||(n=f()),n.now){var i=n;n=f(i)}var o=t[e()];return o!==r?o:n})},u.expand=function(e,t){t||(t=w);var n=this;return new l(function(r){var i=[],o=new v,s=new h(o),a=0,u=!1,l=function(){var n=!1;i.length>0&&(n=!u,u=!0),n&&o.setDisposable(t.scheduleRecursive(function(t){var n;if(!(i.length>0))return u=!1,void 0;n=i.shift();var o=new m;s.add(o),o.setDisposable(n.subscribe(function(t){r.onNext(t);var n=null;try{n=e(t)}catch(o){r.onError(o)}i.push(n),a++,l()},r.onError.bind(r),function(){s.remove(o),a--,0===a&&r.onCompleted()})),t()}))};return i.push(n),a++,l(),s})},a.forkJoin=function(){var e=o(arguments,0);return new l(function(t){var n=e.length;if(0===n)return t.onCompleted(),p;for(var r=new h,i=!1,o=new Array(n),s=new Array(n),a=new Array(n),u=0;n>u;u++)!function(u){var l=e[u];r.add(l.subscribe(function(e){i||(o[u]=!0,a[u]=e)},function(e){i=!0,t.onError(e),r.dispose()},function(){if(!i){if(!o[u])return t.onCompleted(),void 0;s[u]=!0;for(var e=0;n>e;e++)if(!s[e])return;i=!0,t.onNext(a),t.onCompleted()}}))}(u);return r})},u.forkJoin=function(e,t){var n=this;return new l(function(r){var i,o,s=!1,a=!1,u=!1,l=!1,c=new m,d=new m;return c.setDisposable(n.subscribe(function(e){u=!0,i=e},function(e){d.dispose(),r.onError(e)},function(){if(s=!0,a)if(u)if(l){var e;try{e=t(i,o)}catch(n){return r.onError(n),void 0}r.onNext(e),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),d.setDisposable(e.subscribe(function(e){l=!0,o=e},function(e){c.dispose(),r.onError(e)},function(){if(a=!0,s)if(u)if(l){var e;try{e=t(i,o)}catch(n){return r.onError(n),void 0}r.onNext(e),r.onCompleted()}else r.onCompleted();else r.onCompleted()})),new h(c,d)})},u.manySelect=function(e,t){t||(t=w);var n=this;return d(function(){var r;return n.select(function(e){var t=new T(e);return r&&r.onNext(e),r=t,t}).doAction(i,function(e){r&&r.onError(e)},function(){r&&r.onCompleted()}).observeOn(t).select(function(t,n,r){return e(t,n,r)})})};var T=function(e){function t(e){var t=this,n=new h;return n.add(x.schedule(function(){e.onNext(t.head),n.add(t.tail.mergeObservable().subscribe(e))})),n}function n(n){e.call(this,t),this.head=n,this.tail=new E}return k(n,e),R(n.prototype,S,{onCompleted:function(){this.onNext(a.empty())},onError:function(e){this.onNext(a.throwException(e))},onNext:function(e){this.tail.onNext(e),this.tail.onCompleted()}}),n}(a);return n}),define("scalejs.reactive/reactive",["require","rx","rx.binding","rx.time","rx.experimental"],function(e,t){return t.Observable.fromRequire=function(n){return t.Observable.create(function(t){e(n,function(){t.onNext(arguments),t.onCompleted()})})},t.Observable.fromEnumerable=function(e){return t.Observable.createWithDisposable(function(n){var r=t.Disposable.create(function(){}),i=e.GetEnumerator();return t.Scheduler.currentThread.scheduleRecursive(function(e){try{!r.isDisposed&&i.MoveNext()?(n.onNext(i.Current()),e()):(i.Dispose(),n.onCompleted())}catch(t){i.Dispose(),n.onError(t)}}),r})},t}),define("scalejs.reactive/messageBus",["scalejs!core","rx","rx.binding"],function(e,t){function n(e){return u(l,e)||(l[e]=new t.Subject),l[e]}function r(e){return u(c,e)||(c[e]=new t.BehaviorSubject),c[e]}function i(e,t){var r=n(e);r.onNext(t)}function o(e,t,r){var i=n(e);if(1===arguments.length)return i.asObservable();if(2===arguments.length)return i.subscribe(t);if(3===arguments.length)return i.where(t).subscribe(r);throw{name:"Illegal Argument",message:arguments.length+" arguments have been provided. Valid arguments are subject (required), filter (optional), and receiver (optional)."}}function s(e,t){var n=r(e);n.onNext(t)}function a(e,t,n){var i=r(e);if(1===arguments.length)return i.asObservable();if(2===arguments.length)return i.subscribe(t);if(3===arguments.length)return i.where(t).subscribe(n);throw{name:"Illegal Argument",message:arguments.length+" arguments have been provided. Valid arguments are subject (required), filter (optional), and receiver (optional)."}}var u=e.object.has,l={},c={};return{notify:i,receive:o,set:s,get:a}}),define("scalejs.reactive",["scalejs!core","./scalejs.reactive/reactive","./scalejs.reactive/messageBus"],function(e,t,n){var r=e.object.merge;e.registerExtension({reactive:r(t,{messageBus:n})})}),define("sandbox",[],function(){return{load:function(e,t,n,r){t(["scalejs!core","scalejs!extensions"],function(t){if(r.isBuild)n();else{var i=t.buildSandbox(e);n(i)}})}}}),define("app/main/viewmodels/mainViewModel",["sandbox!main"],function(e){return function(){function t(e){return parseFloat(e).toFixed(2)}var n,r=(e.linq.enumerable.range,e.mvvm.observableArray),i=e.ajax.jsonpGet,o=r();return n=[{id:"Symbol",field:"Symbol",name:"Symbol",minWidth:75},{id:"Name",field:"Name",name:"Name",minWidth:300},{id:"LastSale",field:"LastSale",name:"Last Sale",cssClass:"money",minWidth:100},{id:"MarketCap",field:"MarketCap",name:"Market Cap",cssClass:"money",minWidth:150},{id:"Sector",field:"Sector",name:"Sector",minWidth:150},{id:"Industry",field:"industry",name:"Industry",minWidth:350}],i("./companylist.txt",{}).subscribe(function(e){o(JSON.parse(e).map(function(e){return e.LastSale=t(e.LastSale),e.MarketCap=t(e.MarketCap),e}))}),{columns:n,itemsSource:o}}}),define("views",[],function(){return{load:function(e,t,n,r){var i=e.match(/([^,]+)/g)||[];i=i.map(function(e){return-1===e.indexOf(".html",e.length-5)&&(e+=".html"),-1===e.indexOf("/")&&(e="./views/"+e),"text!"+e}),i.push("scalejs.mvvm","scalejs!core"),t(i,function(){var e=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0,arguments.length-2);r.isBuild||e.mvvm.registerTemplates.apply(null,t),n(t)})}}}),define("text!app/main/views/main.html",[],function(){return'<div id="main_template">\r\n    <div class="main grid" data-class="main-grid"></div>\r\n</div>\r\n'}),define("bindings",[],function(){return{load:function(e,t,n,r){var i=e.match(/([^,]+)/g)||[];i=i.map(function(e){return e.indexOf(".js",e.length-3)>-1?e:(-1===e.indexOf("Bindings",e.length-"Bindings".length)&&(e+="Bindings"),-1===e.indexOf("/")?"./bindings/"+e:e)}),i.push("scalejs.mvvm","scalejs!core"),t(i,function(){var e=arguments[arguments.length-1],t=Array.prototype.slice.call(arguments,0,arguments.length-2);r.isBuild||e.mvvm.registerBindings.apply(null,t),n(t)
})}}}),define("app/main/bindings/mainBindings",{"main-grid":function(){return{slickGrid:{columns:this.columns,itemsSource:this.itemsSource,enableColumnReorder:!1,forceFitColumns:!0,rowHeight:40}}}}),define("styles",[],function(){return{load:function(e,t,n){var r=e.match(/([\w\-]+)/g)||[];r=r.map(function(e){return-1===e.indexOf("/")&&(e="./styles/"+e),"less!"+e}),t(r,function(){n(Array.prototype.slice.call(arguments,0,arguments.length))})}}}),define("normalize",[],function(){function e(e,r,i){if(e.match(a)||e.match(s))return e;e=o(e);var u=i.match(s),l=r.match(s);return!l||u&&u[1]==l[1]&&u[2]==l[2]?n(t(e,r),i):t(e,r)}function t(e,t){if("./"==e.substr(0,2)&&(e=e.substr(2)),e.match(a)||e.match(s))return e;var n=t.split("/"),r=e.split("/");for(n.pop();curPart=r.shift();)".."==curPart?n.pop():n.push(curPart);return n.join("/")}function n(e,t){var n=t.split("/");for(n.pop(),t=n.join("/")+"/",i=0;t.substr(i,1)==e.substr(i,1);)i++;for(;"/"!=t.substr(i,1);)i--;t=t.substr(i+1),e=e.substr(i+1),n=t.split("/");var r=e.split("/");for(out="";n.shift();)out+="../";for(;curPart=r.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var r=/([^:])\/+/g,o=function(e){return e.replace(r,"$1/")},s=/[^\:\/]*:\/\/([^\/])*/,a=/^(\/|data:)/,u=function(t,n,r){n=o(n),r=o(r);for(var i,s,t,a=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;i=a.exec(t);){s=i[3]||i[2]||i[5]||i[6]||i[4];var u;u=e(s,n,r);var l=i[5]||i[6]?1:0;t=t.substr(0,a.lastIndex-s.length-l-1)+u+t.substr(a.lastIndex-l-1),a.lastIndex=a.lastIndex+(u.length-s.length)}return t};return u.convertURIBase=e,u.absoluteURI=t,u.relativeURI=n,u}),define("less",["require"],function(e){var t={};if(t.pluginBuilder="./less-builder","undefined"==typeof window)return t.load=function(e,t,n){n()},t;t.normalize=function(e,t){return".less"==e.substr(e.length-5,5)&&(e=e.substr(0,e.length-5)),e=t(e)};var n=document.getElementsByTagName("head")[0],r=document.getElementsByTagName("base");r=r&&r[0]&&r[0]&&r[0].href;var i=(r||window.location.href.split("#")[0].split("?")[0]).split("/");i[i.length-1]="",i=i.join("/"),window.less=window.less||{env:"development"};var o,s=0;return t.inject=function(e){31>s&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),s++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))},t.load=function(n,r,o,s){e(["./lessc","./normalize"],function(e,a){var u=r.toUrl(n+".less");u=a.absoluteURI(u,i);var l=new e.Parser(window.less);l.parse('@import (multiple) "'+u+'";',function(e,n){return e?o.error(e):(t.inject(a(n.toCSS(s.less),u,i)),setTimeout(o,7),void 0)})})},t}),define("less!app/main/styles/main",[],function(){}),define("app/main/mainModule",["sandbox!main","app/main/viewmodels/mainViewModel","views!main","bindings!main","styles!main"],function(e,t){return function(){var n=e.mvvm.root,r=e.mvvm.template,i=e.state.registerStates,o=e.state.builder.state,s=e.state.builder.onEntry,a=t();i("root",o("app",o("main",s(function(){n(r("main_template",a))}))))}}),define("scalejs/extensions",["scalejs.ajax-jquery","scalejs.functional","scalejs.grid-slick","scalejs.linq-linqjs","scalejs.mvvm","scalejs.reactive","scalejs.statechart-scion"],function(){return Array.prototype.slice(arguments)}),require(["scalejs!application/main"],function(e){e.run()}),define("app/app",function(){}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}(".main.grid {\n  height: 100%;\n  background-color: #1b1b1b;\n  color: orange;\n  /* Column Styles */\n  /* Grid Styles */\n  /* Scrollbar Styles*/\n}\n.main.grid .money {\n  text-align: right;\n}\n.main.grid .slick-header-columns {\n  height: 40px;\n}\n.main.grid .slick-header-column.ui-state-default {\n  font-size: 18px;\n  line-height: 30px;\n  font-weight: bold;\n  font-style: normal;\n  height: 40px;\n  border: 0px;\n  text-align: center;\n}\n.main.grid .slick-row.ui-widget-content,\n.main.grid .slick-row.ui-state-active {\n  font-size: 16px;\n  line-height: 40px;\n  color: #808080;\n}\n.main.grid .slick-cell {\n  border: 0px;\n  padding: 0px 8px;\n}\n.main.grid .slick-row.even {\n  background-color: #121212;\n}\n.main.grid ::-webkit-scrollbar {\n  width: 10px;\n  height: 10px;\n}\n.main.grid ::-webkit-scrollbar-track-piece {\n  background-color: #1b1b1b;\n}\n.main.grid ::-webkit-scrollbar-thumb:vertical {\n  height: 50px;\n  background-color: #808080;\n}\n.main.grid ::-webkit-scrollbar-thumb:horizontal {\n  width: 50px;\n  background-color: #808080;\n}\n.main.grid ::-webkit-scrollbar-corner {\n  background-color: #1b1b1b;\n}\n");